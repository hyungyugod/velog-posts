# ğŸ“Œ 0. ëŒ€í™”
### ğŸ“Œ 0-1. # ê¸°í˜¸ì˜ ìœ ë˜
- ì›ë˜ ë¬´ê²Œ ë‹¨ìœ„(â„”) â†’ ë²ˆí˜¸(number) â†’ ê°’(value)ìœ¼ë¡œ ì˜ë¯¸ê°€ ë°”ë€Œì–´ì™”ë‹¤. í•˜ì—¬ #ì„ ê°’ì´ë¼ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.
- í•´ì‹œ íƒœê·¸ì—ì„œ #loveëŠ” ë‹¨ìˆœí•œ ê¸€ìê°€ ì•„ë‹ˆë¼ "ì‚¬ë‘ì´ë¼ëŠ” íŠ¹ì • ê°œë…ì„ ì§€ì¹­í•˜ëŠ” ê°’"ìœ¼ë¡œ ë™ì‘í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

### ğŸ“Œ 0-2. throw eì˜ ì˜ë¯¸
- throw e; ë¥¼ ë˜ì§€ëŠ” ì´ìœ ëŠ” ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ ì—ëŸ¬ì˜ ì´ë¦„ì„ ì •í•´ê²Œ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.

### ğŸ“Œ 0-3. ì •ì  ë¦¬ì†ŒìŠ¤ íŒŒì¼ ìœ„ì¹˜ì— ê´€í•˜ì—¬
- ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ ë§µí•‘ì˜ ê¸°ë³¸ê°’ì€ /static, /public, /resources, /META-INF/resources ì¤‘ í•˜ë‚˜ì— íŒŒì¼ì´ ìˆì–´ì•¼ë§Œí•œë‹¤. 
- ì´ë•Œ resources mainì•„ë˜ì˜ resourcesê°€ ì•„ë‹ˆë¼ resources ì•„ë˜ì— ìƒˆë¡­ê²Œ êµ¬ì„±í•œ resourcesë¥¼ ì˜ë¯¸í•œë‹¤.
- src/main/resources/assets/css/header.css â†’ ì´ê±´ "ì •ì  ë¦¬ì†ŒìŠ¤"ë¡œ ì•ˆ ì˜¬ë¼ê°!
- src/main/resources/resources/assets/css/header.css â†’ ì´ê±´ "/assets/css/header.css"ë¡œ ì ‘ê·¼ ê°€ëŠ¥!
- ì¦‰ assetsëŠ” ë¬´ì¡°ê±´ staticì•ˆì— ìˆì–´ì•¼ ë°”ë¡œ /ì•„ë˜ë¡œ ë§µí•‘í•´ì„œ ë³¼ ìˆ˜ ìˆë‹¤.
- ì •ì  ë¦¬ì†ŒìŠ¤ë€ ì„œë²„ê°€ ê°€ê³µí•˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ì œê³µí•˜ëŠ” íŒŒì¼ì„ ì˜ë¯¸í•œë‹¤.
- ìœ„ì˜ 4ê°€ì§€ íŒŒì¼ë§Œ ì›¹ì—ì„œ urlë¡œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ì¦‰ URL = static í´ë” ë‚´ë¶€ ê²½ë¡œê°€ ëœë‹¤.
- ë¸Œë¼ìš°ì €ì˜ /assets/css/header.css ìš”ì²­ì€ Spring Bootì˜ static/assets/css/header.css ì´ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤.
- DispatcherServletì´ ì£¼ì†Œë¥¼ ë°›ìœ¼ë©´ ë¨¼ì € ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë’¤ì§€ê³  ì—†ìœ¼ë©´ ì € 4ê°œì˜ í´ë”ê°€ resources ì•ˆì— ìˆëŠ”ì§€ ì°¾ë„ë¡ ìë™ì„¤ì • ë˜ì–´ìˆìŒ. 
- ì¦‰ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì— ì…ë ¥í•˜ëŠ” URL ê²½ë¡œëŠ” DispatcherServletì´ ì •ì  ë¦¬ì†ŒìŠ¤ í•¸ë“¤ëŸ¬ì—ì„œ ì°¾ì•„ì£¼ëŠ” "static ë“± ë‚´ë¶€ì˜ ìƒëŒ€ê²½ë¡œ"ì™€ 1:1ë¡œ ë§¤í•‘ë¨.

### ğŸ“Œ 0-4. í´ë˜ìŠ¤ íŒ¨ìŠ¤ì— ê´€í•˜ì—¬ 
- í´ë˜ìŠ¤íŒ¨ìŠ¤ë€ : ìë°” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ, í´ë˜ìŠ¤ íŒŒì¼(.class), ë¦¬ì†ŒìŠ¤ íŒŒì¼(ì´ë¯¸ì§€, ì„¤ì •íŒŒì¼ ë“±)ì„ ì–´ë””ì„œ ì°¾ì„ì§€ ê²½ë¡œë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- IDEì—ì„œ í”„ë¡œì íŠ¸ ì‹¤í–‰í•  ë•Œ src/main/java, src/main/resources, ê·¸ë¦¬ê³  ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬(JAR) â†’ ì´ê²Œ "í´ë˜ìŠ¤íŒ¨ìŠ¤"ì— ìë™ìœ¼ë¡œ ë“¤ì–´ê°!
- ìŠ¤í”„ë§ë¶€íŠ¸ ê¸°ì¤€ src/main/resources ì•„ë˜ì˜ ëª¨ë“  íŒŒì¼, ì˜ˆ) application.properties, ì˜ˆ) static/, templates/ â†’ ë‹¤ í´ë˜ìŠ¤íŒ¨ìŠ¤ì— í¬í•¨ë¨!
- static, templates í´ë”ê°€ í´ë˜ìŠ¤íŒ¨ìŠ¤ ì•„ë˜ì— ìˆë‹¤ = ìë°”ê°€ ë°”ë¡œ ì°¾ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ì´ë‹¤. 

### ğŸ“Œ 0-5. ì»¨íŠ¸ë¡¤ëŸ¬ ë¦¬í„´ê°’ìœ¼ë¡œ ë§¤í•‘í•  í…œí”Œë¦¿ ê²½ë¡œëŠ” ë³€ê²½ê°€ëŠ¥í•˜ë‹¤.
- application.propertiesì—ì„œ spring.thymeleaf.prefix=classpath:/my-views/ ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ src/main/resources/my-views/ ê°€ í…œí”Œë¦¿ ë£¨íŠ¸ê°€ ëœë‹¤. 

# ğŸ“Œ 1. íŒŒì¼ helper
- aië¥¼ ì‚¬ìš©í•˜ë©´ ìë™ì™„ì„±ì—ì„œ ë‚´ê°€ í• ë£¨ì‹œì—ì´ì…˜ì„ ë‹¹í•  ìˆ˜ ìˆë‹¤. ë¯¸ë¦¬ ìƒê°í•˜ê³  ê¼¼ê¼¼íˆ ê²€ì¦í•´ì•¼í•œë‹¤.
### ğŸ“Œ 1-1. file helper ì „ì²´ì½”ë“œ
- ìš°ì„  ì „ì²´ì½”ë“œë¥¼ ì œì‹œí•œ í›„ì— í•˜ë‚˜í•˜ë‚˜ ì•„ë˜ì„œ ëœ¯ì–´ë³´ë„ë¡ í•˜ê² ë‹¤. ì£¼ì„ìœ¼ë¡œ ? ë¶™ì¸ ê²ƒë“¤ì„ í…ŒìŠ¤íŠ¸ í•˜ë„ë¡ í•œë‹¤.
```java
@Value("${upload.dir}")
    private String uploadDir;

    @Value("${upload.url}")
    private String uploadUrl;

    @SuppressWarnings("null")
    public UploadItem saveMultipartFile(MultipartFile multipartFile)
            throws NullPointerException, Exception {
        String originName = multipartFile.getOriginalFilename();

        if (originName != null && originName.isEmpty()) {
            NullPointerException e = new NullPointerException("ì—…ë¡œë“œëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
            log.error("ì—…ë¡œë“œ ì‹¤íŒ¨", e);
            throw e; // ì´ ì˜ˆì™¸ë¥¼ saveMultipartFile ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ìª½ì˜ catchë¬¸ìœ¼ë¡œ ë˜ì§.
        }

        Calendar c = Calendar.getInstance();
        String targetDir = String.format ("%s/%04d/%02d/%02d", 
            uploadDir, c.get(Calendar.YEAR), c.get(Calendar.MONTH) + 1, c.get(Calendar.DATE)); // DATEì™€ DAY_OF_MONTHëŠ” ê°™ë‹¤.

        File f = new File(targetDir);
            if (!f.exists()) {
                f.mkdirs();
            }

        String ext = originName.substring(originName.lastIndexOf(".")); // í™•ì¥ì ì¶”ì¶œ
        String fileName = null;
        File targetFile = null;
        int count = 0;
        
        while (true) { // ?
            fileName = String.format("%d%d%s", System.currentTimeMillis(), count, ext);
            targetFile = new File(targetDir, fileName);

            if (!targetFile.exists()) {
                break;
            }

            count++;
        }

        try {
            multipartFile.transferTo(targetFile); // ?
        } catch (Exception e) {
            log.error("ì—…ë¡œë“œ ëœ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
            throw e;
        }

        String absPath = targetFile.getAbsolutePath().replace("\\", "/"); // ?

        String filePath = null; // ?
        if (absPath.substring(0, 1).equals("/")) {
            filePath = absPath.replace(uploadDir, "");
        } else {
            filePath = absPath.replace(uploadDir.substring(1), ""); // ìœˆë„ìš° ê³„ì—´
        }

        String fileUrl = String.format("%s%s", uploadUrl, filePath);

        UploadItem item = new UploadItem();
        item.setContentType(multipartFile.getContentType());
        item.setFieldName(multipartFile.getName());
        item.setFileSize(multipartFile.getSize());
        item.setOriginName(originName);
        item.setFilePath(filePath);
        item.setFileUrl(fileUrl);

        log.debug(item.toString());

        return item; 
        
    }
```

### ğŸ“Œ 1-2. ê¸°ì¡´ ê²½ë¡œ ì•„ë˜ ì—°ì›”ì¼ë¡œ í´ë”ë¥¼ ë§Œë“¤ì–´ ë‘ê¸°
- ê°™ì€ ë‚  ì €ì¥ëœ íŒŒì¼ì€ ê°™ì€ í´ë”ì— ìˆë„ë¡ í´ë”(ë””ë ‰í† ë¦¬)ë¥¼ ë§Œë“ ë‹¤. 
```java
Calendar c = Calendar.getInstance();
        String targetDir = String.format ("%s/%04d/%02d/%02d", 
            uploadDir, c.get(Calendar.YEAR), c.get(Calendar.MONTH) + 1, c.get(Calendar.DATE)); // DATEì™€ DAY_OF_MONTHëŠ” ê°™ë‹¤.

        File f = new File(targetDir);
            if (!f.exists()) {
                f.mkdirs();
            }
```

### ğŸ“Œ 1-3. ì—…ë¡œë“œí•  íŒŒì¼ì˜ "ì´ë¦„ì´ ê²¹ì¹˜ì§€ ì•Šê²Œ" íŒŒì¼ì´ë¦„ì„ ë°”ê¿”ì„œ ì €ì¥í•˜ê¸°
- targetFile = new File(targetDir, fileName); : ì´ê±´ "targetDir(í´ë” ê²½ë¡œ)" ì•ˆì— "fileName(íŒŒì¼ ì´ë¦„)"ì„ ë¶™ì—¬ì„œ, ê·¸ ê²½ë¡œì— í•´ë‹¹í•˜ëŠ” íŒŒì¼ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
- ì´ëŠ” ì‹¤ì œ íŒŒì¼ì´ ë§Œë“¤ì–´ì§„ ê²ƒì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë©° ê·¸ëƒ¥ ê·¸ ê²½ë¡œì˜ íŒŒì¼ì„ ì¡°ì‘, ì €ì¥, ì‚­ì œí•  ìˆ˜ ìˆëŠ” ê°ì²´(ë„ìš°ë¯¸)ë¥¼ ë§Œë“  ê²ƒì´ë‹¤.
- ì¦‰ **â€œì´ ê²½ë¡œ(í´ë”+ì´ë¦„)ì— íŒŒì¼ì´ ìˆë‹¤ë©´ ê·¸ê±¸ ê°€ë¦¬í‚¤ê³ , ì—†ë‹¤ë©´ ê·¸ëƒ¥ â€˜ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜â€™ë§Œ ê°€ë¦¬í‚¤ëŠ” ê°ì²´â€**ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤.
- ì´ëŠ” íŒŒì¼ì´ ìƒì„±ë˜ê±°ë‚˜ ë‚´ìš©ì´ ì±„ì›Œì§€ëŠ” ìˆœê°„ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì œì–´í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.
```java
while (true) { 
            fileName = String.format("%d%d%s", System.currentTimeMillis(), count, ext);
            targetFile = new File(targetDir, fileName);

            if (!targetFile.exists()) {
                break;
            }

            count++;
        }
```

### ğŸ“Œ 1-4. ì›¹ì—ì„œ ëˆ„êµ°ê°€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ì„œë¹„ìŠ¤ ì„œë²„ì— ì €ì¥í•˜ê¸°
- ì›¹ì—ì„œ ëˆ„êµ°ê°€ ì˜¬ë¦° íŒŒì¼ì€ ì„œë²„ ë©”ëª¨ë¦¬ í˜¹ì€ ì„ì‹œ íŒŒì¼ì— ì„ì‹œë¡œ ì €ì¥ë˜ì–´ ìˆëŠ”ë° ì´ê±¸ ì„œë²„ ë‚´ì˜ ì •í™•íˆ ë³´ê´€í•  ìœ„ì¹˜ë¡œ ì˜®ê¸°ëŠ” ê³¼ì •ì´ë‹¤.
- ê·¼ë° íŒŒì¼ ì €ì¥ì€ ìƒê°ë³´ë‹¤ ì—ëŸ¬ê°€ ë§ì´ ë‚˜ë¯€ë¡œ ì—ëŸ¬ê°€ ë‚¬ì„ ë•Œ ì„œë²„ë¥¼ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ì—ëŸ¬ë¥¼ ë˜ì§€ë„ë¡ ì„¤ê³„í•˜ì˜€ë‹¤.
- multipartFile : ì›¹ì—ì„œ ì‚¬ìš©ìê°€ ì˜¬ë¦° íŒŒì¼ì´ ì„œë²„ì— ì„ì‹œë¡œ ì €ì¥ë˜ì–´ìˆê±°ë‚˜ ë©”ëª¨ë¦¬ì— ë“¤ì–´ìˆëŠ” ìƒíƒœì´ë‹¤.
- transferTo: â€œmultipartFile(ì—…ë¡œë“œëœ ì„ì‹œíŒŒì¼)â€ì˜ ë‚´ìš©ì„ â†’ â€œtargetFile(ë‚´ê°€ ì§€ì •í•œ ê²½ë¡œ/ì´ë¦„ì˜ ì‹¤ì œ íŒŒì¼)â€ë¡œ ë³µì‚¬(ì €ì¥)í•´ì¤˜! ë¼ëŠ” ëª…ë ¹ì´ë‹¤.
- targetFile ì´ íŒŒì¼ ê°ì²´ëŠ” íŒŒì¼ì´ ìˆì–´ì•¼í•  ìœ„ì¹˜ì— ì´ë¦„í‘œë¥¼ ë‹¬ì•„ë‘” ê²ƒì´ê³  ê±°ê¸°ì— ê´€ë¦¬ì¸ì„ ë‘” ëŠë‚Œì´ë‹¤. ì—¬ê¸°ì— ì‹¤ì œë¡œ ë‚´ìš©ì„ ì“°ë ¤ë©´ íŒŒì¼ ì…ì¶œë ¥ì„ í†µí•´ ì“°ê±°ë‚˜ transferTo ì´ëŸ° ë©”ì„œë“œë¥¼ í†µí•´ ë‚´ìš©ì„ ë¶€ì–´ì£¼ì–´ì•¼í•œë‹¤.
```java
try {
            multipartFile.transferTo(targetFile); 
        } catch (Exception e) {
            log.error("ì—…ë¡œë“œ ëœ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ì¤‘ì— ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.", e);
            throw e;
        }
``` 

### ğŸ“Œ 1-5. ì„œë²„ì— ì €ì¥ëœ íŒŒì¼ì˜ ë¬¼ë¦¬ì  ìœ„ì¹˜ë¥¼ ìƒëŒ€ê²½ë¡œë¡œ ë°”ê¿”ì£¼ê¸°(ì›¹ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´)
- ì„œë²„ ë‚´ë¶€ì—ì„œëŠ” ì ˆëŒ€ê²½ë¡œ(ì˜ˆ: D:/upload/2025/06/18/12345.jpg ë˜ëŠ” /upload/2025/06/18/12345.jpg)ë¡œ íŒŒì¼ì´ ì €ì¥ëœ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆì§€ë§Œ ì›¹ì—ì„œëŠ” ë³´ì•ˆìƒì˜ ë¬¸ì œì™€ ìš´ì˜ì²´ì œì— ë”°ë¼ ê²½ë¡œê°€ ë‹¤ë¥¸ ë¬¸ì œê°€ ìˆì–´ì„œ ì´ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
- ì›¹ ì„œë²„ë‚˜ ë¸Œë¼ìš°ì €, html, css, jsì—ì„œ í‘œì‹œí•˜ëŠ” íŒŒì¼ ê²½ë¡œëŠ” ë¬´ì¡°ê±´ ìŠ¬ë˜ì‹œë§Œ ì“°ëŠ”ê²Œ ì›ì¹™ì´ë‹¤.
- String absPath = targetFile.getAbsolutePath().replace("\\", "/"); : ìœˆë„ìš°ëŠ” ì—­ìŠ¬ë˜ì‹œë¡œ ì €ì¥ë˜ë¯€ë¡œ ì—­ìŠ¬ë˜ì‹œë¥¼ ëª¨ë‘ ìŠ¬ë˜ì‹œë¡œ ìš°ì„  ë°”ê¿”ì¤€ë‹¤. (ìœˆë„ìš°ë„ ìŠ¬ë˜ì‹œë¡œ ì…ë ¥í•´ë„ ê²€ìƒ‰ì€ ê°€ëŠ¥í•˜ë‹¤. ì €ì¥ë˜ëŠ”ê²Œ ì—­ìŠ¬ë˜ì‹œë¡œ ë  ë¿)
- application propierties ì„¤ì •ì—ì„œë„ upload.dir=/C:/study-springboot/upload ì´ëŸ°ì‹ìœ¼ë¡œ ìŠ¬ë˜ì‹œë¡œ í‘œê¸°í•´ë‘ì—ˆë‹¤.
- ì´ë•Œ ì„¤ì •íŒŒì¼ì˜ ì•ì— ìŠ¬ë˜ì‹œë¥¼ ë¶™ì¸ ì´ìœ ëŠ” ì›¹ì—ì„œ íŒŒì¼ì„ ì¸ì‹í•  ë•Œ C:/Users/hyungyu/Desktop/button.pngì´ê±°ë¥¼ file:///C:/Users/hyungyu/Desktop/button.png ì´ë ‡ê²Œ ì¸ì‹í•˜ê³  file:// ì´ê±°ëŠ” http:// ê°™ì€ ê±°ë‹ˆê¹Œ ë¹¼ë©´ /C:/Users/hyungyu/Desktop/button.png ì´ë ‡ê²Œ ì¸ì‹í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë˜ì„œ ì˜†ê³¼ê°™ì´ ì ì–´ì£¼ì–´ì•¼í•œë‹¤.
- ìœ„ì™€ ê°™ì´ ìœˆë„ìš°ëŠ” íŒŒì¼í‘œê¸°ì‹œìŠ¤í…œì´ ì›¹ì´ë‘ í˜¸í™˜ì´ ì¢‹ì§€ëŠ” ì•Šë‹¤.
- ë¬¸ìì—´.substring(1) : ë‘ë²ˆì§¸ ê¸€ìë¶€í„° ëê¹Œì§€ ê°€ì ¸ì˜´ ì¦‰ /C:/Users/hyungyu/Desktop/button.png ì´ëŸ°ê²Œ ìˆë‹¤ë©´ C:/Users/hyungyu/Desktop/button.png ì´ê±°ë§Œ ê°€ì ¸ì˜¨ë‹¤.
-  filePath = absPath.replace(uploadDir.substring(1), ""): "C:/study-springboot/upload/2025/06/18/123.jpg" ì´ëŸ´ë•Œ ì•ì˜ ì ˆëŒ€ê²½ë¡œë¥¼ ë–¼ì„œ "/study-springboot/upload" ì´ë ‡ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤.
-  ê·¸ë¦¬ê³  ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” uploadUrlì¸ /filesì— ë’¤ì˜ ê²ƒë“¤ì„ ë¶™ì—¬ì„œ ì „ì²´ íŒŒì¼ urlë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
```java
String absPath = targetFile.getAbsolutePath().replace("\\", "/"); // ?

        String filePath = null; // ?
        if (absPath.substring(0, 1).equals("/")) {
            filePath = absPath.replace(uploadDir, "");
        } else {
            filePath = absPath.replace(uploadDir.substring(1), ""); // ìœˆë„ìš° ê³„ì—´
        }

String fileUrl = String.format("%s%s", uploadUrl, filePath);
```

### ğŸ“Œ 1-6. íŒŒì¼ ì—…ë¡œë“œ ì»¨íŠ¸ë¡¤ëŸ¬
- implementation 'net.coobird:thumbnailator:0.4.20' ì¸ë„¤ì¼ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¸ë˜í”½ì„ ì¤„ì´ê¸° ìœ„í•´ íŒŒì¼ì„ ê°€ê³µí•˜ì—¬ ì—…ë¡œë“œí•˜ëŠ” ì²˜ë¦¬ë¥¼ ì¶”ê°€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤.
- ì „ì²´ì ìœ¼ë¡œ ìš°ì„  íŒŒì¼ì„ ë°›ì•„ì™€ì„œ ìë¥¼ í¬ê¸°ë¡œ ì´ë¦„ì„ ë¶™ì—¬ ìƒˆë¡œ ì €ì¥í•œë‹¤. 
- ì €ì¥ì´ ëìœ¼ë©´ ê·¸ íŒŒì¼ì„ ì¸ë„¤ì¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë¹Œë”ë¥¼ í™œìš©í•˜ì—¬ ìë¥´ê³  ì²˜ë¦¬ë¥¼ í•œ í›„ì— ì›¹ì— ë³´ì—¬ì¤„ ìš©ë„ì˜ ìƒëŒ€ê²½ë¡œë¥¼ ë§Œë“¤ì–´ì„œ ëª¨ë¸ê°ì²´ì— ë‹´ì•„ ë°˜í™˜í•œë‹¤.
```java
@Slf4j
@Controller
public class UseHelperController {

    @Autowired
    private WebHelper webHelper;

    @Autowired
    private FileHelper fileHelper;

    @Value("${upload.dir}")
    private String uploadDir;

    @Value("${upload.url}")
    private String uploadUrl;

    @GetMapping("/use_helper/upload_single")
    public String uploadSingle() {
        return "use_helper/upload_single";
    }

    @PostMapping("/use_helper/upload_single_ok")
    public String postMethodName(Model model,
        @RequestParam(value="profile-photo", required=false) MultipartFile profilePhoto) {

        UploadItem item = null;

        try {
            item = fileHelper.saveMultipartFile(profilePhoto);
        } catch (Exception e) {
            webHelper.serverError(e);
            return null;
        }

        int width = 640;
        int height = 640;
        boolean crop = true;

        if (item.getContentType().indexOf("image") > -1) {
            log.debug(String.format("[Thumbnail] path: %s, size: %dx%d, crop: %s", 
                item.getFilePath(), width, height, String.valueOf(crop)));
        

        File loadFile = new File(this.uploadDir, item.getFilePath());
        String dirPath = loadFile.getParent(); // ì „ì²´ ê²½ë¡œì—ì„œ íŒŒì¼ì´ ìœ„ì¹˜í•œ í´ë” ê²½ë¡œ ë¶„ë¦¬
        String fileName = loadFile.getName(); // ì „ì²´ ê²½ë¡œì—ì„œ íŒŒì¼ ì´ë¦„ë§Œ ë¶„ë¦¬
        int p = fileName.lastIndexOf(".");
        String name = fileName.substring(0, p); // í™•ì¥ìë¥¼ ì œì™¸í•œ íŒŒì¼ì´ë¦„
        String ext = fileName.substring(p + 1); // .í™•ì¥ìì—ì„œ í™•ì¥ì ëª…ë§Œ ë¶„ë¦¬

        String thumbName = name + "_" + width + "x" + height + "." + ext;

        File f = new File(dirPath, thumbName); // ë¶„ë¦¬í•´ë’€ë˜ í´ë” ê²½ë¡œì™€ ìƒˆ íŒŒì¼ì´ë¦„ì„ í•©ì³ì„œ ìë¦¬ì¡ê¸°
        String saveFile = f.getAbsolutePath();

        log.debug(String.format("[Thumbnail] saveFile: %s", saveFile));

        if (!f.exists()) { // ìš°ì„  íŒŒì¼ì„ í•˜ë“œì— ì €ì¥í•´ë‘ê³  êº¼ë‚´ì„œ ì¸ë„¤ì¼ ë¹Œë”ë¡œ ì¡°ì •í•œë‹¤.
            Builder<File> builder = Thumbnails.of(loadFile);

            if (crop) {
                builder.crop(Positions.CENTER);
            }

            builder.size(width, height);
            builder.useExifOrientation(true); // ìƒˆë¡œë¡œ ì´¬ì˜ëœ ì‚¬ì§„ì„ íšŒì „ì‹œí‚´
            builder.outputFormat(ext); // í™•ì¥ìë¥¼ ë¶™ì—¬ì¤Œ.

            try {
                builder.toFile(saveFile);
            } catch (Exception e) {
                webHelper.serverError(e);
                return null;
            }
        }

        String thumbnailPath = null;
        saveFile = saveFile.replace("\\", "/"); // ìƒˆë¡œìš´ ì ˆëŒ€ ê²½ë¡œ ìˆ˜ì •í•˜ê¸° 
        if (saveFile.substring(0, 1).equals("/")) {
            thumbnailPath = saveFile.replace(uploadDir, "");
        } else {
            thumbnailPath = saveFile.replace(uploadDir.substring(1), "");
        }

        String thumbnailUrl = String.format("%s%s", uploadUrl, thumbnailPath);

        item.setThumbnailPath(thumbnailPath);
        item.setThumbnailUrl(thumbnailUrl);

    }

    model.addAttribute("item", item);

        // ë·° í˜¸ì¶œ
        return "use_helper/upload_single_ok";
    }
}
```

### ğŸ“Œ 1-7. ì—…ë¡œë“œí•˜ëŠ” html
- ë§ì´ ë°›ìœ¼ë ¤ë©´ multiple ì„ input íƒœê·¸ì— ì¶”ê°€í•˜ë©´ ì—¬ëŸ¬ íŒŒì¼ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
- const file = event.target.files[0]; : ì´ë²¤íŠ¸ì—ì„œ currentTargetìœ¼ë¡œ filesë¥¼ ì¡°íšŒí•˜ë©´ ë°°ì—´ì„ ë°›ì•„ì˜¤ëŠ”ë° ì§€ê¸ˆì€ í•œê°œë§Œ ë°›ì•„ì˜¤ë¯€ë¡œ files[0]ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤.
```html
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>
    <h2>ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ</h2>
    <!--
        1) GETë°©ì‹ì€ ì—…ë¡œë“œ ë¶ˆê°€
        2) enctype="multipart/form-data"ëŠ” íŒŒì¼ ì—…ë¡œë“œì‹œ í•„ìˆ˜
    -->
    <form method="post" th:action="@{/use_helper/upload_single_ok}" enctype="multipart/form-data">
        <div class="file-wrapper">
            <label for="profile-photo">
                <img th:src="@{/assets/images/button.jpg}" class="preview" />
            </label>
            <input type="file" name="profile-photo" id="profile-photo" accept="image/*" />
        </div>
        <button type="submit">ì—…ë¡œë“œí•˜ê¸°</button>
    </form>
    <script>
        document.querySelector('#profile-photo').addEventListener('change', function (event) {
            const file = event.target.files[0];
            const imgUrl = URL.createObjectURL(file);
            document.querySelector('.preview').src = imgUrl;
        });
    </script>
</body>
```

### ğŸ“Œ 1-8. myConfig ì˜¤ë¥˜ ìˆ˜ì •
- %së¥¼ ì„¤ì •í•˜ê³  ì¸ìë¥¼ ë„£ì§€ ì•Šì•„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ì—ˆë‹¤.
- /**: ëª¨ë“  í•˜ìœ„ ê²½ë¡œë¥¼ ë‹¤ í¬í•¨
- /* : í•œë‹¨ê³„ ì•„ë˜ê¹Œì§€ë§Œ í¬í•¨. 
- .addResourceLocations(String.format("file://%s/", uploadDir)); : ì´ë ‡ê²Œ í•˜ë©´ ì›¹ì— ë³´ì—¬ì¤„ ë•Œ file:// (ë¸Œë¼ìš°ì €ê°€ ë³¼ ìˆ˜ ìˆëŠ” í˜•ì‹)ì— ì‹¤ì œ íŒŒì¼ì„ ì €ì¥í•˜ê³  ìˆëŠ” ì €ì¥ëœ ê²½ë¡œë¥¼ ë¶™ì—¬ì„œ ë³´ì—¬ì¤€ë‹¤.
- ì‚¬ìš©ìê°€ íŒŒì¼ì„ ìš”ì²­í•˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8080/files/2025/06/18/abc.jpg ì´ëŸ°ì‹ìœ¼ë¡œ ì˜¤ëŠ”ë° ì´ë•Œ uploadUrl(/files)ì˜ í˜•íƒœë¡œ ì˜¤ëŠ” íŒŒì¼ì€ ì‚¬ìš©ì(ë¸Œë¼ìš°ì €)ê°€ ì§ì ‘ í´ë”ë¥¼ ë“¤ì–´ê°€ì„œ ì°¾ëŠ”ê²Œ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ì´ ì°¾ì•„ì¤€ë‹¤.
```java
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler(String.format("%s/**", uploadUrl))
            .addResourceLocations(String.format("file://%s/", uploadDir));
}
```

### ğŸ“Œ 1-9. ì—¬ëŸ¬ ì—…ë¡œë“œë¥¼ ì €ì¥í•˜ëŠ” helper
- íŒŒì¼ë“¤ì„ ë¦¬ìŠ¤íŠ¸ì— ë‹´ì•„ì„œ ê·¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤.
- íŒŒì¼ì˜ ì—…ë¡œë“œëŠ” ì„¬ì„¸í•˜ê¸° ë•Œë¬¸ì— try catchë‚˜ ì—…ë¡œë“œê°€ í•˜ë‚˜ë„ ì•ˆë˜ì—ˆì„ ìƒí™©ì„ ê¼­ ëŒ€ë¹„í•´ì•¼í•œë‹¤.
- ê¼­ ë¬´ì–¸ê°€ë¥¼ ì˜¤ë²„ë¼ì´ë”© í•˜ì§€ ì•Šì•„ë„ ì˜¤ë²„ë¡œë”©ì€ í•  ìˆ˜ ìˆë‹¤. ì˜¤ë²„ë¼ì´ë”©ì´ë‘ ì˜¤ë²„ë¡œë”©ì€ ë³„ê°œì˜ ë¬¸ì œì´ë‹¤.
- saveMultipartFile(MultipartFile uploadFile), saveMultipartFile(MultipartFile[] uploadFiles)ìœ¼ë¡œ 1ê°œ ì˜¬ë¦´ë•Œ, ì—¬ëŸ¬ê°œ ì˜¬ë¦´ë•Œì˜ ë©”ì„œë“œê°€ ì˜¤ë²„ë¡œë”©ë˜ì–´ìˆëŠ” ìƒí™©ì´ë‹¤.
```java
public List<UploadItem> saveMultipartFile(MultipartFile[] uploadFiles)
            throws NullPointerException, Exception {

        if(uploadFiles.length < 1) {
            NullPointerException e = new NullPointerException("ì—…ë¡œë“œ ëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");
            log.error("ì—…ë¡œë“œ ì‹¤íŒ¨", e);
            throw e;
        }        

        List<UploadItem> uploadList = new ArrayList<>();

        for (int i = 0; i < uploadFiles.length; i++) {
            try {
                UploadItem item = this.saveMultipartFile(uploadFiles[i]);
                uploadList.add(item);
            } catch (NullPointerException e) {
                log.error(String.format("%dë²ˆì§¸ í•­ëª©ì´ ì—…ë¡œë“œë˜ì§€ ì•ŠìŒ", i));
            } catch (Exception e) {
                log.error(String.format("%dë²ˆì§¸ í•­ëª©ì´ ì—…ë¡œë“œë˜ì§€ ì•ŠìŒ", e.getLocalizedMessage()));
            }
        }

        if (uploadList.size() == 0) {
            Exception e = new Exception("íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨");
            log.error("ì—…ë¡œë“œ ì‹¤íŒ¨", e);
            throw e;
        }

        return uploadList;
    }
```

### ğŸ“Œ 1-10. ì—¬ëŸ¬ ì—…ë¡œë“œëœ íŒŒì¼ì„ ë„ì›Œì„œ ë³´ì—¬ì£¼ëŠ” html
- ëª¨ë¸ê°ì²´ë¥¼ ë°˜ë³µ ëŒë©´ì„œ í•´ë‹¹ë˜ëŠ” ë‚´ë¶€ ë‚´ìš©ì„ ê°€ì ¸ì™€ì„œ list ì•ˆì— spaníƒœê·¸ë¡œ ë„£ì–´ì„œ í™”ë©´ì— ë„ìš´ë‹¤.
- fslightboxë¥¼ ì‚¬ìš©í•´ì„œ í´ë¦­í–ˆì„ë•Œ ë¹„ë™ê¸°ë¡œ ì›ë³¸ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ ë„ì›Œì¤„ ìˆ˜ ìˆê²Œ í•œë‹¤.
- ì´ëŠ” ì›ë³¸ì´ë¯¸ì§€ë¥¼ ë°”ë¡œ ë„ì›Œì£¼ì§€ ì•Šìœ¼ë¯€ë¡œì„œ íŠ¸ë˜í”½ì„ ì¤„ì´ëŠ” íš¨ê³¼ë¥¼ ë‚¸ë‹¤.
```html
<body>
    <div th:replace="~{/fragments/header :: my-header}"></div>

    <h2>ë©€í‹° ì—…ë¡œë“œ ê²°ê³¼ í™•ì¸</h2>

    <div class="image-list">
        <div class="image-item" th:each="item : ${uploadItemList}">
            <div>
                <a th:href="${item.fileUrl}" data-fslightbox="gallery">
                    <img th:src="${item.thumbnailUrl}" />
                </a>
            </div>
            <ul>
                <li>fieldName: <span th:text="${item.fieldName}" ></li>
                <li>orginName: <span th:text="${item.originName}" ></li>
                <li>contentType: <span th:text="${item.contentType}" ></li>
                <li>fileSize: <span th:text="${item.fileSize}" ></li>
                <li>filePath: <span th:text="${item.filePath}" ></li>
                <li>fileUrl: <span th:text="${item.fileUrl}" ></li>
                <li>thumbnailPath: <span th:text="${item.thumbnailPath}" ></li>
                <li>thumbnailUrl: <span th:text="${item.thumbnailUrl}" ></li>
            </ul>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fslightbox/3.0.9/index.min.js"></script>
</body>
```

### ğŸ“Œ 1-11. ì—¬ëŸ¬ íŒŒì¼ì„ ì„ íƒí•´ì„œ ë³´ì—¬ì£¼ëŠ” html
- êµ¬ì„± ìƒ í•œë²ˆì— íŒŒì¼ ì˜¬ë¦¬ê¸°ë¥¼ ëˆ„ë¥´ê³  í•œë²ˆì— ì—¬ëŸ¬íŒŒì¼ì„ ì„ íƒí•´ì„œ ì—…ë¡œë“œí• ë•Œ í•œë²ˆì— ì˜¬ë ¤ì•¼ ë°˜ì˜ëœë‹¤.
- ì—…ë¡œë“œë¥¼ ì—¬ëŸ¬ë²ˆ ëˆ„ë¥´ë©´ ë§¤ë²ˆ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ê°€ ë¹„ì›Œì§€ë¯€ë¡œ ê¼­ í•œë²ˆì— ì „ë¶€ í¬í•¨í•´ì•¼í•œë‹¤.
```html
<body>
    <div th:replace="~{/fragments/header :: my-header}"></div>

    <h2>ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ</h2>
    <!--
        1) GETë°©ì‹ì€ ì—…ë¡œë“œ ë¶ˆê°€
        2) enctype="multipart/form-data"ëŠ” íŒŒì¼ ì—…ë¡œë“œì‹œ í•„ìˆ˜
    -->
    <form method="post" th:action="@{/multi/upload_ok}" enctype="multipart/form-data">
        <div class="image-upload">
            <label for="file-input">
                <img th:src="@{/assets/images/button.png}" width="200" />
            </label>
            <input id="file-input" type="file" name="photo" multiple />
        </div>
        <button type="submit">ì—…ë¡œë“œí•˜ê¸°</button>
    </form>

    <!-- ë¯¸ë¦¬ë³´ê¸°ë¥¼ í‘œì‹œí•  ì»¨í…Œì´ë„ˆ -->
    <div id="preview-container"></div>

    <script>
        // File ìš”ì†Œì— ëŒ€í•œ change ì´ë²¤íŠ¸
        document.querySelector('#file-input').addEventListener('change', (e) => {
            // ë¯¸ë¦¬ë³´ê¸°ë¥¼ í‘œì‹œí•  ì»¨í…Œì´ë„ˆ ê°ì²´
            const previewContainer = document.querySelector('#preview-container');

            // ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ë¥¼ ëª¨ë‘ ì§€ìš´ë‹¤.
            previewContainer.innerHTML = '';

            // ì„ íƒëœ íŒŒì¼ì˜ íŒŒì¼ë¦¬ìŠ¤íŠ¸(ë°°ì—´ì´ ì•„ë‹˜)
            const files = e.currentTarget.files;
            console.log(files);

            // ì„ íƒëœ íŒŒì¼ì˜ ìˆ˜ ë§Œí¼ ë°˜ë³µ
            Array.from(files).forEach((v, i) => {
                console.log(v);

                // ië²ˆì§¸ íŒŒì¼ì˜ íŒŒì¼ URLì„ ê°€ì ¸ì˜¨ë‹¤.
                const imgUrl = URL.createObjectURL(v);
                console.log(imgUrl);

                // ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•  imgíƒœê·¸ë¥¼ ìƒì„±
                // createElementëŠ” <body>íƒœê·¸ ì•ˆì— ì½”ë”©ë˜ì–´ ìˆì§€ ì•Šì€ ìƒˆë¡œìš´ HTML íƒœê·¸ë¥¼ ìƒì„±
                // --> í™”ë©´ìƒì— ë³´ì´ì§€ ì•ŠìŒ
                const imgTag = document.createElement('img');
                imgTag.classList.add('preview');
                imgTag.setAttribute('src', imgUrl);

                // JSë¡œ ìƒì„±í•œ ìƒˆë¡œìš´ HTMLíƒœê·¸ë¥¼ í™”ë©´ìƒì— í‘œì‹œí•˜ê¸° ìœ„í•´
                // ê¸°ì¡´ì˜ Elementê°ì²´ ì•ˆì— ìì‹ìš”ì†Œë¡œ ì¶”ê°€(append)
                previewContainer.appendChild(imgTag);
            });
        });
    </script>
</body>
```
