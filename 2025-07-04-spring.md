# ğŸ“Œ 0. ë³´ìŠ¤ í´ë¡  í”„ë¡œì íŠ¸
### ğŸ“Œ 0-1. Static Resource Handler ì„¤ì • ì˜¤ë¥˜ë¡œ ì´ë¯¸ì§€ê°€ ì˜ ë¡œë“œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ
- mywebconfig = ì„¤ì •íŒŒì¼ì—ì„œ íŒŒì¼ ê²½ë¡œ ì„¤ì •ê³¼ ê´€ë ¨ëœ ë¬¸ì œê°€ ìˆì—ˆë‹¤.
- addResourceHandlerì—ëŠ” productsimagesUrlì´ ë“¤ì–´ê°€ì•¼ í•˜ê³  addResourceLocationsì—ëŠ” productsimagesDirì´ ë“¤ì–´ê°€ì•¼ í–ˆëŠ”ë° ë°˜ëŒ€ë¡œ ì…ë ¥ë˜ì–´ ìˆì—ˆë‹¤.
- ì²«ì¤„ì˜ "%s/**", productsimagesUrl ì—ì„œ %s ìë¦¬ë¡œ productsimagesUrlì´ í¬ë©§íŒ… ë˜ëŠ”ë° ì¦‰ productsimagesUrl/ ë’¤ì— ë¶™ëŠ” ëª¨ë“  ê²½ìš°ì— ëŒ€í•´ì„œ í•¸ë“¤ë§í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- ë‘ë²ˆì§¸ ì¤„ì€ í•´ë‹¹ ìš”ì²­ì„ ë°›ì•˜ì„ ë•Œ ì–´ë””ë¡œ ë³´ë‚´ì¤„ê¹Œì— ëŒ€í•œ ì´ì•¼ê¸°ì¸ë° file://productsimagesDir/ ë¡œ ë§¤í•‘í•˜ë¼ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ productsimagesUrl/íŒŒì¼ê²½ë¡œì˜ íŒŒì¼ì€
- file://productsimagesDir/íŒŒì¼ê²½ë¡œ ë¡œ ë§¤í•‘ë˜ê²Œ ëœë‹¤.
```java
// ìƒí’ˆ ì´ë¯¸ì§€ - URLê³¼ Dir ìˆœì„œ ìˆ˜ì •
        registry.addResourceHandler(String.format("%s/**", productsimagesUrl))
                .addResourceLocations(String.format("file://%s/", productsimagesDir));
```

### ğŸ“Œ 0-2. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œ ë¡œì§ ì¶”ê°€
- ìƒí’ˆ ì•„ì´ë””ì™€ ìœ ì € ì•„ì´ë””ë¥¼ ë°›ì•„ì„œ ì‚­ì œë¥¼ ì§„í–‰í•œë‹¤.
```java
@Delete("DELETE FROM wishlists WHERE user_id = #{userId} AND product_id = #{productId}")
    int deleteWishlistItem(@Param("userId") int userId, @Param("productId") int productId);
```
- í”„ë¡ íŠ¸ì—”ë“œë¡œë¶€í„° ìƒí’ˆ ì•„ì´ë””ë¥¼ ì „ë‹¬ ë°›ì•„ì„œ í•´ë‹¹ ìƒí’ˆì„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ê¸°
- ì‚­ì œí•œ ë°ì´í„° ìˆ˜ê°€ 0ë³´ë‹¤ í¬ë©´(ì¡´ì¬í•˜ë©´) ì„±ê³µ ë©”ì„¸ì§€ë¥¼ í”„ë¡ íŠ¸ì— ë³´ë‚¸ë‹¤.
```java
@RestController
@RequiredArgsConstructor
public class WishlistRestController {

    private final WishlistService wishlistService;

    @DeleteMapping("/wishlist/remove/{productId}")
    public ResponseEntity<ResponseDTO> removeWishlistItem(@PathVariable int productId, HttpSession session) throws Exception {

        // ì„¸ì…˜ì—ì„œ ë¡œê·¸ì¸ëœ ìœ ì € ID ê°€ì ¸ì˜¤ê¸°
        User member = (User) session.getAttribute("memberInfo");
        
        if (member == null) {
            throw new UnauthorizedException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."); // ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ê²½ìš° ì˜ˆì™¸ ë°œìƒ
        }
        int userId = member.getUserId();

        // ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì•„ì´í…œ ì‚­ì œ
        int deletedRows = wishlistService.removeWishlistItem(userId, productId);

        if (deletedRows > 0) {
            ResponseDTO responseDTO = ResponseDTO.builder()
                    .success(true)
                    .message("ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")
                    .build();
            return ResponseEntity.ok(responseDTO);
        } else {
            throw new NotFoundException("í•´ë‹¹ ìƒí’ˆì´ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ì—†ìŠµë‹ˆë‹¤."); // ì‚­ì œí•  ì•„ì´í…œì´ ì—†ëŠ” ê²½ìš° ì˜ˆì™¸ ë°œìƒ
        }
    }
}
```
- ì‚­ì œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìƒí’ˆì˜ dataë¥¼ ê°€ì ¸ì™€ì„œ ì‚¬ìš©ìì— ì»¨íŒì„ ë°›ê³  ì‚­ì œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. 
- ì‘ë‹µ ìì²´ê°€ ì„±ê³µí•˜ë©´ ì‘ë‹µì„ íŒŒì‹±í•˜ê³  í•´ë‹¹ ì‘ë‹µì´ ì„±ê³µì´ë¼ë©´ ë°”ë¡œ domì—ì„œ í•´ë‹¹ ìƒí’ˆì„ í‘œí˜„í•˜ëŠ” htmlì„ ì‚­ì œí•´ë²„ë¦¬ê³  ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì˜ ê°œìˆ˜ë¥¼ -1í•œë‹¤.
```js
// ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œ ê¸°ëŠ¥
document.addEventListener('DOMContentLoaded', function() {
    // ëª¨ë“  ì‚­ì œ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    const removeButtons = document.querySelectorAll('.wishlist-remove-btn');
    
    removeButtons.forEach(button => { button.addEventListener('click', async function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const productId = this.getAttribute('data-id');
            
            if (confirm('ì´ ìƒí’ˆì„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {                
                try {
                    // AJAX ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— ì‚­ì œ ìš”ì²­ ì „ì†¡
                    const response = await fetch(`/wishlist/remove/${productId}`, {
                        method: 'DELETE',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });

                    if (response.ok) {
                        const result = await response.json();
                        
                        if (result.success) {
                            // ì„±ê³µì‹œ í•´ë‹¹ ì•„ì´í…œì„ DOMì—ì„œ ë°”ë¡œ ì œê±°
                            const wishlistItem = this.closest('.wishlist-item');
                            wishlistItem.remove();
                            
                            // ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ ì—…ë°ì´íŠ¸
                            const countElement = document.querySelector('.wishlist-count-number');
                            const currentCount = parseInt(countElement.textContent);
                            countElement.textContent = currentCount - 1;
                            
                            alert(result.message);
                        } else {
                            alert(result.message);
                        }
                    } else {
                        alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                } catch (error) {
                    alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        });
    });
});
```

### ğŸ“Œ 0-3. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ë ˆì´ì•„ì›ƒ ê°œì„ 
- ì „ì²´ ë„ˆë¹„ = 100%, gap ì´í•© = 3 Ã— 20px = 60px, ê° ì•„ì´í…œ ë„ˆë¹„ = (100% - 60px) Ã· 4 = 25% - 15px
- ìœ„ì™€ ê°™ì´ ê³„ì‚°í•´ì„œ ê° ìƒí’ˆì˜ ë„ˆë¹„ë¥¼ ì¡ëŠ”ë‹¤.
```css
.wishlist-info-container {
    width: 100%;
    min-height: 200px;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;

    .wishlist-item {
        width: calc(25% - 15px);
        display: flex;
        flex-direction: column;
        transition: box-shadow 0.2s;
        position: relative;
        padding-bottom: 20px;
}
}
```

### ğŸ“Œ 0-4. í”„ë¡œí•„ ì´ë¯¸ì§€ í´ë¦­ì´ë²¤íŠ¸ ê°œì„  
- queryselectorëŠ” ë¡œë“œë ë•Œì˜ htmlì„ ì„ íƒí•˜ëŠ”ë° ë§Œì•½ ë¡œë”©ë ë•Œ ì—†ë‹¤ë©´ í•´ë‹¹ html ê°ì²´ë¥¼ ë“±ë¡í•´ë‘˜ ìˆ˜ ì—†ë‹¤.
- í”„ë ˆê·¸ë¨¼íŠ¸ ì•ˆì— jsê°€ ìˆëŠ”ê²½ìš° ë¡œë”©ì— ì‹œì°¨ê°€ ìƒê²¨ ì™¸ë¶€ htmlì„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ë“±ë¡í•´ë‘ê³  ì•„ë˜ì²˜ëŸ¼ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ë•Œ ë§Œì•½ open-profile-edit ì´ í´ë˜ìŠ¤ë¥¼ ê°€ì§„ë‹¤ë©´ ëª¨ë‹¬ì„ ì—¬ëŠ” ì‹ìœ¼ë¡œ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ì´ëŠ” í´ë¦­ì´ë²¤íŠ¸ë¥¼ ë¨¼ì € ê±¸ì–´ë‘ê³  ì‚¬í›„ì— íƒìƒ‰í•˜ëŠ” ì‹ì´ë¯€ë¡œ ì´ë ‡ê²Œ ë¡œë“œ ì°¨ì´ì— ì˜í•œ ì˜¤ë¥˜ë¥¼ í”¼í•´ê°ˆ ìˆ˜ ìˆë‹¤.
```js
// ëª¨ë‹¬ ì—´ê¸° (ì´ë²¤íŠ¸ ìœ„ì„ ë°©ì‹ìœ¼ë¡œ ë³€ê²½)
document.addEventListener('click', async function(e) {
    // open-profile-edit í´ë˜ìŠ¤ë¥¼ ê°€ì§„ ìš”ì†Œê°€ í´ë¦­ë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (e.target.classList.contains('open-profile-edit') || e.target.closest('.open-profile-edit')) {
        const clickedElement = e.target.classList.contains('open-profile-edit') ? e.target : e.target.closest('.open-profile-edit');
    }
})
```

### ğŸ“Œ 0-5. ì¥ë°”êµ¬ë‹ˆì—ì„œ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€
- ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ í•˜ë‹¨ì˜ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ìƒí’ˆì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” X ë²„íŠ¼ì„ í´ë¦­í•´ë„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œë˜ì§€ ì•Šì•˜ìŒ
- !confirm('ì´ ìƒí’ˆì„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?') ì„ í†µí•´ ì‚­ì œ ì—¬ë¶€ë¥¼ í•œë²ˆ ë¬¼ì–´ë´ì•¼ í•œë‹¤.
- deleteë¡œ ë°±ì—”ë“œì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
```js
/* ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìƒí’ˆ ì‚­ì œ (ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ì—ì„œ) */
  const wishlistRemoveBtns = document.querySelectorAll('.wishlist-remove-btn');
  wishlistRemoveBtns.forEach(btn => {
    btn.addEventListener('click', async (e) => {
      e.preventDefault();
      e.stopPropagation();
      
      const wishId = btn.dataset.wishId;
      if (!wishId) {
        console.error('ìœ„ì‹œë¦¬ìŠ¤íŠ¸ IDê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      
      // data-wish-idì—ì„œ ìƒí’ˆ ID ì¶”ì¶œ (ìœ„ì‹œë¦¬ìŠ¤íŠ¸ IDê°€ ì•„ë‹Œ ìƒí’ˆ IDê°€ í•„ìš”)
      const wishlistItem = btn.closest('.wishlist-item');
      const productLink = wishlistItem.querySelector('a[href*="/product/"]');
      let productId = null;
      
      if (productLink) {
        const href = productLink.getAttribute('href');
        const match = href.match(/\/product\/(\d+)/);
        if (match) {
          productId = parseInt(match[1]);
        }
      }
      
      if (!productId) {
        console.error('ìƒí’ˆ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      if (!confirm('ì´ ìƒí’ˆì„ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        return;
      }

      try {
        const response = await fetch(`/wishlist/remove/${productId}`, {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' }
        });

        if (!response.ok) {
          throw new Error('ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œ ìš”ì²­ ì‹¤íŒ¨');
        }

        const result = await response.json();
        if (result.success) {
          // ì„±ê³µì‹œ í•´ë‹¹ ì•„ì´í…œì„ DOMì—ì„œ ì œê±°
          wishlistItem.remove();
          alert('ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          alert(result.message || 'ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      } catch (error) {
        console.error('ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œ ì‹¤íŒ¨:', error);
        alert('ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
      }
    });
  });
```
- productIdì™€ userIdë¥¼ í†µí•´ í•œ ìƒí’ˆì„ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.
```java
/**
     * ì¥ë°”êµ¬ë‹ˆì—ì„œ ì„ íƒí•œ ìƒí’ˆë“¤ì„ product_id ê¸°ì¤€ìœ¼ë¡œ ì „ì²´ ì‚­ì œ (ëª¨ë“  ì˜µì…˜ í¬í•¨)
     * @param productIds ì‚­ì œí•  ìƒí’ˆ ID ë¦¬ìŠ¤íŠ¸
     * @return ResponseEntity<ResponseDTO> ì‚­ì œ ê²°ê³¼
     */
    @DeleteMapping ("/api/cart/products")
    public ResponseEntity<ResponseDTO> deleteCartsByProducts(@RequestBody List<Integer> productIds, HttpSession session) throws Exception {

        User userInfo = (User) session.getAttribute("memberInfo");
        if (userInfo == null) {
            throw new UnauthorizedException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        }
        int userId = userInfo.getUserId();

        cartService.deleteCartsByProducts(productIds, userId);
        
        ResponseDTO response = ResponseDTO.builder()
                .success(true)
                .timestamp(LocalDateTime.now())
                .message("ì„ íƒí•œ ìƒí’ˆë“¤ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")
                .build();

        return ResponseEntity.ok(response);
    }
- ì—¬ëŸ¬ê°œì˜ ì¹´íŠ¸ë¥¼ ì‚­ì œí•˜ëŠ” ë©”ì„œë“œì— ì¸ìë¥¼ í•˜ë‚˜ë§Œ ë„£ëŠ” ì‹ìœ¼ë¡œ ì¬í™œìš©í•œë‹¤.
- cartService.deleteCarts(List.of(cartId));
    /**
     * ì¥ë°”êµ¬ë‹ˆì—ì„œ ê°œë³„ ì˜µì…˜cart_id ì‚­ì œ
     * @param cartId ì‚­ì œí•  ì¥ë°”êµ¬ë‹ˆ í•­ëª© ID
     * @return ResponseEntity<ResponseDTO> ì‚­ì œ ê²°ê³¼
     */
    @DeleteMapping("/api/cart/{cartId}")
    public ResponseEntity<ResponseDTO> deleteCartOption(@PathVariable int cartId) throws Exception {
        
        cartService.deleteCarts(List.of(cartId));
        
        ResponseDTO response = ResponseDTO.builder()
                .success(true)
                .timestamp(LocalDateTime.now())
                .message("ì˜µì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.")
                .build();

        return ResponseEntity.ok(response);
    }
```

### ğŸ“Œ 0-6. resultMap ì¤‘ë³µìœ¼ë¡œ ëª¨ë“  api ì„œë²„ì—ëŸ¬
- MyBatis ë§¤í¼ì—ì„œ ë°œìƒí•œ ë§¤í•‘ ì˜¤ë¥˜(ì˜ˆ: resultMap ì„ ì–¸/ì°¸ì¡° ì¶©ëŒ)ëŠ” Spring Bean ìƒì„± ì „ì²´ë¥¼ ë§‰ê±°ë‚˜, API í˜¸ì¶œ ì‹œ DB ì‘ì—…ì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ ê³„ì† ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œí•¨.
- Spring MVCì—ì„œëŠ” ì´ ì˜ˆì™¸ë¥¼ íŠ¹ë³„íˆ í•¸ë“¤ë§í•˜ì§€ ì•Šìœ¼ë©´, ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ì—ì„œ 500 Internal Server Errorë¡œ ë…¸ì¶œë¨.


### ğŸ“Œ 0-7. ë©”ì¼ í…œí”Œë¦¿ ê¹¨ì§ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ í•´ê²°
- ë©”ì¼ í…œí”Œë¦¿ì´ cssë¥¼ ëª»ì½ê³  htmlë§Œ ì½ì„ ìˆ˜ ìˆì–´ì„œ ë©”ì¼ì— ì•ˆê¹¨ì§€ê³  ë³´ë‚´ë ¤ë©´ ëª¨ë‘ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ë°•ì•„ì•¼ í•œë‹¤.
- ì½”íŒŒì¼ëŸ¿ì„ ì‚¬ìš©í•´ì„œ ë„£ì–´ë‹¬ë¼ê³  í•˜ë©´ ë°”ë¡œ ë„£ì–´ì¤€ë‹¤.
```html
<!-- ëª¨ë“  í…ìŠ¤íŠ¸ ìš”ì†Œì— text-align: center ì¶”ê°€ -->
<div style="padding: 20px; color: #333333; text-align: center;">
    <h1 style="font-size: 24px; margin-bottom: 10px; text-align: center;">ì•ˆë…•í•˜ì„¸ìš”, {{userEmail}}ë‹˜!</h1>
    <p style="font-size: 16px; line-height: 1.5; margin-bottom: 20px; text-align: center;">{{userEmail}}ë‹˜ì˜ ë¹„ë°€ë²ˆí˜¸ê°€ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    <p style="font-size: 24px; font-weight: bold; color: red; margin-bottom: 20px; text-align: center;">{{password}}</p>
</div>
```