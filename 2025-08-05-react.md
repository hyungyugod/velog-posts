# ğŸ“Œ 0. reudx í™œìš©
### ğŸ“Œ0-1. reduxHelper
- reduxì—ì„œ ajaxë¥¼ ìœ„í•œ slice ìƒì„±ì„ ë•ëŠ” í—¬í¼ì´ë‹¤.
- ê¸°ë³¸ ìƒíƒœë¥¼ ì •ì˜í•´ì£¼ê³ (ë°±ì—”ë“œ ì‘ë‹µ êµ¬ì¡°ì— ë§ì¶°) createAsyncThunkì—ì„œ ìë™ìœ¼ë¡œ ì‹¤í–‰í•´ì£¼ëŠ” pending, fulfilled, rejected ì•¡ì…˜í•¨ìˆ˜(ë¦¬ë“€ì„œ) ë“±ë¡ê¹Œì§€ í•´ì¤€ë‹¤.
- pending(pendere - > pendulum ë“± ë§¤ë‹¬ë ¤ ìˆë‹¤ëŠ” ì–´ì›) : ì•„ì§ ëë‚˜ì§€ ì•Šì€, ì‹¤í–‰ ì¤‘ì¸ ì´ë¼ëŠ” ëœ»ì´ë‹¤.
- ê·¸ëŸ¬ë‹ˆê¹Œ ajax ì¤‘ì—ëŠ” ìƒíƒœë¥¼ í˜„ì¬ ìƒíƒœ ê·¸ëŒ€ë¡œ ë‘ê³  ë¡œë”©ë°”ë§Œ ë„ìš´ë‹¤.
- ì´í›„ ì„±ê³µí•˜ë©´ ìƒˆë¡œì˜¨ ì‘ë‹µì„ í˜„ì¬ ìƒíƒœë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ë¡œë”©ë°”ë¥¼ ë‹«ëŠ”ë‹¤.
- ì‹¤íŒ¨í•˜ë©´ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ë®ì–´ì“°ê³  statusì™€ messageë§Œ ê¸°ì¡´ì—ì„œ ë³€ê²½í•œë‹¤.
- êµ¬ì¡° ìƒ ê°™ì€ ìƒíƒœë¥¼ ê³µìœ í•  ajax ì²­í¬ëŠ” ê°™ì´ extraReducers ë°°ì—´ì— ì „ë‹¬í•˜ì—¬ getDefaultSliceë¡œ ìƒíƒœë¥¼ ë§Œë“¤ì–´ë‘ì–´ì•¼í•œë‹¤.
```js
import {createSlice} from "@reduxjs/toolkit";

const pending = (state, {meta, payload}) => {
    return {...state, loading: true};
};

const fulfilled = (state, {meta, payload}) => {
    return {...payload, loading: false};
};

const rejected = (state, {meta, payload}) => {
    return {
        ...state,
        loading: false,
        status: payload.status || 0,
        message: payload.message || "unknown Error",
    };
};

const reduxHelper = {
    getDefaultSlice: (slideName, extraReducers = [], callback = {}, reducers = {}) => {
        return createSlice ({
            name: slideName,

            initialState: {
                status: 200,
                message: "OK",
                item: null,
                timstamp: null,
                loading: false,
            },

            reducers: reducers,

            extraReducers: (builder) => {
                extraReducers.forEach((v, i) => {
                    builder.addCase(v.pending, pending)
                            .addCase(v.fulfilled, callback[v.fulfilled] || fulfilled)
                            .addCase(v.rejected, rejected);
                });
            },
        });
    },
};
```

### ğŸ“Œ0-2. slice ë§Œë“  í›„ì— store ì—°ê²°
- createAsyncThunkë¡œ ë¹„ë™ê¸° ìš”ì²­ì„ ë³´ë‚´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì´ redux contextì— í¬í•¨ì‹œí‚¤ë©´ì„œ(ë¦¬ë•ìŠ¤ì˜ slice(ìŠ¬ë¼ì´ìŠ¤)ì— ì´ í•¨ìˆ˜ë¥¼ ë“±ë¡í•´ì„œ, â†’ ìƒíƒœ(state) ê´€ë¦¬ì™€ ì—°ê²°ì‹œí‚¨ë‹¤.) ê¸°ëŠ¥ì„ ë‹´ì€ ê°ì²´ë¥¼ ë§Œë“ ë‹¤ (ì´ ê³¼ì •ì—ì„œ â€œìŠ¬ë¼ì´ìŠ¤â€ë¼ëŠ” ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ê³ , â†’ ì´ ê°ì²´ëŠ” ë¹„ë™ê¸° ë¡œì§ê³¼ ìƒíƒœë¥¼ í•¨ê»˜ ê°–ëŠ”ë‹¤.).
- Thunk = ì–´ë–¤ ì‘ì—…ì„ ë¯¸ë£¨ê³  ì‹¶ì„ ë•Œ, ê·¸ ì‘ì—…ì„ í•¨ìˆ˜ë¡œ ê°ì‹¸ì„œ ì „ë‹¬í•˜ëŠ” ê²ƒ (ì‹¤ì œë¡œ í•„ìš”í•  ë•Œë§Œ ì—°ì‚° ì‹¤í–‰)
- ì›ë˜ thinkì˜ ê³¼ê±°í˜•ì€ thoughtì¸ë° 1960ë…„ëŒ€ ë¯¸êµ­ ì»´í“¨í„° ê³¼í•™ìë“¤ì´ ì»´íŒŒì¼ëŸ¬ ê°œë°œì„ í•˜ë©´ì„œ ë†ë‹´ì²˜ëŸ¼ "thunk"ë¼ëŠ” ë‹¨ì–´ë¥¼ ë§Œë“¤ì–´ ì¼ë‹¤. ì˜ë„: "ë‚´ê°€ (ê³§) ìƒê°í•  ê±°ì•¼!" â†’ "ì•„ì§ ìƒê°ì€ ì•ˆ í–ˆê³ , ë‚˜ì¤‘ì— ìƒê°í•  ê±°ì•¼." = ì•„ì§ ê³„ì‚°(ì‹¤í–‰)í•˜ì§€ ì•Šê³ , ë‚˜ì¤‘ì— ì‹¤í–‰í•  ê±°ì•¼ ë¼ëŠ” ëœ»ì´ë‹¤.
- ì²­í¬ë¥¼ ë§Œë“¤ë©´ pending, fulfilled, rejectedë¼ëŠ” ë¦¬ë“€ì„œê°€ ë‚´ë¶€ì— ë‚´ì¥ë˜ëŠ”ë° ì´ ë¦¬ë“€ì„œë“¤ì„ ë¯¸ë¦¬ ì •ì˜í•´ë‘ë©´ ì²­í¬ë¡œ ajaxë¥¼ ì‚¬ìš©í• ë•Œ ìë™ìœ¼ë¡œ ìƒíƒœë¥¼ ë³€í™˜í•  ìˆ˜ ìˆê²Œëœë‹¤.
- ì›ë˜ ìŠ¬ë¼ì´ìŠ¤ ë§Œë“¤ë•Œ reducerì•ˆì— ì§ì ‘ ë¦¬ë“€ì„œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•´ë‘ì–´ì•¼í•˜ì§€ë§Œ ì™¸ë¶€ì˜ í•¨ìˆ˜ì— ë°˜ì˜í•  ì¼€ì´ìŠ¤ë“¤ì€ extraReducersì— ë”°ë¡œ ë“±ë¡í•´ë‘ëŠ” ê²ƒì´ë‹¤.
- addCase(v.pending, pending) ì´ ëœ»ì€ v.pendingì˜ ìƒíƒœê°€ ë³€í•  ë•Œ pending ì´ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ë§Œë“¤ë¼ëŠ” ëœ»ì´ë‹¤.
```js
import {createAsyncThunk} from "@reduxjs/toolkit";
import fetchHelper from "../helpers/FetchHelper";
import reduxHelper from "../helpers/ReduxHelper";

const API_URL = "/traffic_acc";

export const getList = createAsyncThunk("TrafficAccSlice/getList", async (payload, {rejectWithValue}) => {
    let result = null;

    const params = {};

    try {
        result = await fetchHelper.get(API_URL, payload);
    }catch (err) {
        result = rejectWithValue(err);
    }

    return result;
});

const TrafficAccSlice = reduxHelper.getDefaultSlice("TrafficAccSlice", [getList]);

export default TrafficAccSlice.reducer;
```
- ìŠ¬ë¼ì´ìŠ¤ë¥¼ ë§Œë“¤ë©´ TrafficAccSlice.reducerë¡œ ìŠ¬ë¼ì´ìŠ¤ì—ì„œ ë¦¬ë“€ì„œ ê¸°ëŠ¥ë§Œ ë½‘ì•„ì„œ storeì— ë“±ë¡í•´ë‘”ë‹¤. ê·¸ëŸ¬ë©´ TrafficAccSliceì—ì„œ ì •ì˜ë˜ì—ˆë˜ ë¦¬ë“€ì„œê°€ contextì— ë“±ë¡ëœë‹¤.
```js
const store = configureStore(
    {
        reducer: {
            CounterSlice,
            GradeSlice,
            TrafficAccSlice
        }
    }
);
```

### ğŸ“Œ0-3. ì´ë¥¼ í™œìš©í•œ ì‚¬ê³  ë°ì´í„° ì¡°íšŒ ë°©ë²• 2ê°€ì§€
- ìš°ì„  ì²«ë²ˆì§¸ ê²½ìš°ëŠ” ë“œë¡­ë‹¤ìš´ì˜ ê°’ì„ ìƒíƒœë¡œ ê´€ë¦¬í•˜ë©´ì„œ í•´ë‹¹ ë“œë¡­ë‹¤ìš´ ê°’ì´ ë°”ë€”ë•Œë§ˆë‹¤ dispatch(getList({ year })); ë¥¼ ì‹¤í–‰í•˜ì—¬ yearë¥¼ íŒŒë¼ë¯¸í„°ë¡œ getìš”ì²­ì„ ë³´ë‚¸ë‹¤.
- `<select value={year} onChange={e => setYear(Number(e.target.value))}>` ë“œë¡­ë‹¤ìš´ì— ì˜†ì²˜ëŸ¼ ì²´ì¸ì§€ ì´ë²¤íŠ¸ë¥¼ ê±¸ì–´ì„œ ê°’ì´ ë°”ë€í›„ì— ê·¸ ë°”ë€ ê°’ì„ dispatch í•¨ìˆ˜ë¥¼ í†µí•´ ì„¸íŒ…í•œë‹¤.
- {[...Array(14)].map((_, i)} ì´ê±´ ë˜ê³  new Array(14)ëŠ” mapìœ¼ë¡œ êµ¬ì¡°ë¶„í•´ê°€ ì•ˆë˜ëŠ” ì´ìœ ëŠ” ...ìœ¼ë¡œ ë¶„í•´í•˜ê³  ì±„ìš°ë©´ ê°’ì„ undefinedë¡œ ì±„ì›Œì£¼ì§€ë§Œ new ArrayëŠ” ê·¸ëƒ¥ ë¹ˆê°’ì´ì–´ì„œ ê·¸ë ‡ë‹¤.
- reactì—ì„œ ë“œë¡­ë‹¤ìš´ì€ ê·¸ëƒ¥ JSX íƒœê·¸ ì‚¬ì´ì—ì„œ js ë¬¸ë²•ìœ¼ë¡œ ë™ì  ìƒì„±í•˜ë©´ ëœë‹¤.
- ëª©ë¡ ê°’ë„ ê·¸ëƒ¥ ë°˜ë³µëŒë©´ì„œ ê°’ì„ ì‚½ì…í•˜ì—¬ ë¦¬í„´í•œë‹¤.
```js
const TrafficAccTypeB = memo(() => {
    // hookì„ í†µí•´ sliceê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°’ ê°€ì ¸ì˜¤ê¸°
    // --> í™”ë©´ ì¶œë ¥ì— í•„ìš”í•œ í•­ëª©ë§Œ ì„ íƒì ìœ¼ë¡œ êµ¬ì¡°ë¶„í•´ í•œë‹¤.
    const { loading, status, message, item } = useSelector((state) => state.TrafficAccSlice);

    // ê²€ìƒ‰ë…„ë„ : 2005~2018ë…„ ì‚¬ì´ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ
    const [year, setYear] = useState(2018);

    // dispatch í•¨ìˆ˜ ìƒì„±
    const dispatch = useDispatch();

    // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ê±°ë‚˜ year ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ getList ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    useEffect(() => {
        if (!year) return; // yearê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
        dispatch(getList({ year }));
    }, [year]);

    return (
        <TrafficAccTypeBContainer>
            <h2>TrafficAcc Type A - ë°±ì—”ë“œë¡œë¶€í„° ë§¤ë²ˆ ë°ì´í„° ë°›ì•„ì˜¤ê¸°</h2>

            <Spinner loading={loading} />

            {status !== 200 && (
                <div className="error-info">
                    <h1>{status} Error</h1>
                    <p>{message}</p>
                </div>
            )}

            <div className="search-form">
                <select value={year} onChange={e => setYear(Number(e.target.value))}>
                    {[...Array(14)].map((_, i) => {
                        const yearValue = 2005 + i;
                        return (
                            <option key={yearValue} value={yearValue}>
                                {yearValue}
                            </option>
                        );
                    })}
                </select>
            </div>

            <Table>
                <thead>
                    <tr>
                        <th>ë²ˆí˜¸</th>
                        <th>ë…„ë„</th>
                        <th>ì›”</th>
                        <th>êµí†µì‚¬ê³ ìˆ˜</th>
                        <th>ì‚¬ë§ì ìˆ˜</th>
                        <th>ë¶€ìƒì ìˆ˜</th>
                    </tr>
                </thead>
                <tbody>
                    {item && item.map((v, i) => {
                        return (
                            <tr key={i}>
                                <td>{v.id}</td>
                                <td>{v.year}</td>
                                <td>{v.month}</td>
                                <td>{v.accident.toLocaleString()}</td>
                                <td>{v.death.toLocaleString()}</td>
                                <td>{v.injury.toLocaleString()}</td>
                            </tr>
                        );
                    })}
                </tbody>
            </Table>
        </TrafficAccTypeBContainer>
    );
});

export default TrafficAccTypeB;
```
- ë‘ë²ˆì§¸ ë°©ë²•ì—ì„œ ë‹¬ë¼ì§„ ì ì€ ì²˜ìŒì—ëŠ” dispatch(getList({}));ë¡œ ì „ì²´ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê³  ì›ë˜ ìˆì—ˆë˜ ìƒíƒœë³€ìˆ˜ì¸ itemì—ì„œ ë“œë¡­ë‹¤ìš´ ë°”ë€”ë•Œ í•´ë‹¹ ì—°ë„ë§Œ ê°€ì ¸ì˜´.
- useEffectê°€ ì•„ë‹ˆë¼ useMemoë¥¼ ì‚¬ìš©í•´ì•¼ ê°’ì„ ë¦¬í„´ë°›ì„ ìˆ˜ ìˆìœ¼ë©° ê°’ì´ ì•ˆë°”ë€Œë©´ ìºì‹±í•´ë‘ì—ˆë˜ ê°’ì„ ì¬ì‚¬ìš©í•¨.
- í•´ë‹¹ ë¶€ë¶„ê¹Œì§€ë§Œ ë‹¤ë¥´ê³  ì•„ë˜ì—ì„œ trafficDataë¥¼ ì§ì ‘ ì“´ë‹¤ëŠ” ê²ƒë§Œ ë‹¤ë¥´ë¯€ë¡œ ì•„ë˜ ë¡œì§ì€ ìƒëµí•œë‹¤.
```js
const TrafficAccTypeB = memo(() => {
    // hookì„ í†µí•´ sliceê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°’ ê°€ì ¸ì˜¤ê¸°
    // --> í™”ë©´ ì¶œë ¥ì— í•„ìš”í•œ í•­ëª©ë§Œ ì„ íƒì ìœ¼ë¡œ êµ¬ì¡°ë¶„í•´ í•œë‹¤.
    const { loading, status, message, item } = useSelector((state) => state.TrafficAccSlice);

    // ê²€ìƒ‰ë…„ë„ : 2005~2018ë…„ ì‚¬ì´ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ
    const [year, setYear] = useState(2018);

    // dispatch í•¨ìˆ˜ ìƒì„±
    const dispatch = useDispatch();

    // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ë©´ ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•œ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë””ìŠ¤íŒ¨ì¹˜ í•¨ -> ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ì‹œì—ë§Œ ì‹¤í–‰ë¨
    useEffect(() => {
        // ì „ë‹¬ë˜ëŠ” payloadê°’ì´ ì—†ìœ¼ë¯€ë¡œ sliceì—ì„œ ì „ì²´ ë°ì´í„°ë¥¼ ìš”ì²­í•œë‹¤.
        dispatch(getList({}));
    }, []);

    // ì„ íƒí•œ ë…„ë„ì— í•´ë‹¹í•˜ëŠ” êµí†µì‚¬ê³  ë°ì´í„°ë§Œ í•„í„°ë§
    // --> useMemoë¥¼ ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
    const trafficData = useMemo(() => {
        if (!item || item.length === 0) return [];
        return item.filter((v) => v.year === year);
    }, [item, year]);
```

# ğŸ“Œ 1. reduxë¡œ crud êµ¬í˜„
### ğŸ“Œ 1-1. reduxHelper í™•ì¥
- reduxHelperì— getDefaultSlice ë©”ì„œë“œ ì•„ë˜ë¡œ (get, post, put, delete)ì²­í¬ë¥¼ ë§Œë“œëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤.
- 
```js
    get: async (alias, url, callback = (payload) => {return {url: url, params: payload}}) => {
        return createAsyncThunk(alias, async (payload, {rejectWithValue}) => {
            let result = null;
            const {url, params} = callback(payload);

            try {
                result = await fetchHelper.get(url, params);
            } catch (err) {
                result = rejectWithValue(err);
            }

            return result;
        })
    },

    post: async (alias, url, callback = (payload) => {return {url: url, params: payload}}) => {
        return createAsyncThunk(alias, async (payload, {rejectWithValue}) => {
            let result = null;
            const {url, params} = callback(payload);

            try {
                result = await fetchHelper.post(url, params);
            } catch (err) {
                result = rejectWithValue(err);
            }

            return result;
        })
    },

    put: async (alias, url, callback = (payload) => {return {url: url, params: payload}}) => {
        return createAsyncThunk(alias, async (payload, {rejectWithValue}) => {
            let result = null;
            const {url, params} = callback(payload);

            try {
                result = await fetchHelper.put(url, params);
            } catch (err) {
                result = rejectWithValue(err);
            }

            return result;
        })
    },

    delete: async (alias, url, callback = (payload) => {return {url: url, params: payload}}) => {
        return createAsyncThunk(alias, async (payload, {rejectWithValue}) => {
            let result = null;
            const {url, params} = callback(payload);

            try {
                result = await fetchHelper.delete(url, params);
            } catch (err) {
                result = rejectWithValue(err);
            }

            return result;
        })
    },
```
- ì²­í¬ë“¤ì„ ìœ„ ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“¤ì–´ë‘ê³  í•´ë‹¹ ì²­í¬ê°€ ì‘ë™í• ë•Œ ì‹¤í–‰í•  ë¦¬ë“€ì„œë“¤ì„ ê°™ì€ ìƒíƒœ ë‚´ì—ì„œ í•œë²ˆì— ìƒì„±í•œë‹¤.
- ì´ ë¦¬ë“€ì„œë“¤ì˜ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ ìŠ¬ë¼ì´ìŠ¤ê°€ ëœë‹¤. ì´ ìŠ¬ë¼ì´ìŠ¤ ë‚´ë¶€ì˜ ë¦¬ë“€ì„œë“¤ì„ ì½”ë“œì—ì„œ ê°€ì ¸ì™€ì„œ ì–¼ë§ˆë“ ì§€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœë‹¤.
```js
import { createAsyncThunk } from '@reduxjs/toolkit';
import fetchHelper from '../helpers/FetchHelper';
import reduxHelper from '../helpers/ReduxHelper';

const API_URL = '/professors';

export const getList = await reduxHelper.get("ProfessorSlice/getList", API_URL);
export const getItem = await reduxHelper.get("ProfessorSlice/getItem", API_URL);
export const postItem = await reduxHelper.post("ProfessorSlice/postItem", API_URL);
export const putItem = await reduxHelper.put("ProfessorSlice/putItem", API_URL);
export const deleteItem = await reduxHelper.delete("ProfessorSlice/deleteItem", API_URL);

const ProfessorSlice = reduxHelper.getDefaultSlice("ProfessorSlice", [getList, getItem, postItem, putItem, deleteItem]);

export default ProfessorSlice.reducer;
```

### ğŸ“Œ1-2. ë°±ì—”ë“œì—ì„œ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
- `const { loading, status, message, item } = useSelector((state) => state.ProfessorSlice);` ì´ë ‡ê²Œ ìƒíƒœê°’ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.
- ê·¸ë¦¬ê³  useDispatch()ë¥¼ í†µí•´ í˜„ì¬ contextì— ë§ëŠ” ì•¡ì…˜ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡í•˜ëŠ” dispatchí•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¨ë‹¤. (ì—°ê²°, í›„ì²˜ë¦¬ í•´ì¤Œ)
- const [name, setName] = React.useState("");ë¡œ ì´ë¦„ ìƒíƒœê°’ì„ ì§€ì •í•˜ê³  ì´ë¦„ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ dispatch(getList({ name }));ë¥¼ í˜¸ì¶œí•˜ì—¬ ajaxë¥¼ ì‹¤í–‰, ê·¸ë¦¬ê³  ì²­í¬ ì‹¤í–‰ì— ì‡ë‹¤ë¥¸ ë¦¬ë“€ì„œë“¤ì„ ìë™ì‹¤í–‰í•˜ì—¬ ajaxì˜ ì‘ë‹µì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤.
- ì´ë•Œ ë°›ì•„ì˜¨ ê°’ì„ ë‚´ë¶€ ìƒíƒœì— item: null;ì— ì €ì¥í•˜ê²Œ ëœë‹¤. ì¦‰ ë°›ì•„ì™€ì„œ ìƒíƒœê°€ ë³€í•˜ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ê·¸ ìƒíƒœê°’ì— ì—°ê²°ëœ ì „ì—­ê°ì²´ë“¤ì„ useSelectorë¡œ ê°€ì ¸ì™€ë’€ìœ¼ë¯€ë¡œ ì—¬ê¸°ì„œ ê°’ì„ í•¸ë“¤ë§í•˜ë©´ ëœë‹¤.
- `<tr key={i}>` ì´ë ‡ê²Œ mapìœ¼ë¡œ ë°˜ë³µëŒë©´ì„œ í…Œì´ë¸”ì— ë¦¬ìŠ¤íŠ¸ë¥¼ ëœë”ë§í• ë•ŒëŠ” trê°’ì— ê³ ìœ ê°’ì„ ë¶™ì—¬ì£¼ì–´ì•¼í•œë‹¤.
- ê·¸ë¦¬ê³  name ìƒíƒœë³€ìˆ˜ëŠ” í¼ì´ ì œì¶œë ë•Œ ê²€ìƒ‰ë˜ì–´ìˆë˜ êµìˆ˜ì´ë¦„ìœ¼ë¡œ ê°±ì‹ í•œë‹¤.
- if (Array.isArray(item) && item.length > 0)ë¥¼ í†µí•´ ë§Œì•½ itemì´ ìˆë‹¤ë©´ dispatch ìì²´ë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. -> ìƒˆë¡œê³ ì¹¨í•´ë„ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì•ˆë°›ì•„ì˜´
```js
const List = memo(() => {
    // ë¦¬ë•ìŠ¤ ìƒíƒœê°’ì„ ê°€ì ¸ì˜¤ê¸°
    const { loading, status, message, item } = useSelector((state) => state.ProfessorSlice);

    // ë¦¬ë•ìŠ¤ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê¸°
    const dispatch = useDispatch();

    // êµìˆ˜ ì´ë¦„ ê²€ìƒ‰ì–´ë¥¼ ìœ„í•œ ìƒíƒœê°’
    const [name, setName] = React.useState("");

    useEffect(() => {
        if (Array.isArray(item) && item.length > 0) {
            return;
        }
        dispatch(getList({ name }));
    }, [name]);

    const hidingErrorImg = (e) => {
        e.target.onerror = null;
        e.target.style.display = "none";
    };

    return (
        <ListContainer>
            <Spinner loading={loading} />
            <ErrorView status={status} message={message} />

            <form className="search-form" onSubmit={(e) => {
                e.preventDefault();
                setName(e.target.name.value);
            }}>
                <input type="search" name="name" placeholder="êµìˆ˜ì´ë¦„ ê²€ìƒ‰..." />
                <Buttons>
                    <button type="submit">ê²€ìƒ‰</button>
                    <Link to="/add">êµìˆ˜ì¶”ê°€</Link>
                </Buttons>
            </form>

            <Table>
                <thead>
                    <tr>
                        <th></th>
                        <th>ë²ˆí˜¸</th>
                        <th>ì´ë¦„</th>
                        <th>ì•„ì´ë””</th>
                        <th>ì§ê¸‰</th>
                        <th>ì…ì‚¬ì¼</th>
                        <th>ê¸‰ì—¬</th>
                        <th>ë³´ë„ˆìŠ¤</th>
                        <th>ì´ë©”ì¼</th>
                        <th>ì—°ë½ì²˜</th>
                        <th>ìƒíƒœ</th>
                        <th>ì†Œì†í•™ê³¼</th>
                    </tr>
                </thead>
                <tbody>
                    {item && item.map((v, i) => {
                        return (
                            <tr key={i}>
                                <td>
                                    <img src={v.photo_url} onError={hidingErrorImg} />
                                </td>
                                <td>{v.id}</td>
                                <td>
                                    <Link to={`/view/${v.id}`}>{v.name}</Link>
                                </td>
                                <td>{v.user_id}</td>
                                <td>{v.position}</td>
                                <td>{dayjs(v.hiredate).format("YYYY-MM-DD")}</td>
                                <td>{v.sal?.toLocaleString()}</td>
                                <td>{v.comm?.toLocaleString()}</td>
                                <td>{v.email && <a href={`mailto:${v.email}`}>{v.email}</a>}</td>
                                <td>{v.phone && <a href={`tel:${v.phone}`}>{v.phone}</a>}</td>
                                <td>{v.status}</td>
                                <td>{v.department_id}</td>
                            </tr>
                        );
                    })}
                </tbody>
            </Table>
        </ListContainer>
    );
});

export default List;
```

### ğŸ“Œ1-3. ì‚­ì œ/ ìˆ˜ì • ì‹œì— ì‚¬ìš©í•  ìŠ¬ë¼ì´ìŠ¤ ìˆ˜ì •
- ì‚­ì œìš”ì²­ì„ ë³´ë‚¸ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë„ìš¸ë•Œ í˜ì´ì§€ê°€ í•œë²ˆì€ ì±„ì›Œì ¸ìˆì–´ì•¼í•˜ë¯€ë¡œ ìƒíƒœìš”ì²­ì—ì„œì˜ fulfilled í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì—¬ í˜„ì¬ ìƒíƒœì—ì„œ ë‚´ê°€ ì‚­ì œí•œ ëª©ë¡ë“¤ì„ ëº€ ëª©ë¡ìœ¼ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ë„ë¡ í•´ì•¼í•œë‹¤.
- ì™œëƒí•˜ë©´ ì‚­ì œìš”ì²­ì€ ë°±ì—”ë“œì—ì„œ ëª©ë¡ì„ ë¦¬í„´í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë°›ì•„ì˜¨ ê°’ìœ¼ë¡œ ì—ì–´ì¹˜ë©´ itemì´ nullì´ëœë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì‚­ì œì‹œì—ë§Œ fulfilledê°€ ì‹¤í–‰ë ë•Œ ìƒíƒœë¥¼ ë”°ë¡œ ì„¤ì •í•´ì„œ ë„£ë„ë¡ ìˆ˜ì •í•´ì£¼ì–´ì•¼í•œë‹¤.
- ìš°ì„  ìœ„ì—ì„œ .addCase(v.fulfilled, callback[v.fulfilled] || fulfilled) ì´ë ‡ê²Œ ì—‘ìŠ¤íŠ¸ë¼ ë¦¬ë“€ì„œë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ ì‚­ì œ 3ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ callback í•¨ìˆ˜ë¥¼ ë„£ì–´ ì‚­ì œ ë¶€ë¶„ë§Œ callback[v.fulfilled]ì´ê²Œ ì¡´ì¬í•˜ë„ë¡ í•˜ì—¬ ì´ë¥¼ ì‹¤í–‰í•˜ê²Œ í•œë‹¤.
- ì´ë•Œ v.fulfilledëŠ” ì‹¤ì œë¡œ "ProfessorSlice/deleteItem/fulfilled" ì´ë ‡ê²Œ ì„¤ì •í•´ë‘” ì•¡ì…˜íƒ€ì…ë¬¸ìì—´ì´ ë“¤ì–´ê°€ë¯€ë¡œ [deleteItem.fulfilled] ì—¬ê¸°ë„ ì´ë ‡ê²Œ ì •ì˜í•˜ì—¬ "ProfessorSlice/deleteItem/fulfilled": (state, action) => { ... } ì´ë ‡ê²Œ ë¦¬ë“€ì„œí•¨ìˆ˜ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ í•´ë‘ì–´ì•¼í•œë‹¤. ì¦‰ ëŒ€ê´„í˜¸ë¥¼ ì“°ëŠ” ê²ƒì€ ì•¡ì…˜ íƒ€ì…ì„ ê°ì²´ì˜ keyë¡œ ì“¸ ìˆ˜ ìˆê²Œ ê³„ì‚°ëœ ì†ì„±ëª…ìœ¼ë¡œ ë„£ëŠ” ê²ƒì´ë‹¤.
- ë‚´ê°€ ìš”ì²­ ë³´ë‚¼ ë•Œ ë³´ëƒˆë˜ idì™€ meta.argê°€ ì¼ì¹˜í•œë‹¤.
- Redux Toolkitì˜ createAsyncThunkë¡œ ë¹„ë™ê¸° ì•¡ì…˜ì„ ë§Œë“¤ ë•Œ dispatchë¡œ ë„˜ê¸´ ì²« ë²ˆì§¸ ì¸ì(id ë“±)ê°€ meta.argì— ìë™ ì €ì¥ëœë‹¤.
- ë¹„ë™ê¸° ì‘ì—… ì¤‘ì— ìš”ì²­ ì‹œì ì˜ "ì›ë³¸ ì¸ì"ë¥¼ ì¶”ì í•´ì•¼ í•  ë•Œê°€ ë§ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ë„£ì–´ë‘ì—ˆë‹¤.
```js
const ProfessorSlice = reduxHelper.getDefaultSlice("ProfessorSlice", [getList, getItem, postItem, putItem, deleteItem], {
    [deleteItem.fulfilled]: (state, {meta, payload}) => {
        const id = meta.arg;

        return {
            ...state,
            loading: false,
            item: state.item.filter(item => item.id !== id)
        };
    }
});
```
- ì—¬ê¸°ì„œ ì‚­ì œë‚˜ ìˆ˜ì •ì€ íŒŒë¼ë¯¸í„°ë¥¼ bodyì— ë„£ëŠ” ì‹ìœ¼ë¡œëŠ” ì˜ í•˜ì§€ ì•Šê³  ê´€ë¡€ì— ì–´ê¸‹ë‚˜ê¸° ë•Œë¬¸ì— bodyì— ë„£ì„ paramsëŠ” ë¹„ì›Œë‘ê³  ìš”ì²­í•  url ìì²´ë¥¼ path íŒŒë¼ë¯¸í„°ë¡œ ë§Œë“¤ì–´ì„œ ë³´ë‚¸ë‹¤.
- fetchHelperë‚´ì—ì„œ getìš”ì²­ë§Œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ í•©ì¹˜ê³  ë‚˜ë¨¸ì§€ ìš”ì²­ì€ ì „ë¶€ bodyì— ë„£ì–´ì„œ ë³´ë‚´ê²Œ ë˜ì–´ìˆìŒ.
```js
export const putItem = await reduxHelper.put("ProfessorSlice/putItem", API_URL, (payload) => {
    const {id, ...data} = payload;
    return {
        url: id ? `${API_URL}/${id}` : API_URL,
        params: data
    }
});

export const deleteItem = await reduxHelper.delete("ProfessorSlice/deleteItem", API_URL, (id) => {
    return {
        url: `${API_URL}/${id}`,
        params: {}
    }
});
```

### ğŸ“Œ1-4. view
- await dispatch(deleteItem(professorItem?.id));ì—ì„œ ?ì€ ì˜µì…”ë„ ì²´ì´ë‹ìœ¼ë¡œ professorItemì´ nullì´ë‚˜ undefinedì¼ ë•Œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ .idì— "ì•ˆì „í•˜ê²Œ" ì ‘ê·¼í•˜ê¸° ìœ„í•´ ?ë¥¼ ì“´ ê²ƒì´ë‹¤
```js
const ProfessorView = memo(() => {
    // Path íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
    const { id } = useParams();

    // í˜ì´ì§€ ì´ë™ì„ ìœ„í•œ navigate í•¨ìˆ˜ ê°€ì ¸ì˜¤ê¸°
    const navigate = useNavigate();

    // ë¦¬ë•ìŠ¤ ìƒíƒœê°’ì„ ê°€ì ¸ì˜¤ê¸°
    const { loading, status, message, item } = useSelector((state) => state.ProfessorSlice);

    // ë¦¬ë•ìŠ¤ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ê°€ì ¸ì˜¤ê¸°
    const dispatch = useDispatch();

    // ë¦¬ë•ìŠ¤ ìƒíƒœê°’ê³¼ idê°’ì´ í™•ì¸ë˜ë©´ í•„ìš”í•œ ë°ì´í„° ì¶”ì¶œ
    const professorItem = useMemo(() => {
        if (!id || !item || Object.keys(item).length === 0) return null;
        return item.find((v) => v.id === parseInt(id));
    }, [item, id]);

    return (
        <ProfessorViewContainer>
            <Spinner loading={loading} />
            <ErrorView status={status} message={message} />

            <TableView>
                <tbody>
                    <tr>
                        <th>ë²ˆí˜¸</th>
                        <td>{professorItem?.id}</td>
                    </tr>
                    <tr>
                        <th>ì´ë¦„</th>
                        <td>{professorItem?.name}</td>
                    </tr>
                    <tr>
                        <th>ì•„ì´ë””</th>
                        <td>{professorItem?.user_id}</td>
                    </tr>
                    <tr>
                        <th>ì§ê¸‰</th>
                        <td>{professorItem?.position}</td>
                    </tr>
                    <tr>
                        <th>ì…ì‚¬ì¼</th>
                        <td>{dayjs(professorItem?.hireDate).format("YYYY-MM-DD")}</td>
                    </tr>
                    <tr>
                        <th>ê¸‰ì—¬(ë§Œì›)</th>
                        <td>{professorItem?.sal?.toLocaleString()} ë§Œì›</td>
                    </tr>
                    <tr>
                        <th>ë³´ë„ˆìŠ¤(ë§Œì›)</th>
                        <td>{professorItem?.comm?.toLocaleString()} ë§Œì›</td>
                    </tr>
                    <tr>
                        <th>ì´ë©”ì¼</th>
                        <td>{professorItem?.email && (<a href={`mailto:${professorItem.email}`}>{professorItem.email}</a>)}</td>
                    </tr>
                    <tr>
                        <th>ì—°ë½ì²˜</th>
                        <td>{professorItem?.phone && (<a href={`tel:${professorItem.phone}`}>{professorItem.phone}</a>)}</td>
                    </tr>
                    <tr>
                        <th>ìƒíƒœ</th>
                        <td>{professorItem?.status}</td>
                    </tr>
                    <tr>
                        <th>ì†Œì†í•™ê³¼</th>
                        <td>{professorItem?.department_id}</td>
                    </tr>
                </tbody>
            </TableView>

            <Buttons>
                <Link to="/">ëª©ë¡ë³´ê¸°</Link>
                <Link to="/add">êµìˆ˜ì¶”ê°€</Link>
                <Link to={`/edit/${professorItem?.id}`}>ìˆ˜ì •í•˜ê¸°</Link>
                <a
                    href="#"
                    onClick={async (e) => {
                        e.preventDefault();
                        if (window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                            // ì…ë ¥, ì‚­ì œ, ìˆ˜ì •ì‹œ ë¹„ë™ê¸°ë¡œ í˜¸ì¶œí•´ì•¼ í•¨
                            await dispatch(deleteItem(professorItem?.id));
                            // ì‚­ì œ í›„ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™
                            alert("êµìˆ˜ ì •ë³´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                            navigate("/");
                        }
                    }}
                >
                    ì‚­ì œí•˜ê¸°
                </a>
            </Buttons>
        </ProfessorViewContainer>
    );
});

export default ProfessorView;
```

### ğŸ“Œ1-5. ìŠ¬ë¼ì´ìŠ¤ ë“±ë¡ì— ìˆ˜ì • postItem.fulfilled ìˆ˜ì •
- ìˆ˜ì • ì‚¬í•­ì„ ìƒíƒœì— ë°˜ì˜í•˜ê¸° ìœ„í•´ ìˆ˜ì • ì´í›„ ë°±ì—”ë“œê°€ ëŒë ¤ì¤€ ì¶”ê°€ëœ ê°’ì„ itemì— ë„£ì–´ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.
```js
const ProfessorSlice = reduxHelper.getDefaultSlice("ProfessorSlice", [getList, getItem, postItem, putItem, deleteItem], {
    [postItem.fulfilled]: (state, {meta, payload}) => {
        return {
            ...state,
            loading: false,
            item: [...state.item, payload.item]
        };
    },
    [deleteItem.fulfilled]: (state, {meta, payload}) => {
        const id = meta.arg;

        return {
            ...state,
            loading: false,
            item: state.item.filter(item => item.id !== id)
        };
    }
});
```

### ğŸ“Œ1-6. add í˜ì´ì§€ êµ¬í˜„
`<form onSubmit={onHandleSubmit}>` í¼ì— submit ì´ë²¤íŠ¸ë¡œ í™”ë©´ì— ìˆëŠ” ì •ë³´ë¥¼ ê¸ì–´ì„œ fetchHelperë¥¼ í†µí•´ bodyì— ë‹´ì•„ ë³´ë‚´ë©´ ë°±ì—”ë“œëŠ” ê·¸ê²ƒì„ ë°›ì•„ì„œ ì—…ë°ì´íŠ¸ í•œ í›„ì— ì¶”ê°€í•œ ì •ë³´ë¥¼ ë‹¤ì‹œ ëŒë ¤ì¤€ë‹¤. ê·¸ëŸ¬ë©´ ë¦¬ë“€ì„œê°€ fulfilled ìƒíƒœê°€ ë˜ë©´ì„œ ì•¡ì…˜í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ëŒë ¤ë°›ì€ ì¶”ê°€ì •ë³´ë¡œ ìƒíƒœë¥¼ ë‹¤ì‹œ ì—…ë°ì´íŠ¸í•œë‹¤. í˜ì´ì§€ê°€ ë‹¤ì‹œ ë¡œë“œë˜ë©´ ê·¸ ì—…ë°ì´íŠ¸ëœ ìƒíƒœê°’ì„ ê°€ì ¸ì™€ì„œ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ì±„ì›Œë‘”ë‹¤.
- [dispatch, navigate]: ì´ í•¨ìˆ˜ë“¤ì€ ì‹¤ì œë¡œëŠ” ë¦¬ì•¡íŠ¸ í›…(useDispatch, useNavigate)ì—ì„œ ë°˜í™˜ë˜ëŠ” ê°’ì´ê¸° ë•Œë¬¸ì—, "ì°¸ì¡°ê°€ ë³€í•  ìˆ˜ë„ ìˆë‹¤"ê³  ê°„ì£¼í•œë‹¤. í•˜ì—¬ useCallbackì˜ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•œë‹¤. ì—¬ëŸ¬ ë³€ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—
- useCallback, useEffect, useMemoì˜ ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” ì½œë°± ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” "ëª¨ë“  ì™¸ë¶€ ë³€ìˆ˜/í•¨ìˆ˜"ë¥¼ ë°˜ë“œì‹œ ë„£ëŠ”ë‹¤! ë¼ëŠ” ê´€ë¡€ê°€ ìˆë‹¤.
```js
const ProfessorAdd = memo(() => {
    const { loading, status, message } = useSelector((state) => state.ProfessorSlice);
    const navigate = useNavigate();
    const dispatch = useDispatch();

    const onHandleSubmit = useCallback((e) => {
        e.preventDefault();
        const formData = new FormData(e.target);

        (async () => {
            try {
                await dispatch(postItem(formData));
            } catch (err) {
                console.error("Error adding professor:", err);
                alert("êµìˆ˜ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                return;
            }

            navigate("/");
        })();
    }, [dispatch, navigate]);

    return (
        <ProfessorAddContainer>
            <Spinner loading={loading} />
            <ErrorView status={status} message={message} />
            <form onSubmit={onHandleSubmit}>
                <TableInput>
                    <tbody>
                        <tr>
                            <th>êµìˆ˜ì´ë¦„</th>
                            <td>
                                <input type="text" name="name" placeholder="êµìˆ˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ì•„ì´ë””</th>
                            <td>
                                <input type="text" name="user_id" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ì§ê¸‰</th>
                            <td>
                                <select name="position">
                                    <option value="êµìˆ˜">êµìˆ˜</option>
                                    <option value="ë¶€êµìˆ˜">ë¶€êµìˆ˜</option>
                                    <option value="ì¡°êµìˆ˜">ì¡°êµìˆ˜</option>
                                    <option value="ê°•ì‚¬">ê°•ì‚¬</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>ì…ì‚¬ì¼</th>
                            <td>
                                <input type="date" name="hiredate" placeholder="ì…ì‚¬ì¼ì„ ì„ íƒí•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ê¸‰ì—¬(ë§Œì›)</th>
                            <td>
                                <input type="number" name="sal" placeholder="ê¸‰ì—¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ë³´ì§ìˆ˜ë‹¹(ë§Œì›)</th>
                            <td>
                                <input type="number" name="comm" placeholder="ë³´ì§ìˆ˜ë‹¹ì„ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ì´ë©”ì¼</th>
                            <td>
                                <input type="email" name="email" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ì—°ë½ì²˜</th>
                            <td>
                                <input type="tel" name="phone" placeholder="ì—°ë½ì²˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                            </td>
                        </tr>
                        <tr>
                            <th>ìƒíƒœ</th>
                            <td>
                                <select name="status">
                                    <option value="ì¬ì§">ì¬ì§</option>
                                    <option value="íœ´ì§">íœ´ì§</option>
                                    <option value="í‡´ì§">í‡´ì§</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>ì†Œì†í•™ê³¼</th>
                            <td>
                                <select name="department_id">
                                    <option value="101">ì»´í“¨í„°ê³µí•™ê³¼</option>
                                    <option value="102">ì „ìê³µí•™ê³¼</option>
                                    <option value="103">ê¸°ê³„ê³µí•™ê³¼</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </TableInput>
                <Buttons>
                    <button type="submit">ì¶”ê°€</button>
                    <Link to="/">ì·¨ì†Œ</Link>
                </Buttons>
            </form>
        </ProfessorAddContainer>
    );
});

export default ProfessorAdd;
```