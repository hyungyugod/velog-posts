# ğŸ“Œ 1. ìŠ¤ë‹ˆí«(Snippet)
- ì½”ë“œ ì¡°ê°ì„ ë¯¸ë¦¬ ì •ì˜í•´ ë‘ê³ , ë‹¨ì¶•ì–´ë¥¼ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ì™„ì„±ë˜ëŠ” ê¸°ëŠ¥
- vsì½”ë“œ ì½”ë“œ ì¡°ê°ì— (java.jason)ì»¤ìŠ¤í…€ ì„¤ì •ê°€ëŠ¥
- $1 = ê±°ê¸°ì„œ ì»¤ì„œ ê¹œë¹¡ê¹œë¹¡
- ${TM_FILENAME_BASE} : ê±°ê¸°ì„œ íŒŒì¼ì´ë¦„ì„ ë„£ì–´ì¤Œ
- ${} ì•ˆì— ì •ê·œ í‘œí˜„ì‹ ì‚¬ìš© ê°€ëŠ¥
- prefix: ë‹¨ì¶•ì–´ì´ë‹¤. ì›ë˜ ì ‘ë‘ì‚¬ì¸ë° **â€œì•ì— ì…ë ¥í•˜ëŠ” í‚¤ì›Œë“œâ€**ë¡œ ìŠ¤ë‹ˆí«ì„ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— ì´ë¦„ì„ ì´ë ‡ê²Œ ë¶™ì˜€ë‹¤.
### ğŸ“Œ 1-1. model í´ë˜ìŠ¤ ìë™ ìƒì„± (my_model)
- $1, $2, $3... ì€ ìŠ¤ë‹ˆí« ì»¤ì„œ í¬ì»¤ìŠ¤ ìˆœì„œë¥¼ ì •í•˜ëŠ” ë²ˆí˜¸ì´ë‹¤.
- regDate: ë°ì´í„°ê°€ ì²˜ìŒ ìƒì„±ëœ ë‚ ì§œ: DB í…Œì´ë¸”ê³¼ ì—°ê²°ë˜ëŠ” ëª¨ë¸ í´ë˜ìŠ¤ì—ì„œ ê¸°ë¡ì˜ ìƒì„±/ìˆ˜ì • ì‹œì ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ìì£¼ ì‚¬ìš©
- editDate: ë°ì´í„°ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ìˆ˜ì •ëœ ë‚ ì§œ: DB í…Œì´ë¸”ê³¼ ì—°ê²°ë˜ëŠ” ëª¨ë¸ í´ë˜ìŠ¤ì—ì„œ ê¸°ë¡ì˜ ìƒì„±/ìˆ˜ì • ì‹œì ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ìì£¼ ì‚¬ìš©
- listCount: ì „ì²´ ë°ì´í„° ê°œìˆ˜
- offset: ì‹œì‘ ìœ„ì¹˜: ëª‡ë²ˆì§¸ë¶€í„° ë³´ì—¬ì¤„ì§€: í˜ì´ì§•(í˜ì´ì§€ ê°œìˆ˜ ë§¤ê¹€)í• ë•Œ ì‚¬ìš©
- "package ${1:kr.hyungyu}.mappers;" ë¡œ ê¸°ë³¸ê°’ì„ ìˆ˜ì •í•˜ì˜€ë‹¤.
```json
"Model class initialize": {
        "prefix": "my_model",
        "body": [
            "package $1.models;",
            "",
            "import lombok.Data;",
            "import lombok.Getter;",
            "import lombok.Setter;",
            "",
            "@Data",
            "public class ${TM_FILENAME_BASE} {",
            "    private int id;",
            "    ",
            "    // TODO : Add more fields",
            "    $2",
            "",
            "    private String regDate;",
            "    private String editDate;",
            "",
            "    @Getter",
            "    @Setter",
            "    private static int listCount = 0;",
            "",
            "    @Getter",
            "    @Setter",
            "    private static int offset = 0;",
            "}"
        ],
        "description": "ëª¨ë¸ í´ë˜ìŠ¤ ê¸°ë³¸ êµ¬ì„±"
    },
```

### ğŸ“Œ 1-2. mapper ì¸í„°í˜ì´ìŠ¤ ìë™ ìƒì„± (my_mapper)
- ${1:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}: ìŠ¤ë‹ˆí« ì»¤ì„œì˜ ì²« ë²ˆì§¸ ìœ„ì¹˜ ($1), ì‚¬ìš©ìê°€ ì§ì ‘ íŒ¨í‚¤ì§€ ì´ë¦„ì„ ì…ë ¥í•˜ê²Œ ë§Œë“¤ê³ , ê¸°ë³¸ ì œì•ˆê°’ì€ í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„ì´ë‹¤.
- ìŠ¬ë˜ì‹œ(/)ëŠ” ì •ê·œì‹ì„ ê°ì‹¸ëŠ” êµ¬ë¶„ì
- |: "ë˜ëŠ”" (OR)ì˜ ì˜ë¯¸ì•¼.
- (...): ê´„í˜¸ëŠ” **ê·¸ë£¹(group)**ì„ ë§Œë“ ë‹¤ëŠ” ëœ»ì´ë‹¤.
- (?<=[a-z0-9])([A-Z]): (?<=...)ëŠ” ì•ì— ìˆëŠ” ë¬¸ìê°€ ì´ëŸ° ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ë‹¤. 
- ${n:/downcase}: 	në²ˆì§¸ ê·¸ë£¹ â†’ ì†Œë¬¸ìë¡œ
- ${n}: në²ˆì§¸ ê·¸ë£¹ ì°¸ì¡°
- ${n:+_}: në²ˆì§¸ ê·¸ë£¹ì´ ì¡´ì¬í•˜ë©´ _ ì¶”ê°€
- (Mapper): mapperë¼ëŠ” ê¸€ìë¥¼ ì˜ë¯¸
- (^[A-Z]): í´ë˜ìŠ¤ ì´ë¦„ì˜ ì²« ê¸€ì (ëŒ€ë¬¸ì), ^ê°€ ê´„í˜¸ ë°–ì— ìˆìœ¼ë¯€ë¡œ ì²«ë²ˆì§¸ ê¸€ìë¼ëŠ” ëœ»ì´ë‹¤.
- :/downcase: ì²« ê¸€ì ì†Œë¬¸ìë¡œ
- ${3:+_}${3:/downcase}: ì¤‘ê°„ ëŒ€ë¬¸ì ì•ì— _ ë¶™ì´ê³  ì†Œë¬¸ìë¡œ ë³€í™˜
- g: ë¬¸ìì—´ ì „ì²´ì—ì„œ ì¼ì¹˜í•˜ëŠ” ëª¨ë“  ë¶€ë¶„ ë³€í™˜

- (Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z]): mapperê°€ ë¶™ê±°ë‚˜ ëŒ€ë¬¸ìì´ê±°ë‚˜ ëŒ€ë¬¸ì ì•ì— ì†Œë¬¸ìë‚˜ ìˆ«ìê°€ ì˜¤ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•˜ë©´ ì•ì—ì„œ ë¶€í„° íƒì§€í•˜ì—¬ í•˜ë‚˜ë¼ë„ ë°œê²¬ë˜ë©´ íƒì§€ ë˜ì—ˆë‹¤ê³  íŒë‹¨í•œë‹¤.
- /${2:/downcase}${3:+_}${3:/downcase}/ : ìœ„ì˜ ì‹ì—ì„œ ì´ˆë°˜ì´ ëŒ€ë¬¸ìì´ë©´ ì†Œë¬¸ìë¡œ ë°”ê¾¸ê³  3ë²ˆì§¸ ê²½ìš°ê°€ ìˆìœ¼ë©´ _ë¥¼ ë¶™ì¸ë‹¤ìŒì— ëŒ€ìƒì„ ì†Œë¬¸ìë¡œ ë°”ê¾¼ë‹¤.
```json
    "MyBatis Mapper Generator": {
        "prefix": "my_mapper",
        "body": [
            "package ${1:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}.mappers;",
            "",
            "import java.util.List;",
            "",
            "import org.apache.ibatis.annotations.Delete;",
            "import org.apache.ibatis.annotations.Insert;",
            "import org.apache.ibatis.annotations.Mapper;",
            "import org.apache.ibatis.annotations.Options;",
            "import org.apache.ibatis.annotations.Result;",
            "import org.apache.ibatis.annotations.ResultMap;",
            "import org.apache.ibatis.annotations.Results;",
            "import org.apache.ibatis.annotations.Select;",
            "import org.apache.ibatis.annotations.Update;",
            "",
            "import ${1:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}.models.${TM_FILENAME_BASE/(Mapper)//};",
            "",
            "@Mapper",
            "public interface ${TM_FILENAME_BASE} {",
            "    @Insert(\"INSERT INTO ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g} (\" +",
            "           \"    âœ…âœ…âœ…    \" +",
            "           \") VALUES (\" +",
            "           \"    âœ…âœ…âœ…    \" +",
            "           \")\")",
            "    @Options(useGeneratedKeys = true, keyProperty = \"âœ…\", keyColumn = \"âœ…\")",
            "    public int insert(${TM_FILENAME_BASE/(Mapper)//} input);",
            "",
            "    @Update(\"UPDATE ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g} SET \" +",
            "           \"    âœ…âœ…âœ…    \" +",
            "           \"WHERE âœ…âœ…âœ…\")",
            "    public int update(${TM_FILENAME_BASE/(Mapper)//} input);",
            "",
            "    @Delete(\"DELETE FROM ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g} WHERE âœ…âœ…âœ…\")",
            "    public int delete(${TM_FILENAME_BASE/(Mapper)//} input);",
            "",
            "    @Select(\"SELECT * FROM ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g} \" +",
            "           \"WHERE âœ…âœ…âœ…\")",
            "    @Results(id=\"resultMap\", value={",
            "        @Result(property=\"âœ…\", column=\"âœ…\"),",
            "        @Result(property=\"âœ…\", column=\"âœ…\"),",
            "        @Result(property=\"âœ…\", column=\"âœ…\")",
            "    })",
            "    public ${TM_FILENAME_BASE/(Mapper)//} selectOne(${TM_FILENAME_BASE/(Mapper)//} input);",
            "",
            "    @Select(\"<script>\"+",
            "           \"SELECT âœ…âœ…âœ… FROM ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g}\" +",
            "           \"<where>\" +",
            "           \"    <if test=\\\"âœ… != null and âœ… != ''\\\">...</if>\" +",
            "           \"</where>\" +",
            "           \"</script>\")",
            "    @ResultMap(\"resultMap\")",
            "    public List<${TM_FILENAME_BASE/(Mapper)//}> selectList(${TM_FILENAME_BASE/(Mapper)//} input);",
            "",
            "    @Select(\"<script>\" +",
            "           \"SELECT COUNT(*) FROM ${TM_FILENAME_BASE/(Mapper)|(^[A-Z])|(?<=[a-z0-9])([A-Z])/${2:/downcase}${3:+_}${3:/downcase}/g}\" +",
            "           \"<where>\" +",
            "           \"    <if test=\\\"âœ… != null and âœ… != ''\\\">...</if>\" +",
            "           \"</where>\" +",
            "           \"</script>\")",
            "    public int selectCount(${TM_FILENAME_BASE/(Mapper)//} input);",
            "}",
            ""
        ],
        "description": "MyBatis Mapper Generator"
    },
```

### ğŸ“Œ 1-3. serviceì¸µ ì¸í„°í˜ì´ìŠ¤ ìë™ìƒì„±
- ${TM_FILENAME_BASE/ì°¾ì„_íŒ¨í„´/ì¹˜í™˜í• _ë‚´ìš©/}: ì •ê·œì‹ ì¹˜í™˜íŒ¨í„´
- ${TM_FILENAME_BASE/(Service)//}: íŒŒì¼ ë„¤ì„ì—ì„œ baseë§Œ ë‘ê³  serviceë¥¼ ê³µë°±ìœ¼ë¡œ ì¹˜í™˜í•˜ë¼ëŠ” ëœ»
```json
    "Service Layer Generator": {
        "prefix": "my_service",
        "body": [
            "package ${1:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}.services;",
            "",
            "import java.util.List;",
            "",
            "import ${1:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}.models.${TM_FILENAME_BASE/(Service)//};",
            "",
            "public interface ${TM_FILENAME_BASE} {",
            "    public List<${TM_FILENAME_BASE/(Service)//}> getList(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "",
            "    public ${TM_FILENAME_BASE/(Service)//} getItem(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "",
            "    public ${TM_FILENAME_BASE/(Service)//} addItem(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "",
            "    public ${TM_FILENAME_BASE/(Service)//} editItem(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "",
            "    public int deleteItem(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "",
            "    public int getCount(${TM_FILENAME_BASE/(Service)//} params) throws Exception;",
            "}",
            ""
        ],
        "description": "Service Layer Generator",
    },
```

### ğŸ“Œ 1-4. serviceì¸µ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ ìë™ìƒì„±
- /^(.*)ServiceImpl$/: "UserServiceImpl"ì´ë¼ëŠ” ë¬¸ìì—´ì—ì„œ ì•ë¶€ë¶„ "User"ë¥¼ ì¡ì•„ì„œ ê·¸ë£¹ 1ë¡œ ë¶„ë¦¬
- ^: ë¬¸ìì—´ ì‹œì‘
- (.*):	ì „ì²´ ë¬¸ìì—´ ì¤‘ì—ì„œ ì•„ë¬´ ë¬¸ìë“  0ê°œ ì´ìƒ â†’ ê·¸ë£¹ 1
- ServiceImpl: ì •í™•íˆ ì´ ê¸€ìì™€ ì¼ì¹˜í•´ì•¼ í•¨
- $: ë¬¸ìì—´ ë
- ê´„í˜¸ê°€ ì³ì§„ ë¶€ë¶„ë§Œ "ê·¸ë£¹"ì´ ëœë‹¤! -> ì¦‰ /^(.*)ServiceImpl$/ì´ë©´ ServiceImplì•ì— ë¶€ë¶„ì˜ ëª¨ë“  ë¬¸ìë§Œ í•œ ê·¸ë£¹ì´ ëœë‹¤.
- :/camelcase	ì²« ê¸€ìëŠ” ì†Œë¬¸ì, ì´í›„ ë‹¨ì–´ì˜ ì•ê¸€ìëŠ” ëŒ€ë¬¸ì ìœ ì§€: "UserBoard" â†’ "userBoard"

```json
    "Service Layer Implement Generator": {
        "prefix": "my_service_impl",
        "body": [
            "package ${2:[í”„ë¡œê·¸ë¨ íŒ¨í‚¤ì§€_ì´ë¦„]}.services.impl;",
            "",
            "import java.util.List;",
            "",
            "import org.springframework.beans.factory.annotation.Autowired;",
            "import org.springframework.stereotype.Service;",
            "",
            "import ${2:[í”„ë¡œê·¸ë¨_íŒ¨í‚¤ì§€_ì´ë¦„]}.mappers.${TM_FILENAME_BASE/(ServiceImpl)//}Mapper;",
            "import ${2:[í”„ë¡œê·¸ë¨_íŒ¨í‚¤ì§€_ì´ë¦„]}.models.${TM_FILENAME_BASE/(ServiceImpl)//};",
            "import ${2:[í”„ë¡œê·¸ë¨_íŒ¨í‚¤ì§€_ì´ë¦„]}.services.${TM_FILENAME_BASE/(ServiceImpl)//}Service;",
            "import lombok.extern.slf4j.Slf4j;",
            "",
            "@Slf4j",
            "@Service",
            "public class ${TM_FILENAME_BASE} implements ${TM_FILENAME_BASE/(Impl)//} {",
            "",
            "    @Autowired",
            "    private ${TM_FILENAME_BASE/(ServiceImpl)//}Mapper ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper;",
            "",
            "    @Override",
            "    public ${TM_FILENAME_BASE/(ServiceImpl)//} addItem(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        int rows = ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.insert(input);",
            "",
            "        if (rows == 0) {",
            "            throw new Exception(\"ì €ì¥ëœ ${TM_FILENAME_BASE/(ServiceImpl)//} ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\");",
            "        }",
            "",
            "        return ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.selectOne(input);",
            "    }",
            "",
            "    @Override",
            "    public ${TM_FILENAME_BASE/(ServiceImpl)//} editItem(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        int rows = ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.update(input);",
            "",
            "        if (rows == 0) {",
            "            throw new Exception(\"ìˆ˜ì •ëœ ${TM_FILENAME_BASE/(ServiceImpl)//} ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\");",
            "        }",
            "",
            "        return ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.selectOne(input);",
            "    }",
            "",
            "    @Override",
            "    public int deleteItem(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        int rows = ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.delete(input);",
            "",
            "        if (rows == 0) {",
            "            throw new Exception(\"${TM_FILENAME_BASE/(ServiceImpl)//} ì‚­ì œëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\");",
            "        }",
            "",
            "        return rows;",
            "    }",
            "",
            "    @Override",
            "    public ${TM_FILENAME_BASE/(ServiceImpl)//} getItem(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        ${TM_FILENAME_BASE/(ServiceImpl)//} output = ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.selectOne(input);",
            "",
            "        if (output == null) {",
            "            throw new Exception(\"${TM_FILENAME_BASE/(ServiceImpl)//} ì¡°íšŒëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\");",
            "        }",
            "",
            "        return output;",
            "    }",
            "",
            "    @Override",
            "    public List<${TM_FILENAME_BASE/(ServiceImpl)//}> getList(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        return ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.selectList(input);",
            "    }",
            "",
            "    @Override",
            "    public int getCount(${TM_FILENAME_BASE/(ServiceImpl)//} input) throws Exception {",
            "        return ${TM_FILENAME_BASE/^(.*)ServiceImpl$/${1:/camelcase}/}Mapper.selectCount(input);",
            "    }",
            "}"
        ],
        "description": "Service Layer Implement Generator"
    }
```

# 2. professorservice êµ¬ì¶•
- deleteê°€ ê´€ê±´ì´ë‹¤. ìš°ì„  ì™¸ë˜í‚¤ë¥¼ ì¡°ì‚¬í•˜ì—¬ ì§€ì›Œì•¼í•  í…Œì´ë¸”ë“¤ì„ íŒŒì•…í•˜ê³  ê·¸ ê°ê°ì˜ ë§¤í¼ì— ê·¸ í…Œì´ë¸”ì—ì„œ ì–´ë–¤ ê±°ë¥¼ ì§€ì›Œì•¼ í• ì§€ë¥¼ ì •í•œ ë‹¤ìŒ ë‹¤ ë§Œë“¤ê³  ìˆœì„œì— ë§ê²Œ ì‹¤í–‰í•˜ë©´ ëœë‹¤.
- ì¦‰ ìš°ì„  í•´ì•¼í•  ê²ƒì€ ê° í…Œì´ë¸”ì—ì„œ ì§€ì›Œì•¼í•  ê²ƒë“¤ì„ ì¼ë‹¨ ë‹¤ ì •ì˜í•˜ì—¬ ìˆœì„œëŠ” ê³ ë ¤í•˜ì§€ ì•Šê³  sqlë¬¸ì„ ì§œëŠ” ê²ƒì´ë‹¤. 
- ìˆœì„œë¥¼ ë§ì¶”ëŠ” ê²ƒì€ êµ¬í˜„ì‹œì— í•´ë‹¹ ì„œë¹„ìŠ¤ì—ì„œ ê³ ë¯¼í•œë‹¤.
- ì¤‘ìš”í•œ ê²ƒì€ mapperì—ì„œ ì§€ì›Œì§€ëŠ” ì£¼ì²´ëŠ”(delete from) í•´ë‹¹ ë§¤í¼ê°€ ë‹¤ë£¨ëŠ” í´ë˜ìŠ¤ì´ë‹¤. ê·¸ í…Œì´ë¸”ì„ í•´ê²°í•˜ë ¤ê³  ê·¸ ë§¤í¼ í´ë˜ìŠ¤ì—ì„œ ì§€ìš°ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.
- modelê³¼ service ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¨ìˆœí•˜ê³  ê²¹ì¹˜ëŠ” ë‚´ìš©ì´ ë§ì•„ì„œ í¬í•¨í•˜ì§€ ì•Šê² ë‹¤.
- ë¹Œë“œí•˜ë©´ì„œ ê²ªì€ ì—ëŸ¬ë“¤ì€ selectë¬¸ì´ ì—¬ëŸ¬ê°œ ê²¹ì³¤ì„ë•Œ ê´„í˜¸ ë¬¸ì œê°€ ìˆì—ˆê³  modelì •ì˜í• ë•Œ í•„ë“œê°’ì— ì˜¤íƒ€ë¥¼ ëƒˆë˜ ìƒí™©ì´ ìˆë‹¤. 

### ğŸ“Œ 2-1. ì§€ìš°ê¸° ìœ„í•œ enrollmentsMapper
- enrollmentsê°€ professorIdë¥¼ ê°€ì§€ê³  ìˆì§€ ì•Šì•„ enrollmentsê°ì²´ì— ì§€ìš°ê³ ìí•˜ëŠ” professorIdë¥¼ ì£¼ì…í•˜ê³  íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©í•˜ëŠ” ì‹ìœ¼ë¡œëŠ” í•´ê²°í•˜ì§€ ëª»í•œë‹¤.
- í•˜ì—¬ professorIdë¥¼ ê°€ì§€ê³  ìˆëŠ” studentì—ì„œ ì§€ìš°ê³ ì í•˜ëŠ” êµìˆ˜ì˜ ì•„ì´ë””ë¥¼ ë°›ì•„ ëŒ€ì‹  íŒŒë¼ë¯¸í„°ë¡œ ì‚¬ìš©í•œë‹¤.
- ì„œë¸Œì¿¼ë¦¬ë¥¼ ì¤‘ë³µìœ¼ë¡œ í™œìš©í•´ì„œ ë„ë‹¬í•˜ê³ ì í•˜ëŠ” ëª©í‘œì¹˜ë¥¼ êµ¬í˜„í•´ë‚´ì—ˆë‹¤.
```java
/** íŠ¹ì • êµìˆ˜ê°€ ì§€ë„êµìˆ˜ì¸ í•™ìƒì´ ìˆ˜ê°•í•˜ëŠ” ë‚´ì—­ ì‚­ì œ, íŠ¹ì • êµìˆ˜ì˜ ë‹´ë‹¹ ê³¼ëª©ì˜ ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ ì‚­ì œ
     *  
     * @param input - ì‚­ì œí•˜ë ¤ëŠ” í•™ê³¼ ë²ˆí˜¸ê°€ ì €ì¥ëœ student í´ë˜ìŠ¤ì˜ ê°ì²´
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    @Delete("DELETE FROM enrollments WHERE student_id IN (select id from students where professor_id = #{professorId}) "
           + "or subject_id in (select id from subjects where professor_id in (select id from students where professor_id = #{professorId}))" ) 
public int deleteByStudentIdForProfessor(Student input);
```

### ğŸ“Œ 2-2. ì§€ìš°ê¸° ìœ„í•œ subjectMapper
- subjectëŠ” êµìˆ˜ ì•„ì´ë””ë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë°”ë¡œ ì§„í–‰í•  ìˆ˜ ìˆì—ˆë‹¤.
```java
    /**
     * íŠ¹ì • êµìˆ˜ê°€ ê°€ë¥´ì¹˜ëŠ” ê³¼ëª© ì¼ê´„ ì‚­ì œ
     * @param subject - í•™ê³¼ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” subject ê°ì²´ 
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    @Delete ("DELETE FROM subjects WHERE professor_id = #{professorId}")
    public int deleteByProfessorIdForProfessor(Subject subject);
```

### ğŸ“Œ 2-3. ì§€ìš°ê¸° ìœ„í•œ studentMapper
```java
/**
     *  íŠ¹ì • êµìˆ˜ê°€ ì§€ë„êµìˆ˜ì¸ í•™ìƒ ì‚­ì œ, íŠ¹ì • êµìˆ˜ê°€ ê°€ë¥´ì¹˜ëŠ” ê³¼ëª©ì„ ìˆ˜ê°•í•˜ëŠ” í•™ìƒ ì‚­ì œ
     *  í•™ìƒì´ ë©¤ë²„ë³€ìˆ˜ë¡œ ì‚­ì œí•˜ê³ ì í•˜ëŠ” êµìˆ˜ì˜ ì •ë³´ë¥¼ ë“¤ê³  ìˆì–´ì•¼í•¨.
     * @param input - í•™ê³¼ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” student ê°ì²´
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    
     @Delete("DELETE FROM students WHERE professor_id = #{professorId} OR "
     + "id IN (SELECT student_id FROM enrollments WHERE subject_id in (select id from subjects where professor_id = #{professorId}))")
     public int deleteByProfessorId(Student input);
```

### ğŸ“Œ 2-4. professorMapper
```java
@Mapper
public interface ProfessorMapper {
    @Insert("INSERT INTO professors (" +
           "id, name, user_id, position, sal, hiredate, comm, email, phone, photo_url, status, department_id " +
           ") VALUES (" +
           "#{id}, #{name}, #{userId}, #{position}, #{sal}, #{hiredate}, #{comm}, #{email}, #{phone}, #{photoUrl}, #{status}, #{departmentId} " +
           ")")
    @Options(useGeneratedKeys = true, keyProperty = "id", keyColumn = "id")
    public int insert(Professor input);

    @Update("UPDATE professors SET " +
           " name = #{name}, user_id = #{userId}, position = #{position}, sal =  #{sal}, hiredate = #{hiredate}, comm = #{comm}, email = #{email}, "
            + " phone = #{phone}, photo_url = #{photoUrl}, status = #{status}, department_id = #{departmentId} "
            + " where id = #{id}")
    public int update(Professor input);

    @Delete("DELETE FROM professors WHERE id = #{id}")
    public int delete(Professor input);

    @Select("SELECT id, name, user_id, position, sal, hiredate, comm, email, phone, photo_url, status, department_id FROM professors " +
           "WHERE id = #{id}")
           @Results(id = "resultMap", value = {
            @Result(property = "id", column = "id"),
            @Result(property = "name", column = "name"),
            @Result(property = "userId", column = "user_id"),
            @Result(property = "position", column = "position"),
            @Result(property = "sal", column = "sal"),
            @Result(property = "hiredate", column = "hiredate"),
            @Result(property = "comm", column = "comm"),
            @Result(property = "email", column = "email"),
            @Result(property = "phone", column = "phone"),
            @Result(property = "photoUrl", column = "photo_url"),
            @Result(property = "status", column = "status"),
            @Result(property = "departmentId", column = "department_id")
        })
    public Professor selectOne(Professor input);

    @Select("<script>"+
           "SELECT id, name, user_id, position, sal, hiredate, comm, email, phone, photo_url, status, department_id FROM professors" +
           "<where>" +
           "    <if test=\"id != null and id != ''\"> id = #{id} </if>" +
           "</where>" +
           "</script>")
    @ResultMap("resultMap")
    public List<Professor> selectList(Professor input);

    @Select("SELECT COUNT(*) FROM professors")
    public int selectCount(Professor input);

    /**
     *  íŠ¹ì • í•™ê³¼ì— ì†Œì† ë˜ì–´ ìˆëŠ” êµìˆ˜ ì¼ê´„ ì‚­ì œ
     * @param input - í•™ê³¼ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” Professor ê°ì²´
     * @return - ì‚­ì œëœ ë°ì´í„° ìˆ˜
     */
    @Delete("DELETE FROM professors WHERE department_id = #{departmentId}")
    public int deleteByDepartmentId(Professor input);
}
```

### ğŸ“Œ 2-5. serviceImpl
- delete ë¶€ë¶„ ìœ ì‹¬íˆ ë³´ê¸°
- getIdë¡œ ì§€ìš°ê³ ìí•˜ëŠ” êµìˆ˜ì˜ ì•„ì´ë””ë¥¼ ë°›ì•„ì„œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©¤ë²„ë³€ìˆ˜ì— ì‚½ì…í•œë‹¤ìŒ ê·¸ ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ í•´ê²°í•´ë‚˜ê°„ë‹¤.
```java
public class ProfessorServiceimpl implements ProfessorService {
    ProfessorMapper professorMapper = null;
    StudentMapper studentMapper = null;
    EnrollmentMapper enrollmentMapper = null;
    SubjectMapper subjectMapper = null;

    public ProfessorServiceimpl(SqlSession sqlSession){ 
        professorMapper = sqlSession.getMapper(ProfessorMapper.class);
        studentMapper = sqlSession.getMapper(StudentMapper.class);
        enrollmentMapper = sqlSession.getMapper(EnrollmentMapper.class);
        subjectMapper = sqlSession.getMapper(SubjectMapper.class);
    }

    @Override
    public Professor addItem(Professor params) throws ServiceNoResultException, Exception {
        if (professorMapper.insert(params) == 0){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return professorMapper.selectOne(params);
    }

    @Override
    public Professor editItem(Professor params) throws ServiceNoResultException, Exception {
        if (professorMapper.update(params) == 0){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return professorMapper.selectOne(params);
    }

    @Override
    public int getCount(Professor params) throws ServiceNoResultException, Exception {
        return professorMapper.selectCount(params);
    }

    @Override
    public Professor getItem(Professor params) throws ServiceNoResultException, Exception {
        Professor ouput = professorMapper.selectOne(params);
        if (ouput == null){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return ouput;
    }

    @Override
    public List<Professor> getList(Professor params) throws ServiceNoResultException, Exception {
        return professorMapper.selectList(params);
    }

    @Override
    public int deleteItem(Professor params) throws ServiceNoResultException, Exception {
        int professorskey = params.getId();

        Student student1 = new Student();
        student1.setProfessorId(professorskey);

        Subject subject1 = new Subject();
        subject1.setProfessorId(professorskey);
        
        
        
        // êµìˆ˜ê°€ ë‹´ë‹¹í•˜ëŠ” ê³¼ëª©ì˜ ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ ì‚­ì œ , êµìˆ˜ì˜ ì§€ë„í•™ìƒì´ ë“£ëŠ” ìˆ˜ê°•ì‹ ì²­ ë‚´ì—­ ì‚­ì œ
        enrollmentMapper.deleteByStudentIdForProfessor(student1);
        // êµìˆ˜ê°€ ë‹´ë‹¹í•˜ëŠ” ê³¼ëª©ì„ ìˆ˜ê°•í•˜ëŠ” í•™ìƒì´ê±°ë‚˜ êµìˆ˜ì˜ ì§€ë„í•™ìƒ ì‚­ì œ
        studentMapper.deleteByProfessorId(student1);
        // êµìˆ˜ê°€ ë‹´ë‹¹í•˜ëŠ” ê³¼ëª© ì‚­ì œ
        subjectMapper.deleteByProfessorIdForProfessor(subject1);
        // êµìˆ˜ ì‚­ì œ
        int output = professorMapper.delete(params);

        if (output == 0){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }

        return output;
    }
}
```

# 3. subjectService êµ¬ì¶•
### ğŸ“Œ 3-1. subjectMapper
- ì¼ë°˜ì ì¸ mapperì´ë‚˜ ì—¬ì „íˆ ì‘ì„±í• ë•Œ ì¹¼ëŸ¼ëª…ê³¼ í•„ë“œëª…ì„ ì˜ ìƒê°í•´ì•¼í•œë‹¤.
```java
public interface SubjectMapper {
    @Insert("INSERT INTO subjects (id, name, credit, department_id, professor_id)"
            + " VALUES (#{id}, #{name}, #{credit}, #{departmentId}, #{professorId})" )
    @Options(useGeneratedKeys = true, keyProperty = "id", keyColumn = "id")
    public int insert(Subject input);

    @Update("UPDATE subjects SET " +
           "id = #{id}, name = #{name}, credit = #{credit}, department_id = #{departmentId}, professor_id = #{professorId} " +
           "WHERE id = #{id}")
    public int update(Subject input);

    @Delete("DELETE FROM subjects WHERE id = #{id}")
    public int delete(Subject input);

    
    @Results(id="resultMap", value={
        @Result(property="id", column="id"),
        @Result(property="name", column="name"),
        @Result(property="credit", column="credit"),
        @Result(property="department_id", column="departmentId"),
        @Result(property="professor_id", column="professorId")
    })
    @Select("SELECT * FROM subjects " +
        "WHERE id = #{id}")
    public Subject selectOne(Subject input);

    @Select(
           "SELECT id, name, credit, department_id, professor_id "
           + "from subjects")
    @ResultMap("resultMap")
    public List<Subject> selectList(Subject input);

    @Select(
           "SELECT COUNT(*) FROM subjects")
    public int selectCount(Subject input);

        /**
     * íŠ¹ì • í•™ê³¼ì—ì„œ ê°œì„¤ëœ ê³¼ëª©ì´ê±°ë‚˜, íŠ¹ì •í•™ê³¼ì— ì†Œì†ëœ êµìˆ˜ê°€ ë‹´ë‹¹í•˜ëŠ” 'ê³¼ëª© ì¼ê´„ ì‚­ì œ'
     * @param subject - í•™ê³¼ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” subject ê°ì²´ 
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    @Delete ("DELETE FROM subjects WHERE department_id = #{departmentId} OR professor_id IN "
    + " (SELECT id FROM professors WHERE department_id = #{departmentId})")
    public int deleteByProfessorId(Subject subject);

    /**
     * íŠ¹ì • êµìˆ˜ê°€ ê°€ë¥´ì¹˜ëŠ” ê³¼ëª© ì¼ê´„ ì‚­ì œ
     * @param subject - í•™ê³¼ ë²ˆí˜¸ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” subject ê°ì²´ 
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    @Delete ("DELETE FROM subjects WHERE professor_id = #{professorId}")
    public int deleteByProfessorIdForProfessor(Subject subject);
}
```

### ğŸ“Œ 3-2. subjectServiceImpl
- ì‚­ì œê°€ íŠ¹ë³„í•˜ë¯€ë¡œ ì‚­ì œë¶€ë¶„ì„ ì£¼ì˜ê¹Šê²Œ ë³¸ë‹¤.
```java
public class SubjectServiceImpl implements SubjectService {
    private SubjectMapper subjectMapper = null;
    private EnrollmentMapper enrollmentMapper = null;

    public SubjectServiceImpl(SqlSession sqlSession){
        subjectMapper = sqlSession.getMapper(SubjectMapper.class);
        enrollmentMapper = sqlSession.getMapper(EnrollmentMapper.class);
    }

    @Override
    public Subject addItem(Subject params) throws ServiceNoResultException, Exception {
        if (subjectMapper.insert(params) == 0){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return subjectMapper.selectOne(params);
    }

    @Override
    public Subject editItem(Subject params) throws ServiceNoResultException, Exception {
        if (subjectMapper.update(params) == 0){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return subjectMapper.selectOne(params);
    }

    @Override
    public int getCount(Subject params) throws ServiceNoResultException, Exception {
        return subjectMapper.selectCount(params);
    }

    @Override
    public Subject getItem(Subject params) throws ServiceNoResultException, Exception {
        Subject output = subjectMapper.selectOne(params);
        if (output == null){
            throw new ServiceNoResultException("ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");
        }
        return output;
    }

    @Override
    public List<Subject> getList(Subject params) throws ServiceNoResultException, Exception {
        return subjectMapper.selectList(params);
    }

    @Override
    public int deleteItem(Subject params) throws ServiceNoResultException, Exception {
        // ê³¼ëª©ì„ ì‚­ì œí•˜ê¸° ìœ„í•´ ìš°ì„  í•´ë‹¹ ê³¼ëª©ì˜ ìˆ˜ê°•ë‚´ì—­ ì‚­ì œ
        Enrollment input = new Enrollment();
        input.setSubjectId(params.getId());

        enrollmentMapper.deleteBySubject(input);

        // ê³¼ëª©ì‚­ì œ
        int output = subjectMapper.delete(params);
        return output;
    }
    
}
```

### ğŸ“Œ 3-3. subjectë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•œ enrollmentMapper
- enrollmentì— subject_idê°€ ìˆìœ¼ë¯€ë¡œ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•œë‹¤.
```java
/** íŠ¹ì • ê³¼ëª©ì— í•´ë‹¹í•˜ëŠ” ìˆ˜ê°•ë‚´ì—­ ì‚­ì œ
     *  
     * @param input - ì‚­ì œí•˜ë ¤ëŠ” ê³¼ëª© ë²ˆí˜¸ê°€ ì €ì¥ëœ enrollment í´ë˜ìŠ¤ì˜ ê°ì²´
     * @return - ì‚­ì œëœ ë°ì´í„°ì˜ ìˆ˜
     */
    @Delete("DELETE FROM enrollments WHERE subject_id = #{subjectId}") 
public int deleteBySubject(Enrollment enrollment);
```