# ğŸ“Œ 0. ë³´ìŠ¤ í´ë¡  ì½”ë”© í”„ë¡œì íŠ¸
### ğŸ“Œ 0-1. ê²°ì œ ëŒ€ê¸° ì¤‘ ìƒí’ˆ ì§€ìš°ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬
- ì´ˆ, ë¶„, ì‹œë‹ˆê¹Œ 9ì‹œì— ì‹¤í–‰ë˜ëŠ” ìŠ¤ì¼€ì¤„ì„ ì¡ì•„ë‘ê³  í˜„ì¬ ì‹œê°„ì— 24ì‹œê°„ì´ ì§€ë‚œ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë„ë¡ í•œë‹¤.
```java
@Scheduled(cron = "0 0 9 * * *") // ë§¤ì¼ ì˜¤ì „ 9ì‹œ
    public void cleanupDeletedPayments() {
        // ê²°ì œ ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ ì‚­ì œ
        LocalDateTime threshold = LocalDateTime.now().minusHours(24);
        String deleteBeforeDate = threshold.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));

        // ì£¼ë¬¸ ìƒí’ˆ ë°ì´í„° ë¨¼ì € ì‚­ì œ -> because ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´
        int deletedOrderProducts = orderProductMapper.cleanupPendingOrderProducts(deleteBeforeDate);
        
        // ì£¼ë¬¸ ë°ì´í„° ì‚­ì œ
        int deletedOrders = orderMapper.cleanupPendingOrders(deleteBeforeDate);

        log.info("[CleanupScheduler] 24ì‹œê°„ ê²½ê³¼ ê²°ì œëŒ€ê¸°ì¤‘ ì£¼ë¬¸: {}ê±´, ì£¼ë¬¸ìƒí’ˆ: {}ê±´ ì‚­ì œ ì™„ë£Œ (ê¸°ì¤€ì¼: {})",
                deletedOrders, deletedOrderProducts, deleteBeforeDate);
    }
```
- orderMapper
- ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ì—…ì€ dbì™€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ ì •ë³´ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ ë¨¼ì € ì™¸ë˜í‚¤ë¡œ ì—°ê²°ë˜ì–´ìˆëŠ” ìƒí’ˆì„ ì‚­ì œí•˜ê³  ì´í›„ ì£¼ë¬¸ì„ ì‚­ì œí•´ì•¼í•œë‹¤.
- ë“±ë¡ ì‹œê°„ì´ í˜„ì¬ ì‹œê°„ì—ì„œ 24ì‹œê°„ì„ ëº€ ê²ƒë³´ë‹¤ ë¨¼ì €ì¸ ìƒí’ˆì„ ì œê±°í•œë‹¤.
```java
/**
     * 24ì‹œê°„ ì´ìƒ ê²°ì œ ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ ì‚­ì œ
     * 
     * @param deleteBeforeDate - ê¸°ì¤€ì¼ì‹œ (ì´ ì‹œê°„ ì´ì „ì— ìƒì„±ëœ ê²°ì œ ëŒ€ê¸° ì¤‘ ì£¼ë¬¸ ì‚­ì œ)
     * @return int - ì‚­ì œëœ í–‰ì˜ ìˆ˜
     */
    @Update("DELETE FROM orders WHERE order_status = 'ê²°ì œëŒ€ê¸°ì¤‘' AND reg_date < #{deleteBeforeDate}")
    public int cleanupPendingOrders(@Param("deleteBeforeDate") String deleteBeforeDate);
```
- orderProductMapper
```java
/**
     * ê²°ì œ ëŒ€ê¸° ì¤‘ì¸ ì£¼ë¬¸ì˜ ìƒí’ˆ ë°ì´í„° ì‚­ì œ
     * 
     * @param deleteBeforeDate - ê¸°ì¤€ì¼ì‹œ (ì´ ì‹œê°„ ì´ì „ì— ìƒì„±ëœ ê²°ì œ ëŒ€ê¸° ì¤‘ ì£¼ë¬¸ì˜ ìƒí’ˆ ì‚­ì œ)
     * @return int - ì‚­ì œëœ í–‰ì˜ ìˆ˜
     */
    @Select("DELETE op FROM orders_products op " +
            "JOIN orders o ON op.order_id = o.order_id " +
            "WHERE o.order_status = 'ê²°ì œëŒ€ê¸°ì¤‘' AND o.reg_date < #{deleteBeforeDate}")
    public int cleanupPendingOrderProducts(@Param("deleteBeforeDate") String deleteBeforeDate);
```

### ğŸ“Œ 0-2. ì›ìì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- íŠ¸ëœì­ì…˜ì„ ì—¬ëŸ¬ db ì‘ì—…ì´ í•œ ë¬¶ìŒìœ¼ë¡œ ì´ë£¨ì–´ì§ˆë•Œ ê±°ëŠ” ê²ƒì´ë‹¤. (ì»¨íŠ¸ë¡¤ëŸ¬ì— ì„œë¹„ìŠ¤ê°€ ì—¬ëŸ¬ê°œì¼ ê²½ìš°, ì„œë¹„ìŠ¤ì— mapperê°€ ì—¬ëŸ¬ê°œì¼ ê²½ìš°)
- íŠ¸ëœì­ì…˜ ì ìš© ê°€ì´ë“œë¼ì¸ì€ ì•„ë˜ì™€ ê°™ë‹¤.
- ì„œë¹„ìŠ¤ ë ˆì´ì–´ì— ì ìš©: ì—¬ëŸ¬ Mapper í˜¸ì¶œì´ ìˆëŠ” ê²½ìš°, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë³µì¡í•œ ê²½ìš°, ë°ì´í„° ì¼ê´€ì„±ì´ ì¤‘ìš”í•œ ê²½ìš°
- ì»¨íŠ¸ë¡¤ëŸ¬ ë ˆì´ì–´ì— ì ìš©: ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°, ì„œë¹„ìŠ¤ ê°„ íŠ¸ëœì­ì…˜ ê²½ê³„ê°€ í•„ìš”í•œ ê²½ìš°
- ê·¸ë¦¬ê³  ë‹¨ì¼ ì„œë¹„ìŠ¤ ë©”ì„œë“œë§Œ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ëŠ” íŠ¸ëœì­ì…˜ì„ ê±¸ì§€ ì•ŠëŠ”ë‹¤.
- Mapper/DAO ë ˆì´ì–´:  ì¼ë°˜ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ê±¸ì§€ ì•Šìœ¼ë©° ì„œë¹„ìŠ¤ì—ì„œ íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¥¼ ìœ„ì„ë°›ëŠ”ë‹¤.
- íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì¥ì ì€ ì•„ë˜ì™€ ê°™ë‹¤.
- ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•œë‹¤. -> ì£¼ë¬¸ì€ ì €ì¥ë˜ì—ˆëŠ”ë° ìƒí’ˆì€ ì €ì¥ë˜ì§€ ì•ŠëŠ” ë“±ì˜ ë¶€ë¶„ì‹¤íŒ¨ë¥¼ ë°©ì§€í•˜ì—¬ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•œë‹¤.
- @Transactional(readOnly = true) ì˜ ì½ê¸° ì „ìš© íŠ¸ëœì­ì…˜ì˜ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ê°€ ì½ê¸° ìµœì í™” ìˆ˜í–‰í•˜ì—¬(ì½ê¸° ì „ìš© ë©”ëª¨ë¦¬ë§Œ ì‚¬ìš©í•œë‹¤.) ì„±ëŠ¥ì„ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.
- ë‹¤ë§Œ íŠ¸ëœì­ì…˜ì˜ ë¬¸ì œëŠ” ì„±ëŠ¥ì´ ì˜¤ë²„í—¤ë“œë˜ê³  ë½ì„ ê±°ëŠ” ìˆœì„œì— ë”°ë¼ ê°™ì€ ë°ì´í„°ì— ë½ì„ ê±¸ë©´ì„œ ë°ë“œë½ í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆì–´ ë„ˆë¬´ ë‹¨ìˆœí•œ ë¡œì§ì—ëŠ” íŠ¸ëœì­ì…˜ì„ ê±¸ë©´ ì•ˆëœë‹¤.
- ì½ê¸° ì „ìš©ì— íŠ¸ëœì­ì…˜ì„ ê±°ëŠ” ì´ìœ ëŠ” ì˜ë„ë¥¼ ëª…í™•íˆ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.
- ì´ì œ ëª‡ê°€ì§€ ì˜ˆë¥¼ ë“¤ì–´ì„œ ì„¤ëª…í•´ë³´ê² ë‹¤.

- ì•„ë˜ì™€ ê°™ì€ ì½”ë“œëŠ” ì„œë¹„ìŠ¤ê°€ ì—¬ëŸ¿ í˜¸ì¶œë˜ê³  ìˆìœ¼ë©° ì´ë“¤ì€ í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ í•„ìˆ˜ì ì¸ ì‘ì—…ë“¤ì´ë¯€ë¡œ íŠ¸ëœì­ì…˜ì´ í•„ìš”í•˜ë‹¤. í•˜ì§€ë§Œ ëª¨ë‘ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ì¡°íšŒí•´ì˜¤ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— @Transactional(readOnly = true)ë¥¼ í˜¸ì¶œí•œë‹¤.
```java
/**
     * ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ë¡œ ì´ë™
     * @param member ì„¸ì…˜ìœ¼ë¡œ ë°›ì€ ì‚¬ìš©ì ì •ë³´
     * @param model ëª¨ë¸ ê°ì²´
     * @return ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ ë·° ì´ë¦„
     */
    @GetMapping("/cart")
    @Transactional(readOnly = true)
    public String cartPage(@SessionAttribute("memberInfo") User member, Model model) throws Exception {
        Cart param = new Cart();
        param.setUserId(member.getUserId());      
        
          // ì¥ë°”êµ¬ë‹ˆ ëª©ë¡ ì¡°íšŒ -> ìœ ì €ê°€ ì¥ë°”êµ¬ë‹ˆì— ë‹´ì€ ëª¨ë“  ìƒí’ˆë“¤ì„ ê°€ì ¸ì˜´
        List<Cart> carts = cartService.getCartList(param);

        // ì¥ë°”êµ¬ë‹ˆ ì „ì²´ í•©ì‚° ì •ë³´ ê³„ì‚°
        CartSummaryVO summary = new CartSummaryVO(carts);

        // ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì •ë³´ ì¡°íšŒ (ì „ì²´ ì¡°íšŒ)
        List<Wishlist> wishlistResult = cartService.getAllWishlistByUserId(param);

        model.addAttribute("carts", carts);
        model.addAttribute("summary", summary);
        model.addAttribute("wishlists", wishlistResult);
        return "cart/index";
    }
```
- ìˆ˜ì •í•˜ëŠ” ì„œë¹„ìŠ¤ê°€ ì—¬ëŸ¬ê°œ ìˆëŠ” ê²½ìš°ì—ëŠ” @Transactional(rollbackFor = Exception.class) ì‚¬ìš©ì´ ìëª…í•˜ì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ ì• ë§¤í•œ ê²½ìš°ê°€ ìˆë‹¤.
- ì¼ë°˜ì ìœ¼ë¡œ ì™¸ë¶€ APIë¥¼ í¬í•¨í•œ íŠ¸ëœì­ì…˜ì—ì„œëŠ” íƒ€ì„ì•„ì›ƒ ì„¤ì •ì´ í•„ìˆ˜ì¸ë° ì´ëŠ” íŠ¸ë™ì­ì…˜ ì²˜ë¦¬ê°€ ë„ˆë¬´ ê¸¸ì–´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ ì´ë‹¤.
- ì•„ë˜ì—ì„  ë©”ì¼ ì²˜ë¦¬ê°€ ë„ˆë¬´ ê¸¸ì–´ì§ˆ ìˆ˜ë„ ìˆì–´ì„œ ì´ë¥¼ ë°©ì§€í•œë‹¤.
```java
/**
     * ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë©”ì„œë“œ
     * @param params ìš”ì²­ íŒŒë¼ë¯¸í„° (ì´ë©”ì¼)
     * @return ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê²°ê³¼ë¥¼ ë‹´ì€ ResponseEntity ê°ì²´
     */
    @PostMapping("/api/reset-pw")
    @Transactional(rollbackFor = Exception.class, timeout = 10)
    public ResponseEntity<ResponseDTO> resetPw(@RequestBody Map<String, String> params) throws Exception {
        String email = params.get("email");
        ResponseDTO response;

        // ValidationManagerë¥¼ ì‚¬ìš©í•œ ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬
        String validEmail = validationManager.validateFindEmail(email);

        // ì…ë ¥ëœ ì´ë©”ì¼ë¡œ User ê°ì²´ ìƒì„±
        User inputUser = new User();
        inputUser.setUserEmail(validEmail);

        // íšŒì› ì •ë³´ ì¡°íšŒ
        User user = loginService.findByEmail(inputUser);
        
        if (user == null) {
            throw new UnauthorizedException("ì…ë ¥í•˜ì‹  ì •ë³´ì™€ ì¼ì¹˜í•˜ëŠ” ê³„ì •ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì‹œê±°ë‚˜ ì‚¬ì´íŠ¸ ìš´ì˜ìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.");
        }

        //ì„ì‹œë¹„ë°€ë²ˆí˜¸ ìƒì„±
        String newPassword = passwordManager.generateNewPassword();

        if (newPassword == null || newPassword.isEmpty()) {
            throw new InternalServerErrorException("ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        }

        // ìƒì„±ëœ ì„ì‹œ ë²ˆí˜¸ë¡œ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • -> ë©”ì¼ ë°œì†¡
        loginService.resetPw(user, newPassword);

        // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • í›„ ì¬ì„¤ì •ëœ ì´ë©”ì¼ì„ ê°€ì§€ê³  ì´ë©”ì¼ ì „ì†¡
        emailManager.newPasswordEmailSend(user, newPassword);

        // ì‘ë‹µ ê²°ê³¼ ìƒì„±
        response = ResponseDTO.builder()
                .success(true)
                .message("ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ê°€ ì´ë©”ì¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.")
                .timestamp(LocalDateTime.now())
                .build();
        return ResponseEntity.ok(response);
    }
```

### ğŸ“Œ 0-3. íƒ€ì„ë¦¬í”„ í‘œí˜„ì‹
- íƒ€ì„ë¦¬í”„ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¼ë°˜ì‹ì˜ íƒ€ì„ë¦¬í”„ì˜ ë³€ìˆ˜ë¥¼ í¬ë©§íŒ…í•˜ë ¤ë©´ ê¼­ íŒŒì´í”„ ë¼ì¸ì„ ë„£ì–´ì•¼ í•œë‹¤.
```html
<div class="thumb" th:onclick="|window.location.href='/productsinfo/${item.productId}'|">
```

### ğŸ“Œ 0-4. í…ìŠ¤íŠ¸ì™€ ë°‘ì¤„ ì‚¬ì´ì˜ ê°„ê²© ì¡°ì •
```css
text-decoration: underline !important;
text-underline-offset: 4px;
```

### ğŸ“Œ 0-5. ìƒ‰ìƒ íˆ´íŒì¶”ê°€
- ë™ì ìœ¼ë¡œ íˆ´íŒì„ divë¡œ ë§Œë“¤ì–´ì„œ ì•„ë˜ì—ë‹¤ê°€ ë¶™ì˜€ë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ paletteRow.innerHTMLì— allColors ë‚´ë¶€ì˜ ìƒ‰ìƒ cë¥¼ ê°ê° divì— ë§¤í•‘í•˜ì—¬ ë„£ëŠ” êµ¬ì¡°ì¸ë° ì•„ë˜ êµ¬ì¡°ë¥¼ ì¶”ê°€í•œ ê²ƒì´ë‹¤.
```js
/* ì˜µì…˜ ë³€ê²½ì„ í´ë¦­í•œ ìƒí’ˆ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ëª¨ë‹¬ ì±„ìš°ê¸° */
  function renderModal(dto) { 
    unitPrice = dto.productPrice;    
    mainThumb.src = dto.productImg;
    mainName.textContent = dto.productName;
    mainPrice.textContent = numberFormat(dto.productPrice) + 'ì›'; // numberFormat í•¨ìˆ˜ë¡œ ì²œë‹¨ìœ„ ìˆ«ì ì‰¼í‘œ í¬ë§·íŒ…

    // íŒ”ë ˆíŠ¸ ì˜ì—­ì— ìƒí’ˆë³„ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ë²„íŠ¼ë“¤ ë™ì ìœ¼ë¡œ ìƒì„±
    paletteRow.innerHTML = dto.allColors.map(c => `
      <button class="color-swatch${dto.options.some(o=>o.colorId==c.colorId) ? ' selected':''}"
              data-color-id="${c.colorId}"
              title="${c.colorName}">
        <span class="color-swatch-outer">
          <span class="color-swatch-inner" style="background:${c.colorCode};"></span>
        </span>
        <div class="color-tooltip">
          <div class="tooltip-color-name">${c.colorName}</div>
          <div class="tooltip-price">${numberFormat(dto.productPrice)}ì›</div>
        </div>
      </button>`
    ).join('');
```
- ìƒ‰ìƒ íŒ”ë ˆíŠ¸ì— position: relativeë¥¼ ê±¸ì–´ë‘ê³   top: 100%ì„ í•˜ë©´ ì•„ë˜ë¡œ ë°•íŒë‹¤.
-  opacity: 0; visibility: hidden; ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆë³´ì´ë‹¤ê°€ ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ë‚˜íƒ€ë‚˜ë„ë¡ ì½”ë”©í•˜ì˜€ë‹¤.
-  í™”ì‚´í‘œëŠ” &:after ê°€ìƒ ìš”ì†Œë¡œ ë§Œë“¤ì—ˆë‹¤.
```css
/* íˆ´íŒ ìŠ¤íƒ€ì¼ */
.color-tooltip {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 1000;
    margin-top: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

    /* íˆ´íŒ í™”ì‚´í‘œ */
    &::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-bottom-color: rgba(0, 0, 0, 0.9);
    }

    .tooltip-color-name {
    font-weight: 600;
    margin-bottom: 2px;
    }

    .tooltip-price {
    font-size: 11px;
    color: #ccc;
    }
}
```
