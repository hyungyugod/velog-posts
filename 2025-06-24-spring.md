# ğŸ“Œ 0. ë³´ìŠ¤ í´ë¡ ì½”ë”© í”„ë¡œì íŠ¸
### ğŸ“Œ 0-1. ë“œë¡­ë‹¤ìš´
- ë“œë¡­ ë‹¤ìš´ì€ ë³µì¡í•œ ìƒê°í• ê±° ì—†ì´ ê·¸ëƒ¥ selectë¡œ êµ¬í˜„í•˜ë©´ ëœë‹¤.
```html
<select id="sort-select" class="sort-select">
    <option value="accuracy">ì •í™•ë„ìˆœ</option>
    <option value="latest">ìµœì‹ ìˆœ</option>
</select>
```

### ğŸ“Œ 0-2. cubic-bezier
- transitionì˜ ë‚˜íƒ€ë‚˜ëŠ” ì–‘ìƒì„ ê·¸ë˜í”„ë¡œ ê·¸ë ¤ì¤„ ìˆ˜ ìˆëŠ” ì†ì„±ì´ë‹¤. 
- (.03,.36,1,.63) ì´ë ‡ê²Œ 4ê°œì˜ ì¸ìë¥¼ ì“°ëŠ”ë° ê°ê° ë‘ ì œì–´ì ì˜ x, yì¢Œí‘œì´ë‹¤.
- https://cubic-bezier.com/ ì—ì„œ ì •í™•í•œ ê°’ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.

```css
.search-title-animate {
  opacity: 0;
  transform: translateY(40px);
  /* https://cubic-bezier.com/ */
  transition: all 0.5s cubic-bezier(.03,.36,1,.63);
  text-align: center;
  margin-bottom: 20px;
}
```

### ğŸ“Œ 0-3. div ë¥¼ ulë¡œ ë¦¬í™í† ë§
- ì›ë˜ divë¡œ ìƒí’ˆí‹€ì„ ì¡ì•„ë‘ì—ˆì—ˆëŠ”ë° íƒ€ì„ë¦¬í”„ë¥¼ ê³ ë ¤í•˜ë©´ ë¦¬ìŠ¤íŠ¸ë¡œ ë°”ê¾¸ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°”ê¾¸ì—ˆë‹¤.
- ì´ë•Œ ì£¼ì˜í•´ì•¼í•  ì ì€ divë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë°”ê¾¸ë©´ ìë™ìœ¼ë¡œ padding-left ê°€ ë¸Œë¼ìš°ì € ë‹¨ì—ì„œ ì ìš©ë˜ì–´ í•´ë‹¹ paddingì„ ë§‰ì•„ì£¼ëŠ” ì²˜ë¦¬ë¥¼ cssì—ì„œ í•´ì£¼ì–´ì•¼ í•œë‹¤.
- ì•„ë˜ëŠ” ë°”ê¹¥ search-result-listë§Œ divì—ì„œ ulë¡œ ë°”ê¾¸ì–´ ì¤€ê²ƒì´ê³  ë‚´ë¶€ ì•„ì´í…œì„ lië¡œ ë¬¶ì—ˆë‹¤.
- ì´ˆê¸°í™” ë‹¨ì—ì„œ list-style: none;ì„ ë¯¸ë¦¬ ì„¤ì •í•´ë‘ì—ˆìœ¼ë©´ êµ³ì´ ì•ˆí•´ë„ ë˜ì§€ë§Œ ì´ˆê¸°í™” cssë¥¼ ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´ë¥¼ ëª…ì‹œí•´ì£¼ì–´ì•¼í•œë‹¤.
```html
<ul class="search-result-list">
  <li class="search-result-item">
    <img src="/static/assets/img/cart/e51e3ffc5eb0f.jpg" alt="í—¤ë“œí°" class="search-thumb">
    <div class="search-item-info">
      <div class="search-item-title">
        <b>[BOSE] ë³´ìŠ¤ QC í—¤ë“œí°</b>
      </div>
      <div class="search-item-desc">ë³´ìŠ¤ ì½”ë¦¬ì•„ ì •í’ˆ 1ë…„ A/S ë³´ì¥. ê³µì‹ëª° íšŒì› ì „ìš© ì¿ í° ì¦ì •.</div>
      <div class="search-item-price-row">
        <span class="search-item-sale">329,000ì›</span>
      </div>
    </div>
  </li>
</ul>
```
- ì•„ë˜ì²˜ëŸ¼ ê¸°ë³¸ìœ¼ë¡œ ë¶€ì—¬í•˜ëŠ” íŒ¨ë”©ì„ 0ìœ¼ë¡œ ì„¤ì •í•˜ì˜€ë‹¤.
```css
/* ê²€ìƒ‰ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ */
.search-result-list {
  width: 100%;
  margin: auto;
  padding: 0px;
}
```

### ğŸ“Œ 0-4. ë“œë¡­ë‹¤ìš´ ë””ìì¸ ë°”ê¾¸ê³  í´ë¦­í–ˆì„ë•Œ í…Œë‘ë¦¬ ì—†ì• ê¸°
- background ì†ì„±ì—ì„œ ìƒˆë¡œìš´ ë“œë¡­ë‹¤ìš´ í•˜ë‹¨ í™”ì‚´í‘œ ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•œë‹¤. 
- ì´ì™€ ê°™ì´ í•˜ëŠ” ì´ìœ ëŠ” ë¸Œë¼ìš°ì €ë§ˆë‹¤ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì´ë¯¸ì§€ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— uiì¼ê´€ì„±ì„ ìœ„í•¨ê³¼ ì‚¬ì´íŠ¸ ì „ì²´ì ì¸ ë””ìì¸ì— ë§ì¶”ê¸° ìœ„í•¨ì´ë‹¤.
- ë˜ focusê°€ ê°”ì„ë•Œ ì•„ì›ƒë¼ì¸ì´ ì³ì§€ëŠ” ë¬¸ì œê°€ ìˆì—ˆëŠ”ë° ì•„ë˜ì²˜ëŸ¼ ë“œë¡­ë‹¤ìš´ì— outline ì†ì„±ì„ noneìœ¼ë¡œ ì£¼ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤.
 
```css
.sort-select {
      font-size: 14.5px;
      color: #666;
      background: #fff;
      padding: 5px 28px 5px 10px;
      font-weight: 500;
      appearance: none; 
      cursor: pointer;
      position: relative;
      min-width: 92px;
      border: none;

      /* ë“œë¡­ë‹¤ìš´ ì•„ì´ì½˜ ì˜ˆìœê±¸ë¡œ */
      background: url('data:image/svg+xml;utf8,<svg fill="gray" height="8" viewBox="0 0 24 24" width="8" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat right 10px center/12px 12px;

      &:focus {
        outline: none;
        box-shadow: none;
        }
    }
  ```

### ğŸ“Œ 0-5. ì—†ë˜ ìƒíƒœì—ì„œ ë‚˜íƒ€ë‚˜ê¸°
- pointer-events: none; : â†’ ë§ˆìš°ìŠ¤, í„°ì¹˜ ë“± ëª¨ë“  ì…ë ¥ ë¹„í™œì„±í™” (ì‹¤ì œë¡œëŠ” ì¡´ì¬í•˜ì§€ë§Œ í´ë¦­ë„ ì•ˆë¨)
- visibility: hidden; : â†’ í™”ë©´ì— ì•ˆ ë³´ì„(ì‹œê°ì ìœ¼ë¡œ, ë³´ì¡°ê¸°ê¸°ë„ ì¸ì‹ X)
- ì•ˆë³´ì´ë˜ ìƒíƒœì—ì„œ showí´ë˜ìŠ¤ê°€ ë¶™ìœ¼ë©´ ì™„ì „íˆ ë³´ì´ë„ë¡ í•˜ì˜€ë‹¤.
```css
opacity: 0;
    transform: translateX(-18px);
    pointer-events: none;
    visibility: hidden;
    transition:
      opacity 0.22s cubic-bezier(.55,0,.1,1),
      transform 0.26s cubic-bezier(.55,0,.1,1),
      visibility 0s 0.26s; 

    &.show {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
      visibility: visible;
      transition:
        opacity 0.22s cubic-bezier(.55,0,.1,1),
        transform 0.26s cubic-bezier(.55,0,.1,1),
        visibility 0s;
    }
```
- ì…ë ¥ëœ ê¸€ìë¥¼ ì‚­ì œí•˜ëŠ” ë²„íŠ¼ê³¼ ê²€ìƒ‰ë²„íŠ¼ì˜ showìœ ë¬´ë¥¼ ê²°ì •í•˜ëŠ” jsëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```js
// íƒ€ì´í‹€ ì• ë‹ˆë©”ì´ì…˜
window.addEventListener("DOMContentLoaded", function () {
  setTimeout(() => {
    document.getElementById('search-title-animate').classList.add('show');
  }, 150);

  // ê²€ìƒ‰ ì…ë ¥ ë¦¬ì…‹ë²„íŠ¼ í‘œì‹œ
  const searchInput = document.querySelector('.search-input');
  const resetBtn = document.querySelector('.search-reset-btn');
  
  searchInput.addEventListener('input', function () {
    resetBtn.classList.toggle('show', this.value.length > 0);
  });
  resetBtn.addEventListener('click', function () {
    searchInput.value = '';
    resetBtn.classList.remove('show');
    searchInput.focus();
  });
});
```

### ğŸ“Œ 0-6. ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œì˜ ìœ íš¨ì„± ê²€ì‚¬ ë²”ìœ„
- ìœ íš¨ì„± ê²€ì‚¬ëŠ” ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œ ëª¨ë‘ì—ì„œ ì‹œí–‰í•´ì£¼ëŠ” ê²ƒì´ ë³´ì•ˆìƒ ì•ˆì „í•˜ë‹¤.
- í”„ë¡ íŠ¸ì—ì„œ ìœ íš¨ì„± ê²€ì‚¬ëŠ” ë¹ˆ ê°’(í•„ìˆ˜ ì…ë ¥ í™•ì¸), ëª…ë°±í•œ í˜•ì‹(ì´ë©”ì¼, íœ´ëŒ€í°, íŒ¨í„´ ë“±), ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´, í—ˆìš©ë¬¸ì ë“± (ê°„ë‹¨í•œ ë²”ìœ„)ë¡œë§Œ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.
- ë°±ì—”ë“œëŠ” í”„ë¡ íŠ¸ì—”ë“œì˜ ê²€ì‚¬ë¥¼ ëª¨ë‘ ì‹œí–‰í•˜ê³  ì¶”ê°€ì ìœ¼ë¡œ ë“¤ì–´ì˜¨ ë‚´ìš©ì´ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ëœ ë‚´ìš©ê³¼ ë§ëŠ”ì§€ ê²€ì‚¬í•´ì£¼ì–´ì•¼ í•œë‹¤.
- ì•„ë˜ëŠ” ê¸°ë³¸ì ì¸ ìœ íš¨ì„± ê²€ì‚¬ì¸ë° htmlì—ì„œ í¼ì´ ê°€ëŠ” ìˆœê°„ ìƒˆë¡œ í˜ì´ì§€ë¥¼ ë¡œë“œí•´ì•¼í•˜ê¸° ë•Œë¬¸ì— í˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ë˜ë©´ì„œ ê°’ì„ ìœ ì§€í•´ì£¼ëŠ” ë¡œì§ì„ í¬í•¨í•´ì•¼í•œë‹¤ëŠ” í•œê³„ê°€ ìˆë‹¤.
- ìš°ì„  ì—¬ê¸°ì„œ ì‹¤íŒ¨í–ˆì„ë•Œ ë°”ë¡œ ìƒˆë¡œê³ ì¹¨ì´ ì¼ì–´ë‚˜ì§€ëŠ” ì•Šì§€ë§Œ ë°±ì—”ë“œë¡œ ë³´ëƒˆì„ë•Œ ê·¸ìª½ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ê·¸ë•Œ ìƒˆë¡œê³ ì¹¨ì´ ì¼ì–´ë‚˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.
```html
<script>
        document.addEventListener('DOMContentLoaded', function () {
            const loginForm = document.querySelector('.login-form form');
            const emailInput = loginForm.querySelector('input[name="user_email"]');
            const pwInput = loginForm.querySelector('input[name="user_password"]');

            loginForm.addEventListener('submit', function (e) {
                
                const email = emailInput.value.trim();
                const pw = pwInput.value.trim();

                // ì´ë©”ì¼ ë¹ˆê°’ ì²´í¬
                if (!email) {
                    alert('ì•„ì´ë””(ì´ë©”ì¼)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                    emailInput.focus();
                    e.preventDefault();
                    return;
                }
                // ë¹„ë°€ë²ˆí˜¸ ë¹ˆê°’ ì²´í¬
                if (!pw) {
                    alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                    pwInput.focus();
                    e.preventDefault();
                    return;
                }
                // ì—¬ê¸°ê¹Œì§€ í†µê³¼í•˜ë©´ ì„œë²„ë¡œ í¼ì´ ì „ì†¡ë¨ -> e.preventDefault();ê°€ ë™ì‘í•˜ì§€ ì•Šê¸° ë•Œë¬¸
            });
        });
    </script>
```
- í•˜ì—¬ jsë¥¼ í™œìš©í•˜ì—¬ ì•„ë˜ì²˜ëŸ¼ í™”ë©´ì„ ìƒˆë¡œê³ ì¹¨í•˜ì§€ ì•Šê³  í•„ìš”í•œ ë°ì´í„°ì™€ ì²˜ë¦¬ë§Œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.
- axiosëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ê³  ë‚´ë¶€ ë¡œì§ì´ ë³µì¡í•˜ë‹¤ëŠ” ì´ìœ ë¡œ ìš”ìƒˆëŠ” js ë‚´ì¥ ê¸°ëŠ¥ì¸ fetchë¥¼ ì“°ëŠ” ì¶”ì„¸ì´ë‹¤.
- **response.json()**ì€ fetchë¡œ ë°›ì•„ì˜¨ HTTP ì‘ë‹µ(response ê°ì²´)ì˜ body(=í…ìŠ¤íŠ¸ ìƒíƒœì˜ JSON ë¬¸ìì—´)ë¥¼ ì‹¤ì œ JavaScript ê°ì²´/ë°°ì—´ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- window.location.href = redirect; : ë¸Œë¼ìš°ì €ì˜ ì£¼ì†Œë¶€ë¶„ì„ redirectì— ì €ì¥ëœ ê°’ìœ¼ë¡œ ë°”ê¿”ì¤€ë‹¤.
- redirect.startsWith('/') : //ë‚˜ http ê°™ì€ ê±¸ë¡œ ì‹œì‘í•˜ëŠ” ì£¼ì†Œê°€ ?redirect=http... ë¡œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìœ¼ë©´ì„œ /ë¡œ ì‹œì‘í•˜ëŠ” ë‚´ë¶€ ê²½ë¡œë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë°©ì–´í•´ì•¼í•œë‹¤.
- alert(data.message || 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'); : ë©”ì„¸ì§€ë¡œ ì˜¨ ê°’ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ê°€ ëœ¨ê²Œëœë‹¤. (alert ê¸°ë³¸ê¸°ëŠ¥)
- ìœ„ì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì—ì„œ ì´ì „ì£¼ì†Œë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆì—ˆëŠ”ë° referrer(ì´ì „ ì£¼ì†Œë¥¼ requestì— ë³´ê´€í•˜ê³  ìˆëŠ” ê²ƒ)ë¥¼ ì•Œê²Œ ë˜ê³  ì½”ë“œë¥¼ referrerë¡œ í˜ì´ì§€ë¥¼ ë³´ë‚´ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì •í•˜ì˜€ë‹¤.
- const redirect = "[[${referrer}]]"; : ì´ë ‡ê²Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íƒ€ì„ë¦¬í”„ë¥¼ ì“°ë ¤ë©´ ëŒ€ê´„í˜¸ 2ê°œë¡œ ë°”ê¾¸ì–´ì•¼ í•œë‹¤.
```html
<!-- í”„ë¡ íŠ¸ ìœ íš¨ì„± ê²€ì‚¬ -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const loginForm = document.querySelector('.login-form form');
        const emailInput = loginForm.querySelector('input[name="user_email"]');
        const pwInput = loginForm.querySelector('input[name="user_password"]');

        loginForm.addEventListener('submit', async e => {
            e.preventDefault(); // ê¸°ë³¸ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” í¼ì˜ ê¸°ëŠ¥ì„ ë§‰ì•„ë‘ê¸°

            const email = emailInput.value.trim();
            const pw = pwInput.value.trim();

            // ì´ë©”ì¼ ë¹ˆê°’ ì²´í¬
            if (!email) {
                alert('ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                emailInput.focus();
                return;
            }

            // ì´ë©”ì¼ í˜•ì‹ ê²€ì‚¬
            const emailPattern = /^[\w.-]+@[\w.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(email)) {
                alert('ì•„ì´ë””(ì´ë©”ì¼) í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                emailInput.focus();
                return;
            }

            // ë¹„ë°€ë²ˆí˜¸ ë¹ˆê°’ ì²´í¬
            if (!pw) {
                alert('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                pwInput.focus();
                return;
            }

            // AJAX ë¡œê·¸ì¸ ìš”ì²­ (fetch)
            try {
                const formData = new FormData(loginForm);

                const response = await fetch('/login', {
                    method: 'POST',
                    body: formData
                });

                let data = {};

                try { 
                    data = await response.json(); // ì‘ë‹µ ê°ì²´ë¥¼ jsonìœ¼ë¡œ ë³€í™˜
                } 
                
                catch { 
                    data = {};
                }

                // ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì—ì„œ redirect íŒŒë¼ë¯¸í„° íŒŒì‹±
                const params = new URLSearchParams(window.location.search);
                const redirect = "[[${referrer}]]"; // ì„œë²„ì—ì„œ ì „ë‹¬í•œ referrer ê°’ ì‚¬ìš©

                if (response.ok && data.result === 'success') {
                    
                    if (redirect && redirect.startsWith('/')) { // ì™¸ë¶€ ê²½ë¡œ ë°©ì–´í•˜ê¸°
                        window.location.href = redirect; // redirect ê°’ì´ ìˆìœ¼ë©´ ê·¸ ê²½ë¡œë¡œ, ì—†ìœ¼ë©´ ê¸°ë³¸ í˜ì´ì§€ë¡œ
                    } else {
                        window.location.href = "/main";
                    }
                    
                } else {
                    alert(data.message || 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (err) {
                alert('ë¡œê·¸ì¸ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });
    });
</script>
```

### ğŸ“Œ 0-7. ë¡œê·¸ì¸ ì„œë¹„ìŠ¤ êµ¬í˜„ (referrer)
- ë§¤í¼ì—ì„œ ìœ ì €ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê³  ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
- throw new Exception("ì˜ëª»ëœ ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ì…ë‹ˆë‹¤."); ì´ê±°ë¥¼ catchë¬¸ì˜ throw e; ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬(í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³)ë¡œ ë˜ì§„ë‹¤.
- ì´ë•Œ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œ ì¤‘ ë­ê°€ í‹€ë ¸ëŠ”ì§€ ì•ˆì•Œë ¤ì£¼ê³  ë‘˜ ì¤‘ í•˜ë‚˜ê°€ ì˜ëª»ë˜ì—ˆë‹¤ê³  ì•Œë ¤ì¤€ë‹¤.
```java
@Service
@Slf4j
public class LoginServiceImpl implements LoginService {

    @Autowired
    private UserMapper userMapper;

    @Override
    public User loginCheck(User input) throws Exception {
        User output = null;

        // ë¡œê·¸ì¸ ì‹œë„
        try {
            output = userMapper.login(input);
            if (output == null) {
                // ë¡œê·¸ì¸ ì‹¤íŒ¨
                throw new Exception("ì˜ëª»ëœ ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ ì…ë‹ˆë‹¤.");
            }
        } catch (Exception e) {
            log.error("User ë°ì´í„° ì¡°íšŒ(ë¡œê·¸ì¸) ì‹¤íŒ¨", e);
            throw e; // ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìœ„ì—ì„œ ìƒì„±í•œ ìƒˆë¡œìš´ ì—ëŸ¬ ì „ë‹¬
        }

        return output;
    }
}
```

### ğŸ“Œ 0-8. ë¡œê·¸ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ (ì–´ë–»ê²Œ ì„¸ì…˜ì€ ìƒì„±ë˜ê³  JSESSIONID ì¿ í‚¤ê°€ ìœ ì§€ë˜ëŠ”ê°€)
- jsì—ì„œ ë¡œê·¸ì¸ ì„±ê³µì‹œ ì´ì „í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ì„¤ì •ì´ ìˆê³  ì´ë•Œ íƒ€ì„ë¦¬í”„ë¡œ referrerê°’ì„ ë°›ìœ¼ë¯€ë¡œ í•´ë‹¹ê°’ì„ requestì—ì„œ ì¶”ì¶œí•´ì„œ ëª¨ë¸ê°ì²´ì— ë„£ì–´ë‘”ë‹¤ã…. ë§Œì•½ referrerê°€ nullì´ë¼ë©´ ê¸°ë³¸ í˜ì´ì§€ë¥¼ mainìœ¼ë¡œ ì„¤ì •í•˜ì—¬ mainí˜ì´ì§€ë¡œ ëŒì•„ê°ˆ ìˆ˜ ìˆê²Œ ì„¤ì •í•œë‹¤.
- ë°±ì—”ë“œì—ì„œëŠ” í”„ë¡ íŠ¸ì—ì„œ í•˜ëŠ” ê¸°ë³¸ì ì¸ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì‹œí–‰í•œ í›„ì— dtoì— í•´ë‹¹ ì•„ì´ë””ì™€ ë¹„ë²ˆì„ ê°€ì§„ ê°ì²´ë¥¼ ë‹´ì•„ë³´ê³  ì—†ìœ¼ë©´ jsë¡œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê³  ìˆìœ¼ë©´ ì„¸ì…˜ì„ ìƒì„±í•˜ê³  jsì— ì„±ê³µí–ˆìŒì„ ì•Œë¦°ë‹¤.
- setSessionì— ìƒˆë¡œìš´ ê°’ì„ ë§Œë“¤ë©´ ê·¸ ì¦‰ì‹œ JSESSIONID ì¿ í‚¤ê°€ ìƒì„±ë˜ê³  ì„œë²„ëŠ” HTTP Response Headerì— ì´ ì¿ í‚¤ë¥¼ ìë™ìœ¼ë¡œ í¬í•¨í•´ì„œ ë¸Œë¼ìš°ì €ì— ì „ì†¡í•œë‹¤. ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ ë°›ìë§ˆì ê·¸ ì»´í“¨í„°ì˜ ë¸Œë¼ìš°ì € í´ë”ì— ë„£ì–´ë‘ê³  ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ ì´ë¥¼ ì§€ìš´ë‹¤.
- ì´í›„ í•´ë‹¹ ì‚¬ì´íŠ¸ì— ì ‘ì†í• ë•Œë§ˆë‹¤ ë¸Œë¼ìš°ì €ëŠ” ê·¸ í´ë”ì—ì„œ í•´ë‹¹ ì¿ í‚¤ë¥¼ ë§¤ ìš”ì²­ë§ˆë‹¤ ì„œë²„ë¡œ ì „ë‹¬í•œë‹¤.
- ë¡œê·¸ì¸ ì²˜ë¦¬ ìš”ì²­ì— ëŒ€í•œ ë‹µì€ mapê°ì²´ë¡œ ì£¼ì–´ì§€ë©° jsëŠ” ì´ë¥¼ ë°›ì•„ì„œ js ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤.
```java
@@Controller
public class LoginController {

    @Autowired
    private LoginService loginService;
    
    // ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í¬í•¨í•œ ë¡œê·¸ì¸ í˜ì´ì§€ ìš”ì²­
    @GetMapping("/login")
        public String loginPage(HttpServletRequest request, Model model) {
        String referrer = request.getHeader("Referer"); // ëŒ€ë¬¸ì "Referer" ì‚¬ìš©ì´ ë§ìŒ
        if (referrer != null) {
            model.addAttribute("referrer", referrer); 
        } else {
            referrer = "/main"; 
        }
        
        return "login/index";
    }

    // ë¡œê·¸ì¸ ì²˜ë¦¬
    @PostMapping("/login")
    public Map<String, Object> login(
            HttpServletRequest request,
            @RequestParam("user_email") String userEmail,
            @RequestParam("user_password") String userPassword) {

        Map<String, Object> result = new HashMap<>();

        // ë°±ì—”ë“œ ìœ íš¨ì„± ê²€ì‚¬
        if (userEmail == null || userEmail.trim().isEmpty()) {
            result.put("result", "fail");
            result.put("message", "ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return result;
        }

        if (!userEmail.matches("^[\\w.-]+@[\\w.-]+\\.[a-zA-Z]{2,}$")) {
            result.put("result", "fail");
            result.put("message", "ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return result;
        }

        if (userPassword == null || userPassword.trim().isEmpty()) {
            result.put("result", "fail");
            result.put("message", "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
            return result;
        }

        // DBì—ì„œ íšŒì›ì •ë³´ ì¼ì¹˜ ì—¬ë¶€ ê²€ì‚¬
        User loginUser = new User();
        loginUser.setUserEmail(userEmail);
        loginUser.setUserPassword(userPassword);

        // ì¡´ì¬í•˜ëŠ” ìœ ì €ë¥¼ ë‹´ì„ ê°ì²´
        User member = null;
        
        try {
            // ë¡œê·¸ì¸ ì‹œë„
            member = loginService.loginCheck(loginUser);

            // ë¡œê·¸ì¸ ì„±ê³µ ì„¸ì…˜ì— íšŒì› ì •ë³´ ì €ì¥
            HttpSession session = request.getSession();
            session.setAttribute("memberInfo", member);

            result.put("result", "success");
            result.put("message", "ë¡œê·¸ì¸ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.");
            return result;

        } catch (Exception e) {
            // ì„œë¹„ìŠ¤ì—ì„œ ë˜ì§„ ì˜ˆì™¸ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´, ì•„ì˜ˆ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ë©”ì‹œì§€ ì‚¬ìš©
            result.put("result", "fail");
            result.put("message", e.getMessage() != null ? e.getMessage() : "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return result;
        }
    }
}
```

# ğŸ“Œ 1. restful api
### ğŸ“Œ 1-1. @RestControllerëŠ” ìë°” ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë°”ê¾¸ì–´ ë¦¬í„´í•œë‹¤.
- @RestControllerê°€ ë¶™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‘ë‹µ responsebodyì— í•´ë‹¹ ê°ì²´ ë‚´ë¶€ì˜ êµ¬ì¡°ë¥¼ í‚¤, ê°’ ìŒìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ JSONìœ¼ë¡œ ë³€í™˜ í•œí›„ ìš”ì²­ì„ ë³´ë‚¸ ê³³ì— ëŒë ¤ì¤€ë‹¤.
- í•˜ë‚˜ì˜ ìš”ì²­ë‹¹ í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì‘ë™í•˜ë¯€ë¡œ responsebodyì— ë‚´ìš©ì´ ì¤‘ì²©ë  ê±±ì •ì€ ì•ˆí•´ë„ ëœë‹¤.
- /apiëŠ” ë°ì´í„°ë§Œ ì£¼ê³ ë°›ëŠ” REST APIìš© URLì— ë¶™ì´ëŠ” ê²Œ ê´€ë¡€ì´ë©° ì‚¬ëŒì´ ë³´ëŠ” í™”ë©´ì€ êµ¬ì„±í•˜ëŠ” html í˜ì´ì§€ì™€ êµ¬ë¶„í•œë‹¤.
- REST: "REpresentational State Transfer"ì˜ ì•½ìë¡œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ë°©ì‹ì„ í‘œì¤€í™”í•œ ê²ƒì´ë‹¤.
- REST API URLì€ "ë‚´ê°€ ì–´ë–¤ ë°ì´í„°(ìì›)ì— ì ‘ê·¼í•˜ê³  ì‹¶ë‹¤"ë¥¼ ë§í•´ì£¼ëŠ” ì£¼ì†Œì´ë‹¤.
```java
@GetMapping("/api/my_calc")
    public Map<String, Object> plus(@RequestParam("x") int x, @RequestParam("y") int y) {
        /** 1) íŒŒë¼ë¯¸í„° ìœ íš¨ì„± ê²€ì‚¬ */
        if (x < 0 || y < 0) {
            throw new IllegalArgumentException("xì™€ yëŠ” ëª¨ë‘ 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.");
        }

        /** 2) ì²˜ë¦¬í•´ì•¼í•  ë¡œì§ ìˆ˜í–‰ (DBì—°ë™ ë“±ì„ ê°€ì •) */
        int z = x + y;

        /** 3) ì‘ë‹µ ê²°ê³¼ë¬¼ êµ¬ì„± */
        Map<String, Object> output = new LinkedHashMap<String, Object>();
        output.put("x", x);
        output.put("y", y);
        output.put("z", z);

        /** 4) ì¶œë ¥ í˜•ì‹ êµ¬ì„± */
        Map<String, Object> result = new LinkedHashMap<String, Object>();
        result.put("status", 200);
        result.put("message", "OK");
        result.put("item", output);
        result.put("timestamp", LocalDateTime.now().toString());

        return result;
    }
```

### ğŸ“Œ 1-2. thunder clientë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°
- **ì¬ë” í´ë¼ì´ì–¸íŠ¸(Thunder Client)**ëŠ” VS Codeì—ì„œ ê°„í¸í•˜ê²Œ API í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆëŠ” í™•ì¥ í”„ë¡œê·¸ë¨ì´ë‹¤.
- get, pust, put, deleteë¡œ ë§¤í•‘ëœ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì„ í…ŒìŠ¤íŠ¸í•´ë³¼ ìˆ˜ ìˆë‹¤.
- ìš”ì²­ì„ ë§Œë“  í›„ì— ë°©ì‹ê³¼ íŒŒë¼ë¯¸í„°ë¥¼ ë„£ìœ¼ë©´ ì•„ë˜ì²˜ëŸ¼ ì£¼ì†Œë¥¼ ë§Œë“¤ì–´ì„œ ìš”ì²­ì„ í•œë‹¤.
- http://127.0.0.1:8080/api/my_calc?x=100&y=200
- ì´ëŠ” get ë°©ì‹ì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ í†µí•´ ìš”ì²­ì„ ë³´ëƒˆì„ ë•Œ ìë™ì™„ì„±ë˜ëŠ” ì£¼ì†Œì´ë‹¤.
- postë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤ë©´ bodyì— ê°’ì„ ë„£ì–´ë„ ëœë‹¤.
- postì—ì„œ valueë¥¼ ì„ íƒí•œ í›„ xê°’ê³¼ yê°’ì„ ì§‘ì–´ë„£ëŠ”ë‹¤.
- ì•„ë˜ëŠ” ìš”ì²­ì„ ë§Œë“¤ê³  ë³´ëƒˆì„ë•Œ ë˜ëŒì•„ì˜¨ ê²°ê³¼ê°’ì´ë‹¤.
```json
{
  "status": 200,
  "message": "OK",
  "item": {
    "x": 300,
    "y": 500,
    "z": -200
  },
  "timestamp": "2025-06-24T11:41:09.080662"
}
```

### ğŸ“Œ 1-3. íƒ€ì„ë¦¬í”„ë¡œ ë™ì ìœ¼ë¡œ ì£¼ì†Œë³€í™˜
- ThymeleafëŠ” [[ ... ]]ë¼ëŠ” **í‘œí˜„ì‹(Expression)**ì„ í†µí•´ ê·¸ ì•ˆì˜ ë‚´ìš©ì„ ì²˜ë¦¬í•´ì„œ ì‹¤ì œ ê°’ìœ¼ë¡œ ë³€í™˜í•œë‹¤.
- ì´ëŠ” th:herf ì²˜ëŸ¼ thê°€ ì•ì— ë¶™ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë‘ê²¹ì˜ ê´„í˜¸ë¡œ ì´ë¥¼ í‘œì‹œí•´ì¤€ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.
```js
try {
    result = await fetchHelper.get("[[@{/api/my_calc}]]", {
        x: x,
        y: y
    }); 
}
```

