# ğŸ“Œ 0. ë³´ìŠ¤ í´ë¡ ì½”ë”© í”„ë¡œì íŠ¸
### ğŸ“Œ 0-1. ë¡œê·¸ì¸ ì•ˆë˜ì—ˆì„ ë•Œ ë¦¬ë‹¤ì´ë ‰íŠ¸, ì—ëŸ¬ í‘œí˜„ í†µì¼
- ëª¨ë“  ì—ëŸ¬ë¥¼ jsonì‘ë‹µì—ì„œ ì˜ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì—ëŸ¬ë¡œì§ì„ ìš°ì„  ìˆ˜ì •í•˜ì˜€ë‹¤.
- ì»¤ìŠ¤í…€ ì—ëŸ¬ì¼ ê²½ìš° ì—ëŸ¬ì˜ ìƒíƒœì½”ë“œì™€ ì»¤ìŠ¤í…€í•œ ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•˜ë„ë¡ í•œë‹¤.
- ê·¸ë¦¬ê³  apiì—ì„œ ì„±ê³µì—¬ë¶€ë¥¼ íŒë‹¨í•˜ëŠ” booleanì„ successë¡œ ì§€ì •í•˜ì—¬ ì—ëŸ¬ë¥¼ js ìª½ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.
```java
@ExceptionHandler(Exception.class)
    public ResponseEntity<ResponseDTO> restExceptionHandler(Exception e) {
        log.error(e.getMessage(), e);

        int status = HttpStatus.INTERNAL_SERVER_ERROR.value(); // ìì²´ ì •ì˜í•œ ì—ëŸ¬ê°€ ì•„ë‹ ê²½ìš° 500ì—ëŸ¬ë¡œ ì •ë¦¬
        String message = e.getMessage(); // ì˜ˆì™¸ ë©”ì„¸ì§€

        // CustomExceptionì´ ë°œìƒí•œ ê²½ìš°, ìƒíƒœ ì½”ë“œì™€ ë©”ì„¸ì§€ë¥¼ ê°€ì ¸ì˜¤ê¸°
        if (e instanceof CustomException) { 
            CustomException customException = (CustomException) e;
            status = customException.getStatus().value(); 
            message = customException.getMessage(); // ì˜ˆì™¸ ë©”ì„¸ì§€
        }

        ResponseDTO errorResponse = ResponseDTO.builder()
                .status(status) // ìƒíƒœì½”ë“œ
                .success(false) // ì„±ê³µ ì—¬ë¶€
                .message(message) // ì˜ˆì™¸ ë©”ì„¸ì§€
                .error(HttpStatus.valueOf(status).getReasonPhrase()) // ì—ëŸ¬ í´ë˜ìŠ¤ ì´ë¦„
                .timestamp(LocalDateTime.now()) // í˜„ì¬ ì‹œê°„
                .build(); 

        return ResponseEntity.status(status).body(errorResponse); 
    }
```
- ë°±ì—”ë“œ ë‹¨ì—ì„œ ì¸ì¦ì •ë³´ê°€ ì—†ìœ¼ë©´ í”„ë¡ íŠ¸ì—”ë“œë¡œ ì—ëŸ¬ë¥¼ ë˜ì§„ë‹¤.
- ê·¸ë¦¬ê³  ëª¨ë“  ì—ëŸ¬ì²˜ë¦¬ë¥¼ ê°ì²´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ ë¦¬í„´í•˜ë˜ ê±¸ ê·¸ëƒ¥ í•œ ë¬¸ì¥ìœ¼ë¡œ ë‹¤ í‰ì³¤ë‹¤.
- í•´ë‹¹ ì²˜ë¦¬ë¥¼ ë¡œê·¸ì¸, ì •ë³´ìˆ˜ì •ì—ì„œ ì§„í–‰í•˜ì˜€ë‹¤.
```java
if (userInfo == null) {         // **í•„ìš”** ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰
        throw new UnauthorizedException("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
    }
```
- ë§Œì•½ í”„ë¡ íŠ¸ì—ì„œ 401ì—ëŸ¬ê°€ ë„˜ì–´ì˜¤ë©´ ë¡œê·¸ì¸í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•œë‹¤.
```java
try {
    // ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì •ë³´ ë°›ì•„ì˜¤ê¸°
    const response = await fetch('/api/profile');

    // ë¡œê·¸ì¸ ì•ˆë˜ì–´ìˆìœ¼ë©´ 401 ì—ëŸ¬ -> ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    if (response.status == 401) {
        window.location.href = '/login';
    }
    // ê·¸ ì™¸ ì—ëŸ¬ ì²˜ë¦¬
    if (!response.ok) {
        throw new Error("íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
    }

    // JSON ì‘ë‹µ íŒŒì‹±
    const responseData = await response.json();

    // ì„±ê³µì‹œ ê°’ ì„¸íŒ…
    if (responseData.success) {
        fillProfileForm(responseData.data);
    } else {
        clearProfileForm(); // ì‹¤íŒ¨ì‹œ í¼ ì´ˆê¸°í™”
        alert(responseData.message || "íšŒì›ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
    }
} catch (e) {
    clearProfileForm(); // ì—ëŸ¬ì‹œ í¼ ì´ˆê¸°í™”
    alert(e.message);
}
```

### ğŸ“Œ 0-2. Unexpected token '<', "<!DOCTYPE "... is not valid JSON
- jsonì„ ë°˜í™˜í•´ì•¼í•  restControllerì˜ ì‘ë‹µì— controllerHandlerê°€ ë°˜ì‘í•´ì„œ htmlì„ ë°˜í™˜í•˜ì—¬ ë¬¸ì œë°œìƒ
- controllerHandlerì— ì•„ë˜ ë¡œì§ ì¶”ê°€
```java
String uri = request.getRequestURI();
if (uri.startsWith("/api/")) {
    ResponseDTO errorResponse = ResponseDTO.builder()
            .status(status)
            .error(error)
            .message(message)
            .build();

return ResponseEntity.status(status).body(errorResponse);
}
```

### ğŸ“Œ 0-3. edit_js.js:1 Uncaught SyntaxError: Identifier 'avatarEditBtn' has already been declared (at edit_js.js:1:1)
- ìŠ¤í¬ë¦½íŠ¸ ì¤‘ë³µë¬¸ì œ
- fragmentì— ë“¤ì–´ìˆëŠ” js scriptë¥¼ ëª¨ë¥´ê³  fragmentë¥¼ ì‚½ì…í•˜ê³  í•œë²ˆ ë” ì‚½ì…í•˜ì˜€ë‹¤. 
- ì´ë¥¼ ì§€ì›Œì„œ í•´ê²°í•˜ì˜€ë‹¤.

### ğŸ“Œ 0-4. ì •ë³´ìˆ˜ì • ëˆ„ë¥´ë©´ ì„¸ì…˜ì´ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œ
- ê²°êµ­ mapperë¬¸ì œì˜€ë‹¤. ë­”ê°€ ì‹¤í–‰ì´ ì•ˆë ë•Œ ì—ëŸ¬ë¡œê·¸ë§Œ ë³¼ê²Œ ì•„ë‹ˆë¼ ì¼ë°˜ ë¡œê·¸ë¥¼ ë´ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ sqlì´ë‚˜ ë‚´ë¶€ ë¡œì§ì´ ì‘ë™í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•  í•„ìš”ê°€ ìˆë‹¤.
- md5ë¥¼ ì…€ë ‰íŠ¸ì—ì„œ ê±¸ë©´ ì•”í˜¸í™”ëœê±¸ í•œë²ˆ ë” ì•”í˜¸í™”í•´ì„œ ì°¾ì•„ì„œ ë…¼ë¦¬ê°€ ê¼¬ì¸ë‹¤. select í• ë•ŒëŠ” ê·¸ëƒ¥ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¡°íšŒí•´ì•¼í•œë‹¤.
```java
    /**
     * íšŒì›ì •ë³´ ì¡°íšŒ (í•„ìˆ˜ì •ë³´ë¡œë§Œ)
     * @param userInfo ì„¸ì…˜ì—ì„œ ê°€ì ¸ì˜¨ User ê°ì²´
     * @return DBì—ì„œ ê°€ì ¸ì˜¨ í•´ë‹¹ íšŒì›ì˜ User ê°ì²´ 
     */
    @Select("SELECT * FROM users WHERE user_id = #{userId} AND user_email = #{userEmail} AND user_password = MD5(#{userPassword})")
    @ResultMap("UserMap")
    User getUserProfile(User userInfo) throws Exception;
```
- ì—ëŸ¬ ë¡œê·¸ë¥¼ ë³¼ê²Œ ì•„ë‹ˆë¼ ì „ì²´ ë¡œê·¸ë¥¼ ë³´ê³  sqlì´ë‚˜ ê°’ë“¤ì´ ì˜ ë°˜í™˜ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í–ˆì–´ì•¼ í•œë‹¤.
```java
[WARN ] 25-07-03 16:43:07 [ExceptionHandlerExceptionResolver:247] - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource %EA%B6%8C%EB%96%99%EB%95%A1%EC%96%BC%EA%B5%B4%EC%82%AC%EC%A7%84.]
[DEBUG] 25-07-03 16:43:10 [getUserProfile:135] - ==>  Preparing: SELECT * FROM users WHERE user_id = ? AND user_email = ? AND user_password = MD5(?)
[DEBUG] 25-07-03 16:43:10 [getUserProfile:135] - ==> Parameters: 2(Integer), hyungyugod@naver.com(String), 803518b88de5d173b029d371d82ad00e(String)
[INFO ] 25-07-03 16:43:10 [sqlonly:228] - SELECT * FROM users WHERE user_id = 2 AND user_email = 'hyungyugod@naver.com' AND user_password = MD5('803518b88de5d173b029d371d82ad00e')

[INFO ] 25-07-03 16:43:10 [resultsettable:610] - 
|--------|-----------|--------------|----------|------------|-----------|---------------|-------------|--------------|----------------------|-----------------|--------------|---------|-----------|---------|----------|-------|
|user_id |user_email |user_password |user_name |user_gender |user_phone |user_birthdate |user_address |user_postcode |user_specific_address |user_profile_img |required_term |sms_term |email_term |reg_date |edit_date |is_out |
|--------|-----------|--------------|----------|------------|-----------|---------------|-------------|--------------|----------------------|-----------------|--------------|---------|-----------|---------|----------|-------|
|--------|-----------|--------------|----------|------------|-----------|---------------|-------------|--------------|----------------------|-----------------|--------------|---------|-----------|---------|----------|-------|
```

### ğŸ“Œ 0-5. Uncaught (in promise) TypeError: Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'
- buttonì˜ type submitì€ í¼íƒœê·¸ ì•ˆì—ìˆì„ë•Œë§Œ ìœ íš¨í•˜ë‹¤.
- ê¸°ì¡´ì— div íƒœê·¸ë¡œ ê°ì‹¸ë’€ë˜ ê²ƒì„ formíƒœê·¸ë¡œ ë°”ê¾¸ì—ˆë‹¤.
```html
<!-- ìˆ˜ì • ì „ -->
<div class="profile-edit-form">
    ...
    <button type="submit" class="confirm-btn">í™•ì¸</button>
</div>
<!-- ìˆ˜ì • í›„ -->
<form class="profile-edit-form">
    ...
    <button type="submit" class="confirm-btn">í™•ì¸</button>
</form>
```

### ğŸ“Œ 0-6. enum íƒ€ì…ì´ë©´ ëª¨ë“  ë¡œì§ì—ì„œ í•´ë‹¹ ì†ì„±ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ë‚¨, ì—¬ enum íƒ€ì…ì¸ë° valueë¥¼ male, femaleë¡œ í•´ë‘ì—ˆì—ˆë‹¤.
```js
if (member.userGender === "ë‚¨" || member.userGender === "ì—¬") {
        document.querySelector('input[name="gender"][value="male"]').checked = member.userGender === "ë‚¨";
        document.querySelector('input[name="gender"][value="female"]').checked = member.userGender === "ì—¬";
    }
```

### ğŸ“Œ 0-7. 09ë¥¼ ìˆ«ìë¡œ ì¸ì‹í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ
- ìˆ«ìê°€ 09 ì´ëŸ°ì‹ìœ¼ë¡œ dbì— ë“¤ì–´ìˆì–´ì„œ htmlì˜ String value ê°’ê³¼ ë¹„êµí–ˆì„ë•Œ ë¹„êµí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ìˆì–´ì„œ String(Number(member.birthMonth)); ë¡œ ë¹„êµë¥¼ ì‰½ê²Œ í•˜ì˜€ë‹¤.
```js
if (member.birthMonth) document.querySelector('select[name="birthMonth"]').value = String(Number(member.birthMonth));
else document.querySelector('select[name="birthMonth"]').value = "";

if (member.birthDay) document.querySelector('select[name="birthDay"]').value = String(Number(member.birthDay));
else document.querySelector('select[name="birthDay"]').value = "";
```

### ğŸ“Œ 0-8. ì„œë²„ í¼ ì œì¶œí–ˆì„ë•Œ ì—ëŸ¬
- í”„ë¡œí•„ ì‚¬ì§„ ê²½ë¡œê°€ ì›ë˜ dbì— ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ìˆì—ˆì–´ì•¼ í•œë‹¤. 
- í•œì°¸ë™ì•ˆ ì •ë³´ìˆ˜ì •ì´ ì•ˆë˜ì–´ì„œ í—¤ë©”ì—ˆëŠ”ë° ì‚¬ì§„ urlì„ ì œëŒ€ë¡œ ë„£ìœ¼ë‹ˆê¹Œ ë°”ë¡œ í•´ê²°ë˜ì—ˆë‹¤. 

### ğŸ“Œ 0-9. ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì • ì•ˆë˜ëŠ” ì˜¤ë¥˜
- ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •ì´ ì•ˆë˜ì–´ì„œ ë‹¹í™©í–ˆëŠ”ë° ë¹„ë°€ë²ˆí˜¸ë¥¼ ë°›ì•„ë†“ê³  ì¸ìë¡œ ì£¼ì§€ ì•Šê³  ìˆì—ˆë‹¤.
- userInfo.setUserPassword(newPassword); ë¡œì§ì„ ìˆ˜ì •í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.
```java
Transactional
    @Override
    public void changeUserPassword(User user, String newPassword) throws Exception {
        
        User userInfo = new User();
        userInfo.setUserId(user.getUserId());
        userInfo.setUserEmail(user.getUserEmail());
        userInfo.setUserPassword(newPassword); // ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •

        int updated = userMapper.updateUserPassword(userInfo);
        if (updated == 0) {
            throw new InternalServerErrorException("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëŒ€ìƒì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
```