# ğŸ“Œ 0. react ajax-crud
### ğŸ“Œ 0-1. ajax ì—°ë™
- "proxy": "http://localhost:8080" ì´ëŠ” fetch("/departments") í˜¸ì¶œí•˜ë©´ http://localhost:8080/departmentsë¡œ ìš”ì²­ì´ ì „ë‹¬ë˜ë„ë¡ ì¤‘ê³„í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.
- "start": "react-scripts start | hossam-server": ë¦¬ì•¡íŠ¸ ê°œë°œ ì„œë²„ì˜ ì¶œë ¥ì´ hossam-serverë¡œ ì „ë‹¬ëœë‹¤. ì¦‰ ë¦¬ì•¡íŠ¸ ê°œë°œ ì„œë²„ì˜ ì½˜ì†” ë¡œê·¸/ì¶œë ¥ ê²°ê³¼ê°€ **ê·¸ëŒ€ë¡œ hossam-server í”„ë¡œê·¸ë¨ì˜ â€œì…ë ¥â€**ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ëœë‹¤.
- ì´ë•Œ yarn startë¥¼ ì‹¤í–‰í•˜ë©´ "react-scripts start | hossam-server" ì´ ëª…ë ¹ ì „ì²´ê°€ ì‹¤í–‰ëœë‹¤.
```json
"proxy": "http://localhost:8080",
"scripts": {
    "start": "react-scripts start | hossam-server", 
}
```
- ê·¸ë¦¬ê³  yarn + ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ì˜ í‚¤ê°’ì„ ì…ë ¥í•˜ë©´ ì˜¤ë¥¸ìª½ì˜ ëª…ë ¹ì–´ë“¤ì´ ì‹¤í–‰ëœë‹¤. í•˜ì—¬ yarn startë¡œ ë°±ì—”ë“œì™€ ë¦¬ì•¡íŠ¸ ì„œë²„ë¥¼ ë‘ê°œ ë‹¤ ê°€ë™í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.
```json
"scripts": {
    "start": "react-scripts start | hossam-server",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
}
```

### ğŸ“Œ 0-2. í•™ê³¼ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
- useEffectëŠ” ë‘ë²ˆì§¸ ì¸ì ì† ë°°ì—´ ë‚´ë¶€ê°’ì´ ë°”ë€”ë•Œë§ˆë‹¤ ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í™”ë©´ì„ ì¬ëœë”ë§í•œë‹¤.
- ì´ë•Œ ì²˜ìŒ ë¦¬ìŠ¤íŠ¸ë¡œ getìš”ì²­ì„ ë³´ë‚´ë©´ì„œ keywordë¥¼ ì£¼ëŠ”ë° í‚¤ì›Œë“œê°€ í¬í•¨ëœ(like) í•™ê³¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°±ì—”ë“œì—ì„œ ë°ì´í„°ë¡œ ë°›ì•„ì˜¨ë‹¤.
- ì´ë•Œ 2ë²ˆì§¸ ì¸ì ë°°ì—´ ë‚´ë¶€ì— keyword ê°’ì„ ì£¼ë©´ keyword ê°’ì´ ë°”ë€”ë•Œë§ˆë‹¤ í•´ë‹¹ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë©´ì„œ í•´ë‹¹ í‚¤ì›Œë“œë¡œ getìš”ì²­ì„ ë³´ë‚´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°›ì•„ì˜¤ê²Œ ëœë‹¤.
- keywordê°’ì€ useCallbackì— ì˜í•´ í•œë²ˆ ë¡œë“œ ë˜ê³  ë°”ë€Œì§€ ì•ŠëŠ” onSearchSubmitê°ì²´ë¥¼ í™œìš©í•˜ì—¬ í¼ì´ submitë˜ì—ˆì„ë•Œ input íƒœê·¸ì˜ ê°’ì„ í‚¤ì›Œë“œë¡œ ì„¤ì •í•˜ê²Œ ëœë‹¤.
- `<Link to={/view/${v.id}}>{v.dname}</Link>` ì—ì„œ ë§í¬ë¥¼ í´ë¦­í•´ë„ routerê°€ app.js ì— ìˆìœ¼ë‹ˆê¹Œ ê±°ê¸°ì„œ ê¸¸ì„ ì°¾ì•„ì„œ í˜ì´ì§€ë¥¼ ì´ë™í•œë‹¤.
- ëª¨ë“  í˜ì´ì§€ê°€ ajax ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  í•œë²ˆ ë¡œë“œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ëª¨ë“  ìƒíƒœê°’ì—ëŠ” ê¸°ë³¸ê°’ì„ ë„£ì–´ë‘ì–´ì•¼í•œë‹¤.
```js
const DepartmentList = memo(() => {
    const [data, setData] = useState([]);
    const [keyword, setKeyword] = useState('');
    const [loading, setLoading] = useState(false);
    const searchInputRef = useRef();

    useEffect(() => {
        (async () => {
            let result = null;
            setLoading(true);

        try {
            result = await fetchHelper.get('/departments', {
            dname_like: keyword,
            });
        } catch (e) {
            console.error(e);
            alert(e.message);
            return;
        } finally {
            setLoading(false);
        }
            setData(result.item || []);
        })();
    }, [keyword]);

    const onSearchSubmit = useCallback((e) => {
        e.preventDefault();
        setKeyword(searchInputRef.current.value.trim());
    }, []);

    return (
        <DepartmentListContainer>
        <h2>í•™ê³¼ëª©ë¡</h2>
        <Spinner loading={loading} />
        <form className="search-form" onSubmit={onSearchSubmit}>
            <input type="search" ref={searchInputRef} placeholder="í•™ê³¼ëª…ì„ ê²€ìƒ‰" />
            <Buttons>
                <button type="submit">ê²€ìƒ‰</button>
                <Link to="/add">ì‹ ê·œ í•™ìƒ ë“±ë¡</Link>
            </Buttons>
        </form>
        <Table>
            <thead>
                <tr>
                    <th>í•™ê³¼ë²ˆí˜¸</th>
                    <th>í•™ê³¼ëª…</th>
                    <th>ìœ„ì¹˜</th>
                    <th>ì „í™”ë²ˆí˜¸</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ì„¤ë¦½ë…„ë„</th>
                    <th>í™ˆí˜ì´ì§€</th>
                </tr>
            </thead>
            <tbody>
            {data &&
                data.map((v, i) => (
                <tr key={v.id}>
                    <td>{v.id}</td>
                    <td>
                    <Link to={`/view/${v.id}`}>{v.dname}</Link>
                    </td>
                    <td>{v.loc}</td>
                    <td>
                    {v.phone && (
                        <a href={`tel:${v.phone}`}>{v.phone}</a>
                    )}
                    </td>
                    <td>
                    {v.email && (
                        <a href={`mailto:${v.email}`}>{v.email}</a>
                    )}
                    </td>
                    <td>{v.established}</td>
                    <td>
                    {v.homepage && (
                        <a href={v.homepage} target="_blank" rel="noopener noreferrer">
                        {v.homepage}
                        </a>
                    )}
                    </td>
                </tr>
                ))}
            </tbody>
        </Table>
        </DepartmentListContainer>
    );
}
```

### ğŸ“Œ 0-3. í•™ê³¼ ì •ë³´ ìˆ˜ì •
- **useNavigate**ì™€ `<Link />` ë‘˜ ë‹¤ React Routerì—ì„œ â€œí˜ì´ì§€ ì´ë™â€ì— ì‚¬ìš©ë˜ë¯€ë¡œ ì“°ì„ìƒˆë¥¼ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆë‹¤.
- useNavigateëŠ” í”„ë¡œê·¸ë˜ë° ì ìœ¼ë¡œ ìë™ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ì´ë™í•˜ê²Œ í•´ì£¼ëŠ” ë¦¬ì•¡íŠ¸ í›…ì´ê³  LinkëŠ” ì‚¬ìš©ìê°€ í´ë¦­í•´ì„œ ì§ì ‘ ì´ë™í•˜ëŠ” ë§í¬ì´ë‹¤.
- React RouterëŠ” ì•± ì „ì²´ë¥¼ `<Router>` ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ê³  ë‚´ë¶€ì ìœ¼ë¡œ **ë¼ìš°íŒ… ìƒíƒœ(í˜„ì¬ ìœ„ì¹˜, íˆìŠ¤í† ë¦¬ ë“±)**ë¥¼ Contextë¡œ ê´€ë¦¬í•œë‹¤.
- ì´ Contextì—ì„œ **í˜ì´ì§€ ì´ë™ì— í•„ìš”í•œ í•¨ìˆ˜(ì˜ˆ: navigate)**ì™€ í˜„ì¬ ê²½ë¡œ ë“±ì˜ ì •ë³´ë¥¼ ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì–¸ì œë“  êº¼ë‚´ ì“¸ ìˆ˜ ìˆê²Œ í•œë‹¤.
- useNavigate í›…ì€ React Routerì˜ ë‚´ë¶€ Contextì—ì„œ SPA ë¼ìš°íŒ…ì— íŠ¹í™”ëœ â€œnavigate í•¨ìˆ˜â€ë¥¼ êº¼ë‚´ì™€ì„œ ë°˜í™˜í•´ì£¼ëŠ” í›…ì´ë‹¤.
- Reactì˜ â€œí›…(Hook)â€ì€  ë‹¨ìˆœíˆ â€œì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ, context ë“± React ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜â€ë¥¼ ì˜ë¯¸í•œë‹¤.
- ì´ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ì™€ëŠ” ë³„ê°œë¡œ useNavigate()ë„ â€œë™ê¸°ì ìœ¼ë¡œâ€ ë™ì‘í•´ì„œ navigate í•¨ìˆ˜(ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ í•¨ìˆ˜)ë¥¼ ë°˜í™˜í•œë‹¤.
- useParamsëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ í˜„ì¬ URLì—ì„œ Path íŒŒë¼ë¯¸í„°(ì˜ˆ: /edit/:idì˜ id)ë¥¼ ì¦‰ì‹œ ë™ê¸°ì ìœ¼ë¡œ ë°˜í™˜í•´ì¤€ë‹¤.
- paramsëŠ” ëª¨ë“  ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ mapí˜•íƒœë¡œ ê°€ì§€ê³  ìˆìœ¼ë¯€ë¡œ params.idë¡œ íŠ¹ì • ì¿¼ë¦¬ìŠ¤íŠ¸ë§(id)ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

- navigate("/path", {replace: true})
â†’ history.replace ëŒ€ì‹  ì‚¬ìš©(ë’¤ë¡œê°€ê¸°ê°€ ì•ˆ ë‚¨ìŒ)
- navigate(-1)
â†’ window.history.go(-1) ì²˜ëŸ¼ ë’¤ë¡œê°€ê¸°
(ìˆ«ìë¥¼ ì£¼ë©´ ë¸Œë¼ìš°ì € íˆìŠ¤í† ë¦¬ì—ì„œ ì´ë™)
- state ì „ë‹¬:
navigate("/path", {state: {key: value}})
â†’ ë¼ìš°íŒ… ì‹œ ë°ì´í„° ì „ë‹¬ (location.stateë¡œ ë°›ì„ ìˆ˜ ìˆìŒ)
```js
const DepartmentEdit = memo(() => {
  // í˜ì´ì§€ ì´ë™ ì²˜ë¦¬ í•¨ìˆ˜ ìƒì„±
  const navigate = useNavigate();

  // URLë¡œë¶€í„° Path íŒŒë¼ë¯¸í„° ì¶”ì¶œ
  const params = useParams();

  // ë¡œë”© ìƒíƒœ ë³€ìˆ˜ ì„ ì–¸
  const [loading, setLoading] = useState(false);

  // í•™ê³¼ ë°ì´í„° ì €ì¥ìš© ìƒíƒœ ë³€ìˆ˜ ì„ ì–¸
  const [data, setData] = useState({});
```
- if (!params?.id) { return; } ë¶ˆí•„ìš”í•˜ê²Œ ì„œë²„ì— ë°ì´í„°ë¥¼ ìš”ì²­í•˜ì§€ ì•Šë„ë¡ ë¯¸ë¦¬ ì°¨ë‹¨í•˜ëŠ” ëª©ì ì´ë‹¤.
-  ë¼ìš°íŒ… contextê°€ ë°”ë€Œê±°ë‚˜, ë¶€ëª¨ ë¼ìš°í„°ê°€ ë³€ê²½ë˜ì–´ navigate í•¨ìˆ˜ê°€ â€œìƒˆ ê°ì²´â€ë¡œ ë°”ë€ŒëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆëŠ”ë° ì´ë•Œ navigateí•¨ìˆ˜ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì§€ ì•Šìœ¼ë©´ ìµœì‹ ì˜ navigateí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ useEffectì—ì„œ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•œë‹¤.
- `<button type="reset">ì´ˆê¸°í™”</button>` button typeì˜ resetì€ ëˆŒë ¸ì„ë•Œ í•´ë‹¹ í¼ ì•ˆì˜ ëª¨ë“  ì…ë ¥ í•„ë“œê°€ í¼ì´ ì²˜ìŒ ë¡œë“œë ë•Œì˜ ìƒíƒœë¡œ ëª¨ë‘ ë˜ëŒì•„ê°€ê²Œ í•œë‹¤.
- í¼ì„ ì œì¶œí•˜ë©´ navigateí•¨ìˆ˜ë¥¼ í†µí•´ í•™ê³¼ ì •ë³´ í˜ì´ì§€ë¡œ ì´ë™
```js
  // í•™ê³¼ ì •ë³´ ì¡°íšŒí•˜ê¸°
  useEffect(() => {
    if (!params?.id) {
      return;
    }

    (async () => {
      let result = null;
      setLoading(true);

      try {
        result = await fetchHelper.get(`/departments/${params.id}`);
      } catch (e) {
        console.error(e);
        alert(e.message);
        return;
      } finally {
        setLoading(false);
      }
      setData(result.item || {});
    })();
  }, [params.id]);

  // í¼ ì œì¶œ ì²˜ë¦¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  const handleSubmit = useCallback(async (e) => {
    e.preventDefault();

    try {
      regexHelper.value('#dname', 'í•™ê³¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.');
      regexHelper.value('#loc', 'ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
      regexHelper.value('#phone', 'ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
      regexHelper.value('#email', 'ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
      regexHelper.value('#established', 'ì„¤ë¦½ë…„ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
      regexHelper.value('#homepage', 'í™ˆí˜ì´ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”.');

      regexHelper.maxLength('#dname', 50, 'í•™ê³¼ëª…ì€ ìµœëŒ€ 50ìê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
      regexHelper.maxLength('#loc', 100, 'ìœ„ì¹˜ëŠ” ìµœëŒ€ 100ìê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
      regexHelper.maxLength('#phone', 20, 'ì „í™”ë²ˆí˜¸ëŠ” ìµœëŒ€ 20ìê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
      regexHelper.maxLength('#email', 100, 'ì´ë©”ì¼ì€ ìµœëŒ€ 100ìê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
      regexHelper.minLength('#established', 4, 'ì„¤ë¦½ë…„ë„ëŠ” ìµœì†Œ 4ìë¦¬ ìˆ«ìë¡œ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
      regexHelper.maxLength('#homepage', 200, 'í™ˆí˜ì´ì§€ URLì€ ìµœëŒ€ 200ìê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    } catch (e) {
      alert(e.message);
      e.element.focus();
      return;
    }

    setLoading(true);

    let result = null;

    try {
      result = await fetchHelper.put(`/departments/${params.id}`, e.currentTarget);
      alert('í•™ê³¼ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
    } catch (e) {
      console.error(e);
      alert(e.message);
    } finally {
      setLoading(false);
    }

    // Reactì—ì„œì˜ í™”ë©´ ì´ë™
    navigate(`/view/${result.item.id}`);
  }, [params.id, navigate]);

  return (
    <DepartmentEditContainer>
      <h2>í•™ê³¼ìˆ˜ì •</h2>
      <Spinner loading={loading} />
      <form id="my-form" onSubmit={handleSubmit}>
        <TableInput>
          <tbody>
            <tr>
              <th>í•™ê³¼ëª…</th>
              <td>
                <input type="text" name="dname" id="dname" placeholder="í•™ê³¼ëª…ì„ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.dname} />
              </td>
            </tr>
            <tr>
              <th>ìœ„ì¹˜</th>
              <td>
                <input type="text" name="loc" id="loc" placeholder="ìœ„ì¹˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.loc} />
              </td>
            </tr>
            <tr>
              <th>ì „í™”ë²ˆí˜¸</th>
              <td>
                <input type="text" name="phone" id="phone" placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.phone} />
              </td>
            </tr>
            <tr>
              <th>ì´ë©”ì¼</th>
              <td>
                <input type="email" name="email" id="email" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.email} />
              </td>
            </tr>
            <tr>
              <th>ì„¤ë¦½ë…„ë„</th>
              <td>
                <input type="number" name="established" id="established" placeholder="ì„¤ë¦½ë…„ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.established} />
              </td>
            </tr>
            <tr>
              <th>í™ˆí˜ì´ì§€</th>
              <td>
                <input type="url" name="homepage" id="homepage" placeholder="í™ˆí˜ì´ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”." defaultValue={data?.homepage} />
              </td>
            </tr>
          </tbody>
        </TableInput>
        <Buttons>
          <button type="submit">ë“±ë¡</button>
          <button type="reset">ì´ˆê¸°í™”</button>
        </Buttons>
      </form>
    </DepartmentEditContainer>
  );
});
```

# ğŸ“Œ 1. redux (ì•± ì „ì²´ì˜ ìƒíƒœ(state)ë¥¼ í•œ ê³³ì—ì„œ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” â€œì¤‘ì•™ ì €ì¥ì†Œâ€)
- Reduxì™€ React Routerì˜ Context: ë‘˜ ë‹¤ Reactì˜ Context APIë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•± ì „ì²´ì— â€œê³µí†µ ë°ì´í„°â€ë¥¼ ì „ë‹¬í•˜ê³ , ì–´ë””ì„œë“  ì‰½ê²Œ êº¼ë‚´ ì“¸ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” êµ¬ì¡°ì´ë‹¤.
- Context API: propsë¥¼ ì¼ì¼ì´ ë„˜ê¸°ì§€ ì•Šê³ ë„(=props drilling ë¬¸ì œ í•´ê²°) â€œì „ì—­ì ìœ¼ë¡œ ê°’ì„ ê´€ë¦¬â€í•˜ê³  ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë“  ì‰½ê²Œ ì½ê±°ë‚˜ ì“¸ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” React ë‚´ì¥ ë„êµ¬
- Provider : â€œê³µê¸‰ìâ€ MyContext.Providerë¡œ ì•±(ë˜ëŠ” í•˜ìœ„ íŠ¸ë¦¬)ì„ ê°ì‹¸ê³ , value propì— ê³µìœ í•  ë°ì´í„°ë¥¼ ì „ë‹¬
- Consumer : â€œì†Œë¹„ìâ€ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ useContext(MyContext)ë¡œ ê³µìœ í•œ ê°’ì„ ì‰½ê²Œ êº¼ë‚´ì„œ ì”€
```js
// 1. Context ìƒì„±
const ThemeContext = React.createContext('light');

// 2. ê³µê¸‰ì(Provider)ë¡œ ê°ì‹¸ê¸°
function App() {
  return (
    <ThemeContext.Provider value="dark">
      <Child />
    </ThemeContext.Provider>
  );
}

// 3. í•˜ìœ„ì—ì„œ ì†Œë¹„(Consumer)
function Child() {
  const theme = React.useContext(ThemeContext);
  return <div>í˜„ì¬ í…Œë§ˆ: {theme}</div>;
}
```
- Reduxì˜ dispatch: ì „ì—­ storeì— ì•¡ì…˜ì„ â€œì „ë‹¬â€í•´ ë¦¬ë“€ì„œë¥¼ í†µí•´ ìƒíƒœë¥¼ ë°”ê¿ˆ(ê¸€ë¡œë²Œ, ì™¸ë¶€)
- useState/useReducerì˜ dispatch/setter: ê°œë³„ ì»´í¬ë„ŒíŠ¸(í˜¹ì€ í•´ë‹¹ í›…ì˜ ì§€ì—­)ì—ì„œë§Œ ìƒíƒœë¥¼ ë°”ê¿ˆ(ë¡œì»¬, ë‚´ë¶€)

### ğŸ“Œ 1-1. redux slice, store
- `<Provider store={store}>`ëŠ” Reduxì˜ â€œì „ì—­ ìƒíƒœê´€ë¦¬ ê³µê°„(store)â€ì„ ì•± ì „ì²´ì— ê³µê¸‰í•˜ëŠ” Context Providerì´ë‹¤. ê·¸ëŸ¬ë©´ ì´ Provider ì•ˆì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ useSelector, useDispatch ë“±ìœ¼ë¡œ Redux store(context)ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤.
```js
// index.js
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <Provider store={store}>
    <BrowserRouter basename={Process.env.PUBLIC_URL}>
      <App />
    </BrowserRouter>
  </Provider>
);
```
- configureStore: redux-toolkitì—ì„œ store(ì „ì—­ ìƒíƒœ ì €ì¥ì†Œ)ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜ë¡œ ì—¬ëŸ¬ ê°œì˜ slice(ìƒíƒœê´€ë¦¬ ë‹¨ìœ„)ë¥¼ í•©ì³ í•˜ë‚˜ì˜ storeë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
- reducer: { CounterSlice } : storeì— â€œCounterSliceâ€ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ sliceì˜ ë¦¬ë“€ì„œë¥¼ ë“±ë¡, state.CounterSliceì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ëœë‹¤. (ì´ë¦„ì´ keyë¡œ ë“¤ì–´ê°)
- ìƒíƒœê´€ë¦¬ ë‹¨ìœ„ë‹ˆê¹Œ state. ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤.
- reduce: ì—¬ëŸ¬ ê°’ì„ í•˜ë‚˜ë¡œ â€˜ëˆ„ì í•˜ì—¬â€™ í•©ì¹˜ëŠ” ê³¼ì •(ì—¬ê¸°ì„œ ì¤„ì´ë‹¤ê°€ íŒŒìƒ) -> Reduxì—ì„œ ìƒíƒœ(state) ë³€í™”ëŠ” í•­ìƒ â€œì´ì „ ìƒíƒœâ€ì™€ â€œì•¡ì…˜â€ì„ â€œí•˜ë‚˜ì˜ ìƒˆ ìƒíƒœâ€ë¡œ â€˜ì¤„ì´ëŠ”(ëˆ„ì í•˜ëŠ”)â€™ ê³¼ì •ì´ë¯€ë¡œ ì´ reduce ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¨ìœ„ëŠ” reducerê°€ ëœë‹¤.
- ì—¬ê¸°ì„œ storeì— ë“±ë¡í•˜ëŠ” CounterSliceëŠ” CounterSliceì—ì„œ exportí•œ CounterSlice.reducer ì¦‰ ëª¨ë“  ì•¡ì…˜í•¨ìˆ˜ë“¤ì˜(ì•¡ì…˜í•¨ìˆ˜(ë¦¬ë“€ì„œ)ë“¤ì´ ëª¨ì¸ ê°ì²´) ì„¤ê³„ë„ ì´ë‹¤. 
```js
// store.js
import {configureStore} from '@reduxjs/toolkit';
import CounterSlice from './slices/CounterSlice';

const store = configureStore(
    {
        reducer: {
            CounterSlice
        }
    }
);

export default store;
```
- SliceëŠ” ìƒíƒœê°’, ì´ ìƒíƒœë¥¼ ë°”ê¿€ â€œí•¨ìˆ˜ë“¤â€(=ë¦¬ë“€ì„œ), ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” ëª…ë ¹ì„ ë§Œë“¤ â€œì•¡ì…˜í•¨ìˆ˜â€ ì´ ì„¸ ê°€ì§€ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ì— â€œë¬¶ì–´ì„œâ€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.
- nameì€ **ì´ Slice(ìƒíƒœ ì¡°ê°)**ê°€ Redux ì „ì²´ì—ì„œ ì–´ë–¤ â€œì˜ì—­/ë¶„ì•¼â€ì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ”ì§€ êµ¬ë¶„í•´ì£¼ëŠ” ì´ë¦„ìœ¼ë¡œ createSliceëŠ” ë‚´ë¶€ì ìœ¼ë¡œ **ì•¡ì…˜ ê°ì²´ì˜ typeì„ "name/reducerëª…"**ìœ¼ë¡œ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.
- ì¦‰ ì„œë¡œ ë‹¤ë¥¸ Sliceì˜ reducer ì´ë¦„ì´ ê²¹ì³ë„ nameì´ ë‹¤ë¥´ë©´ ì•¡ì…˜ì´ ì ˆëŒ€ ì¶©ëŒí•˜ì§€ ì•Šê²Œ ëœë‹¤. (ì˜ˆ: todos/add, user/add)
- initialStateë¡œ ì´ˆê¸° ìƒíƒœë¥¼ ë§Œë“¤ê³  plusì™€ ê°™ì€ reducerë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì•„ ë‚´ë¶€ ì‘ìš©ì„ í†µí•´ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¨ë‹¤.
- ì´ë•Œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬ë˜ëŠ” íŒŒë¼ë¯¸í„°ëŠ” `action.payload`ë¡œ ì „ë‹¬ë˜ë©° ì´ ìƒíƒœë³€ê²½ í•¨ìˆ˜ reducerëŠ” ë‹¹ì—°íˆ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì´ë¯€ë¡œ initialStateì™€ ë™ì¼í•œ êµ¬ì¡°ì˜ ê°ì²´ë¥¼ ë¦¬í„´í•´ì•¼ í•œë‹¤.
```js
import { createSlice } from '@reduxjs/toolkit'

/**
 * Slice ê°ì²´ ìƒì„±
 * -> Slice: ë¦¬ë“€ì„œì™€ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë‚´ì¥í•˜ëŠ” ê°ì²´
 * -> ë¦¬ë“€ì„œ: ìƒíƒœê°’ì„ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜
 * -> ì•¡ì…˜í•¨ìˆ˜: ìƒíƒœê°’ì„ ë³€ê²½í•˜ëŠ” ëª…ë ¹ì–´
 * -> ì¼ë°˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•¡ì…˜í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì•¡ì…˜í•¨ìˆ˜ê°€ ë¦¬ë“€ì„œë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒíƒœê°’ì„ ë³€ê²½
 */

// Slice ê°ì²´ ìƒì„± --> ê°ì²´ ì´ë¦„ì€ ì†ŒìŠ¤íŒŒì¼ëª…ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •(ê¶Œì¥)
const CounterSlice = createSlice({
  // 1) Slice ê°ì²´ì˜ ì´ë¦„ --> Slice ê°ì²´ëª…ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •(ê¶Œì¥)
  name: 'CounterSlice',

  // 2) ì´ ëª¨ë“ˆì´ ê´€ë¦¬í•˜ê³ ìí•˜ëŠ” ìƒíƒœê°’ë“¤ì„ ëª…ì‹œ --> ì´ ì•ˆì˜ ë³€ìˆ˜ë“¤ì€ ììœ ë¡­ê²Œ ë‚˜ì—´
  initialState: {
    number: 0,
    color: '#000'
  },

  // 3) ìƒíƒœê°’ì„ ê°±ì‹ í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ êµ¬í˜„í•œë‹¤.
  // --> íŒŒë¼ë¯¸í„°ëŠ” state, actionìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆë‹¤.
  // --> state: í˜„ì¬ ìƒíƒœê°’ì„ ê°€ë¦¬í‚¨ë‹¤.
  // --> ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬ë˜ëŠ” íŒŒë¼ë¯¸í„°ëŠ” `action.payload`ë¡œ ì „ë‹¬ëœë‹¤.
  // --> [ì¤‘ìš”] initialStateì™€ ë™ì¼í•œ êµ¬ì¡°ì˜ JSONì„ ë¦¬í„´í•´ì•¼ í•œë‹¤.
  reducers: {
    plus: (state, action) => {
      const numberValue = state.number + action.payload;
      let colorValue = "#000";

      if (numberValue > 0) {
        colorValue = '#2f77eb';
      } else if (numberValue < 0) {
        colorValue = '#f60';
      }

      return {
        number: numberValue,
        color: colorValue
      };
    },
    minus: (state, action) => {
      const numberValue = state.number - action.payload;
      let colorValue = "#000";

      if (numberValue > 0) {
        colorValue = '#2f77eb';
      } else if (numberValue < 0) {
        colorValue = '#f60';
      }

      return {
        number: numberValue,
        color: colorValue
      };
    }
  }
});

// Slice ê°ì²´ì—ì„œ ì•¡ì…˜í•¨ìˆ˜ë“¤ì„ ì¶”ì¶œí•˜ì—¬ export
export const { plus, minus } = CounterSlice.actions;

// Slice ê°ì²´ì—ì„œ ë¦¬ë“€ì„œë¥¼ ì¶”ì¶œí•˜ì—¬ export
export default CounterSlice.reducer;
```

### ğŸ“Œ 1-2. counter ì‚¬ìš© (useSelector, dispatch)
- useSelectorë¥¼ í†µí•´ state.CounterSlice ì¦‰ CounterSliceê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°’ë“¤ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- useDispatchëŠ” ì´ contextì— ë§ëŠ” reducer ì‚¬ìš©í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ë¦¬í„´í•œë‹¤. 
- `<button onClick={() => dispatch(plus(5))}>+5</button>` ì´ì™€ ê°™ì´ dispathí•¨ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.
- ë§Œì•½ ë‹¤ë¥¸ sliceì— ê°™ì€ reducerê°€ ìˆë‹¤ë©´ importí•  ë•Œ ë³„ì¹­(alias)ìœ¼ë¡œ êµ¬ë¶„í•˜ê±°ë‚˜ êµ¬ì¡°ë¶„í•´ í• ë‹¹ ì‹œ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ í•´ì£¼ë©´ ëœë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ íƒ€ì…ì€ ë‹¬ë¼ì„œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰ëœë‹¤.
```js
const Counter = memo(() => {
  // hookì„ í†µí•´ sliceê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°’ ê°€ì ¸ì˜¤ê¸°
  const { number, color } = useSelector((state) => state.CounterSlice);

  // dispatch í•¨ìˆ˜ ìƒì„±
  const dispatch = useDispatch();

  return (
    <CounterContainer>
      <h2>Counter</h2>

      <div className="counter-box">
        <button onClick={() => dispatch(plus(5))}>+5</button>
        <h2 className="number" color={color}>{number}</h2>
        <button onClick={() => dispatch(minus(3))}>-3</button>
      </div>
    </CounterContainer>
  );
});
```

### ğŸ“Œ 1-3. reduxí™œìš© ajax
- ajaxë¡œ ë¶ˆëŸ¬ì˜¨ ê°’ì„ í•œë²ˆ ì „ì—­ ë³€ìˆ˜ì— ì €ì¥í•´ë‘ë©´ ì´í›„ì—ëŠ” ì—¬ëŸ¬ë²ˆ ajax í˜¸ì¶œì„ í•˜ì§€ ì•Šê³ ë„ ìƒˆë¡œ ê³ ì¹¨í•˜ì§€ ì•ŠëŠ” ì´ìƒ ê¸°ì¡´ì— ìˆë˜ ê°’ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
- ì´ëŠ” ë³´í†µ ëª¨ë°”ì¼ê³¼ ê°™ì´ ë¡œë”© ì†ë„ê°€ ì¤‘ìš”í•œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë””ìì¸ë˜ì—ˆë‹¤.
- createAsyncThunk(í•¨ìˆ˜ëª…, ë¹„ë™ê¸°í•¨ìˆ˜(íŒŒë¼ë¯¸í„°í¬í•¨)) ì—¬ê¸°ì„œ ë§í•˜ëŠ” í•¨ìˆ˜ëª…ë„ ë¹„ë™ê¸° ì‘ì—…ì„ êµ¬ë¶„í•˜ëŠ” â€œì•¡ì…˜ íƒ€ì…(type)â€ ë¬¸ìì—´ì´ë‹¤. íƒ€ì…ì„ êµ¬ë¶„í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.
- payload: ì´ thunkë¥¼ ì‹¤í–‰í•  ë•Œ ì¶”ê°€ë¡œ ì „ë‹¬í•œ ë°ì´í„° (payload: pay-ê°€ì¹˜ìˆëŠ” load-ì ì¬, ì‹¤ì€ ê²ƒ => ê°€ì¹˜ìˆëŠ” í™”ë¬¼ì„ ì˜ë¯¸í•œë‹¤.)
- { rejectWithValue }: ì—ëŸ¬ ë°œìƒ ì‹œ, ì»¤ìŠ¤í…€ ì—ëŸ¬ ê°ì²´ë¥¼ ë¦¬í„´í•´ì¤„ ìˆ˜ ìˆëŠ” í•¨ìˆ˜
- createAsyncThunk: Redux Toolkitì—ì„œ ë¹„ë™ê¸°(Ajax/API) ì‘ì—…ì„ â€œìë™ìœ¼ë¡œâ€ ê´€ë¦¬í•´ì£¼ëŠ” ì•¡ì…˜ ìƒì„± í•¨ìˆ˜ì´ë‹¤.
- pending(ì‘ì—…ì‹œì‘), ì„±ê³µ, ì‹¤íŒ¨ì— ëŒ€í•œ 3ê°€ì§€ ì•¡ì…˜ì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³  extraReducersì—ì„œ ê°ê°ì— ëŒ€í•´ ë¦¬ë“€ì„œë¥¼ ì‘ì„± ê°€ëŠ¥í•˜ë‹¤.
- extraReducersë¥¼ í†µí•´ ë¹„ë™ê¸° ìƒíƒœê°’ì„ ê°±ì‹ í•  ë¦¬ë“€ì„œë“¤ì„ ë“±ë¡í•´ë‘”ë‹¤. ì´ë“¤ì€ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ thunkê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰í•´ì¤€ë‹¤. dispatchë¡œ getListë§Œ ë¶€ë¥´ë©´ ê·¸ë§Œì´ë‹¤.
- builderê°ì²´ì—ë‹¤ê°€ addCaseë¥¼ í†µí•´ ê° ìƒíƒœì—ì„œ ì‹¤í–‰ë  ê²ƒë“¤ì„ ë¯¸ë¦¬ ë„£ì–´ë‘ë©´ ëœë‹¤.
```js
/**
 * - ë°±ì—”ë“œì™€ ì—°ë™í•˜ëŠ” Redux Slice
 * - ë°±ì—”ë“œ URL 1ê°œë‹¹ Slice íŒŒì¼ 1ê°œ ìƒì„±
 */
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";
import fetchHelper from '../helpers/FetchHelper';

// ì—°ë™í•  ë°±ì—”ë“œ ì£¼ì†Œ (ì—”ë“œí¬ì¸íŠ¸)
const API_URL = "/grade";

/** Ajax ì²˜ë¦¬ë¥¼ ìœ„í•œ í•¨ìˆ˜ë“¤ ì •ë¦¬ --> CRUDì— ë”°ë¼ í•˜ë‚˜ì”© ì‘ì„± */
// createAsyncThunk(í•¨ìˆ˜ëª…, ë¹„ë™ê¸°í•¨ìˆ˜(íŒŒë¼ë¯¸í„°í¬í•¨))
export const getList = createAsyncThunk("GradeSlice/getList", async (payload, { rejectWithValue }) => {
  let result = null;

  try {
    result = await fetchHelper.get(API_URL);
  } catch (err) {
    // err ê°ì²´ëŠ” AxiosHelperì—ì„œ throwí•˜ëŠ” ì—ëŸ¬ ê°ì²´
    result = rejectWithValue(err);
  }

  return result;
});

// Slice ê°ì²´ ìƒì„± --> ê°ì²´ ì´ë¦„ì€ ì†ŒìŠ¤íŒŒì¼ëª…ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •(ê¶Œì¥)
const GradeSlice = createSlice({
  // 1) Slice ê°ì²´ì˜ ì´ë¦„ --> Slice ê°ì²´ëª…ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •(ê¶Œì¥)
  name: "GradeSlice",

  // 2) ì´ ëª¨ë“ˆì´ ê´€ë¦¬í•˜ê³ ìí•˜ëŠ” ìƒíƒœê°’ë“¤ì„ ëª…ì‹œ
  // --> Ajax ì²˜ë¦¬ì‹œ ë°±ì—”ë“œë¡œë¶€í„° ì „ë‹¬ë˜ëŠ” ë°ì´í„°ì™€ ë¡œë”© ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìš©ë„
  initialState: {
    status: 200,
    message: "OK",
    item: null,
    timestamp: null,
    loading: false, // <-- ë¡œë”© ìƒíƒœë¥¼ ê°ì§€í•˜ê¸° ìœ„í•´ ì¶”ê°€(ë°±ì—”ë“œì™€ ìƒê´€ ì—†ìŒ)
  },

  // 3) ìƒíƒœê°’ì„ ê°±ì‹ í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ êµ¬í˜„í•œë‹¤. (ì—¬ê¸°ì„œëŠ” ì‚¬ìš© ì•ˆí•¨)
  reducers: {},

  // 4) ë¹„ë™ê¸° ìƒíƒœê°’ì„ ê°±ì‹ í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ êµ¬í˜„í•œë‹¤.(ì£¼ë¡œ Ajax ì²˜ë¦¬)
  // --> initialStateì™€ ë™ì¼í•œ êµ¬ì¡°ì˜ JSONì„ ë¦¬í„´í•´ì•¼ í•œë‹¤.
  extraReducers: (builder) => {
    // ë°±ì—”ë“œì™€ ì—°ë™ ê°ì²´ì— í˜¸ì¶œëœë‹¤. --> ë¡œë”©ì¤‘ì„ì„ í‘œì‹œ
    // meta: {arg, requestId, requestStatus}
    // ==> arg: ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•¡ì…˜í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì „ë‹¬í•œ íŒŒë¼ë¯¸í„°(payload)
    // ==> payload: ë°±ì—”ë“œì—ì„œ ë°›ì€ ë°ì´í„°
    builder.addCase(getList.pending, (state, { meta, payload }) => {
      return { ...state, loading: true };
    });

    builder.addCase(getList.fulfilled, (state, { meta, payload }) => {
      return { ...payload, loading: false };
    });

    builder.addCase(getList.rejected, (state, { meta, payload }) => {
      return {
        ...state,
        loading: false,
        status: payload.status || 0,
        message: payload.message || "Unknown Error"
      };
    });
  }
});

// ë¦¬ë“€ì„œ ê°ì²´ ë‚´ë³´ë‚´ê¸°
export default GradeSlice.reducer;
``` 

### ğŸ“Œ 1-4. reduxì—ì„œ ajaxí™œìš©
- if (item && item.length > 0) return;ë¥¼ í†µí•´ ì´ë¯¸ ì „ì—­ë³€ìˆ˜ì— ê°’ì´ ìˆë‹¤ë©´ ìƒˆë¡œ ë¡œë“œí•˜ì§€ ì•Šë„ë¡ í•œë‹¤.
```js
  const { loading, status, message, item } = useSelector((state) => state.GradeSlice);

  // dispatch í•¨ìˆ˜ ìƒì„±
  const dispatch = useDispatch();

  // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë˜ë©´ ë°ì´í„° ì¡°íšŒë¥¼ ìœ„í•œ ì•¡ì…˜í•¨ìˆ˜ë¥¼ ë””ìŠ¤íŒ¨ì¹˜ í•¨
  useEffect(() => {
    // ì´ë¯¸ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë‹¤ì‹œ ì¡°íšŒí•˜ì§€ ì•ŠìŒ
    if (item && item.length > 0) return;

    dispatch(getList());
  }, []);
  ```