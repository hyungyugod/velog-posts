# 📌 0. 데이터 분석 문제 검토
### 📌 0-1. 중간중간 로그찍기
- 이걸 단위 명령마다 찍어가면서 체크하면 어디서 실수했는지 예측해볼 수 있다.
```py
print(raw_log.shape)
```

### 📌 0-2. 날짜 데이터 타입 관련
- info를 사용하여 해당 데이터 타입을 확인한 후 날짜로 변경한다.
```py
raw-log.info()
```
- to_datetime에서 format을 줄때는 format에 포멧문자를 지정해주면 된다.
```py
pd.to_datetime("19-09-25", format="%y-%m-%d")
```

### 📌 0-3. 타이핑 줄이는 트릭
- 여러 컬럼을 한번에 리스트로 묶어내야할때 한번 문자열 전체를 긁어서 출력해보면 구분할 수 있는 문자를 발견할 수 있다. 이때 이에 split을 사용하면 문자열이 끊겨서 리스트로 반환받을 수 있다.
```py
"eventdatetime eventdatetime_year eventdatetime_month eventdatetime_day eventdatetime_hour eventdatetime_minute eventdatetime_second".split("\t")
```

### 📌 0-4. 버전분리문제에 대하여
- 함수를 만들어서 어떤 열의 값을 정제하고자할때 모두를 일괄적으로 처리하기위해 예외가 있는지 봐야하기 때문에 unique()를 사용하여 어떤 값들이 있는지 확인해볼 필요가 있다.
```py
raw_log["osversion"].unique()
```
- 나는 반복문 돌리다가 문자열끼리만 모아서 합치던지 .과 숫자만 모아서 합치던지한 결과를 반환하였는데 위에서 확인한 결과 좀 더 경우의 수를 줄일 수 있으면 줄일 수도 있다. 
- 일단 나중일은 다른 사람들에게 맡기고 앞둔 문제를 빠르게 해결할 수 있도록 선택하는 것이 좋다.
- 슬라이싱을 이용해서 좀 더 쉽게 값을 표현한다.
- 가장 좋은 건 정규표현식으로 찾는 것이다.
```py
def find_ostype(text):
    if 'OS' in text:
        return 'OS'
    else:
        return 'Android'

def find_version(text):
    if 'OS' in text:
        return text[2:]
    else: 
        return text[7:]
```
- 아래를 활용해서 앞에 단어를 좀 더 확실하게 지울 수도 있다.
```py
text.replace('OS',"")
text.replace('Android',"")
```

### 📌 0-5. 반복되는 리턴 줄이기
- 원래 아래처럼 리턴을 각 분기마다 하도록 했는데 이런 방식도 있지만 output 변수를 만들어서 좀 더 정리해서 처리할 수도 있다.
```py
def clean_devicemanufacturer(text):
    if not isinstance(text, str):
        return "Other"

    t = text.strip().lower()

    if t.startswith("samsung"):
        return "Samsung"
    elif t.startswith(("lge", "lg electronics", "lg")):
        return "LG"
    elif t.startswith("apple"):
        return "Apple"
    else:
        return "Other"
```
- output으로 리턴값을 통일한 것은 아래와 같다.
```py
def clean_devicemanufacturer(text):
    output = "Other"

    if not isinstance(text, str):
        return output

    t = text.strip().lower()

    if t.startswith("samsung"):
        output =  "Samsung"

    elif t.startswith(("lge", "lg electronics", "lg")):
        output = "LG"

    elif t.startswith("apple"):
        output = "Apple"

    else:
        output = "Other"

    return output
```

### 📌 0-6. 결측치를 그대로 내보내기
- 어떤 컬럼을 조작하기전에는 우선 아래처럼 결측치를 조사하여 보는 것이 좋다.
```py
row_log["channel"].isna().sum()
```
- 나는 결측치를 아래와 같이 해결했다.
```py
if not isinstance(text, str):
        return text
```
- 하지만 결측치를 판단하는 pandas함수가 있는데 아래처럼 사용하면 된다.
```py
if pd.isna(text):
    return text
```
- pd.isna를 활용하는 것이 보다 더 명확하다.

### 📌 0-7. 빠진 데이터 확인하기
- 파이썬의 집합을 확인하면 빠지는 데이터가 확실히 빠졌는지 확인이 가능하다.
```py
drop_cols = ["osversion","devicemanufacturer","canonicaldeviceuuid","channel","event_rank"]
set(list(raw_log)) - set(list(raw_log.drop(columns=drop_cols)))
```
