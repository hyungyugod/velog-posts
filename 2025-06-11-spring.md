# ğŸ“Œ 1. controller - db ê²€ìƒ‰ êµ¬í˜„
### ğŸ“Œ 1-1. REST ì•„í‚¤í…ì²˜ì˜ ê¸°ë³¸ ì² í•™
- ìì›ì„ URLë¡œ ëª…í™•í•˜ê²Œ í‘œí˜„ -> /products?keyword=ìŠ¤í”¼ì»¤
- í–‰ìœ„(ë©”ì„œë“œ)ëŠ” HTTP Methodë¡œ í‘œí˜„ ->  GET(ì¡°íšŒ), POST(ìƒì„±), PUT(ìˆ˜ì •), DELETE(ì‚­ì œ)
- ì¦‰, ì–´ë–¤ ìì›ì„ ì–´ë–¤ í–‰ìœ„ë¡œ ë‹¤ë£¨ëŠ”ì§€ ëª…í™•í•˜ê²Œ â€œêµ¬ë¶„â€í•˜ëŠ” ê²Œ RESTì˜ í•µì‹¬ ì² í•™ì´ë‹¤.
- ì´ë•Œ get ë°©ì‹ì€ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì— ì •ë³´ë¥¼ í¬í•¨í•˜ë¯€ë¡œ ëˆ„ê°€ í•´ë‹¹ urlë¡œ ì ‘ê·¼í•´ë„ ë™ì¼í•œ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆê³  ìì£¼ ì“°ëŠ” ë°ì´í„°ê°€ íŒŒì•…í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ìë™ì ìœ¼ë¡œ ë¸Œë¼ìš°ì € ì…ì¥ì—ì„œ ìºì‹±ì´ ê°€ëŠ¥í•˜ë‹¤. ë˜í•œ ì›¹/ì„œë²„/ë¶„ì„ ì‹œìŠ¤í…œì€ ëŒ€ë¶€ë¶„ â€œURL ê¸°ë°˜â€ìœ¼ë¡œ ì ‘ê·¼/í–‰ìœ„ ì¶”ì í•˜ë¯€ë¡œ ë°ì´í„°ì™€ í™”ë©´ì˜ ì „í™˜ê³¼ ê´€ë ¨ëœ ìì›/ë°ì´í„° ì •ë³´ëŠ” ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì— ë‚¨ì•„ì•¼í•œë‹¤. ì´ë•Œ ì„œë²„ì—ì„œ ì •ë³´ëŠ” @RequestParamìœ¼ë¡œ ë°›ëŠ”ë‹¤.
- ë°˜ë©´ postë°©ì‹ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ë©´ì„œ ì„œë²„ ìƒíƒœë¥¼ ë°”ê¿€ë•Œ ì‚¬ìš©í•˜ë©° bodyì— ì •ë³´ë¥¼ ë‹´ì•„ ì˜¤ë¯€ë¡œ  @RequestBodyë¡œ ì •ë³´ë¥¼ ë°›ëŠ”ë‹¤. postëŠ” ì„¤ê³„ë¶€í„° í–‰ìœ„ì˜ ì˜ë¯¸ë¡œ ì„¤ê³„ë˜ì—ˆìœ¼ë©° í•˜ì—¬ ì´ ëª…ë ¹ì„ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•˜ë©´, ê·¸ë§Œí¼ì˜ ê²°ê³¼(ê¸€, ì£¼ë¬¸ ë“±)ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. POSTë¥¼ ì“´ë‹¤ëŠ” ê±´ â€œì´ ìš”ì²­ì´ ì„œë²„ì— ì˜í–¥ì„ ì¤„ ìˆ˜ë„ ìˆë‹¤ëŠ” ê²ƒì„ í‘œì¤€ ê·œì•½ì— ë”°ë¼ì„œ ê°œë°œìë“¤ì´ ëª¨ë‘ ë™ì˜í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤. ì¦‰, POST ìš”ì²­ 1íšŒ = â€œìƒˆ ë°ì´í„°/ìƒíƒœâ€ 1íšŒ ìƒì„±ë˜ëŠ” ë¹„ë©±ë“±ì„±ì˜ ì„±ì§ˆì„ ê°€ì§ˆ í™•ë¥ ì´ ë†’ë‹¤. ë”°ë¼ì„œ ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ”ëŒ€ì‹  postë°©ì‹ì„ ì‹¤í–‰í•  ë•Œ ë¸Œë¼ìš°ì €ë‚˜ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì„œë²„ì˜ ë°ì´í„°ê°€ ë°”ë€” ìˆ˜ ìˆë‹¤ëŠ” ë¦¬ìŠ¤í¬ë¥¼ ê°–ê²Œ ëœë‹¤. 
- post ë°©ì‹ìœ¼ë¡œ ì „ì†¡í•œ í›„ ìƒˆë¡œ ê³ ì¹¨ì‹œ "ì–‘ì‹ì„ ë‹¤ì‹œ ì œì¶œí•˜ë¼ëŠ” ì•Œë¦¼"ì´ ëœ¨ëŠ” ì´ìœ ë„ ìœ„ì™€ ê°™ì€ë° ë¸Œë¼ìš°ì €ì—ì„œ POSTë¡œ í¼ì„ ì œì¶œí•˜ë©´ â†’ ì„œë²„ì— â€œë°ì´í„°ê°€ ë°”ë€ŒëŠ”â€ ìš”ì²­ì´ ê°€ëŠ” ê±¸ë¡œ ì¸ì‹í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ì„œ ì´ì „ ì–‘ì‹ì„ ë‹¤ì‹œ ì œì¶œí• ì§€ ë˜ ë¬¼ì–´ë³¸ë‹¤. ì´ëŠ” ì‚¬ìš©ìê°€ ê°™ì€ ì–‘ì‹ì„ ë˜ ì œì¶œí•˜ê²Œ ë  ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ê²½ê³ í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

### ğŸ“Œ 1-2. department ì •ë³´ ê²€ìƒ‰
- ì•„ë˜ëŠ” get ë°©ì‹ìœ¼ë¡œ ì •ë³´ë¥¼ ë°›ì•„ì„œ dtoì— ë‹´ì•„ serviceì— ë„˜ê²¨ì£¼ëŠ” controllerì´ë‹¤. ì´ë•Œ departmentê°ì²´ì— ì •ë³´ë¥¼ ë‹´ìœ¼ë¯€ë¡œ ì´ë¥¼ DepartmentSearchParamìœ¼ë¡œ ëª…ëª…í•œë‹¤.
- DTOë¼ëŠ” í‘œí˜„ì€ ê´€ë¡€ì ìœ¼ë¡œ ë§ ë‹¨ìˆœí•˜ê²Œ í…Œì´ë¸” í•œ í–‰(row)ì˜ ì •ë³´ë¥¼ í†µì§¸ë¡œ ì „ë‹¬í•  ë•Œ ë³´í†µ DepartmentDTOë¼ê³  ì“´ë‹¤.
- 
```java
@Controller
public class DepartmentController {
    
    @Autowired
    private DepartmentService departmentService;

    @Autowired
    private WebHelper webHelper;

    @GetMapping("/department")
    public String index(Model model , @RequestParam(value = "keyword", required = false) String keyword) {

        Department DepartmentSearchParam = new Department();
        DepartmentSearchParam.setDname(keyword);
        DepartmentSearchParam.setLoc(keyword);

        List<Department> output = null;

        try {
            output = departmentService.getList(DepartmentSearchParam);
        } catch (Exception e) {
            webHelper.serverError(e);
        }

        model.addAttribute("departments", output);
        model.addAttribute("keyword", keyword);

        return "department/index";
    }
}
```
- ì•„ë˜ëŠ” department/indexì—ì„œ í¼ì„ ì „ì†¡í•˜ëŠ” ë¶€ë¶„ë§Œ ê°€ì ¸ì˜¨ ê²ƒì´ë‹¤.
- getë°©ì‹ìœ¼ë¡œ /department ì£¼ì†Œë¡œ í¼ì„ ë³´ë‚´ê²Œ ë˜ë©° submitì„ ëˆ„ë¥´ë©´ keywordë¼ëŠ” í‚¤ê°’ì— ì‚¬ìš©ì ì…ë ¥ ì •ë³´ë¥¼ ë°›ì•„ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.
- th:value="${keyword}" ì„ í†µí•´ ì‚¬ìš©ìê°€ ê²€ìƒ‰í•œ ê°’ì´ ê²€ìƒ‰ì°½ì— ê³„ì† ë‚¨ì•„ìˆê²Œ í•œë‹¤. ì¦‰ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ë©´ì„œ ê²€ìƒ‰ì°½ë„ ì„¸íŒ…í•˜ëŠ” ê²ƒì´ë‹¤. (í¼ ë°ì´í„° ìœ ì§€)
```html
<h1>í•™ê³¼ëª©ë¡</h1>

    <div class="search-controller">
        <form id="my-form" th:action="@{/department}" method="get">
            <input type="search" name="keyword" id="my-search" placeholder="í•™ê³¼ì´ë¦„ ê²€ìƒ‰" th:value="${keyword}">
            <button type="submit" class="mybutton green">ê²€ìƒ‰</button>
        </form>
        <div class="buttons">
            <a th:href="@{/department/add}" class="mybutton blue">í•™ìƒì •ë³´ ì¶”ê°€</a>
        </div>
    </div>
```

# ğŸ“Œ 2. í˜ì´ì§€ë„¤ì´ì…˜

### ğŸ“Œ 2-1. pagehelperë¡œ í˜ì´ì§€ì— ê´€ë ¨ëœ ëª¨ë“  í•­ëª©ì„ ë‹´ì„ DTOë¡œ ë§Œë“¤ê¸°
- startPage = ((nowPage - 1) / groupCount) * groupCount + 1; // ë„˜ì–´ê°„ í˜ì´ì§€ìˆ˜ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸° -> ì›ë˜ 5ê°€ ìµœëŒ€ë©´ 5ì— ë„˜ì–´ê°€ëŠ”ë° ê·¸ ë²”ìœ„ë¥¼ 5ê¹Œì§€ë„ ì•ˆë„˜ì–´ê°€ê²Œ ì „ì²´ë¥¼ ë’¤ë¡œ 1 ì´ë™, í•œë²ˆ ë‚˜ëˆ ì¤˜ì•¼ groupCount ë‹¨ìœ„ë¡œ ë¬¶ì–´ì„œ í˜ì´ì§€ ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤.
- if ë¬¸ì„ í™œìš©í•˜ì—¬ ë³´ì´ëŠ” í˜ì´ì§€ê°€ ìƒìˆ˜ë¡œ ì„¤ì •í•´ë‘” groupCount(í•œ í˜ì´ì§€ì— ì¡´ì¬í•  í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ ê°œìˆ˜) ë³´ë‹¤ ì ì€ ìƒí™©ì„ ì¡°ì •í•œë‹¤.
- offset = (nowPage - 1) * listCount; : sql ì—ì„œ limit ê°’ì— ë„£ì„ ë³€ìˆ˜ì´ê³  sql ë°ì´í„° ì‹œì‘ê°’ì€ 0ì—ì„œ ì‹œì‘í•˜ë¯€ë¡œ ì§€ë‚œ í˜ì´ì§€ê¹Œì§€ì˜ ë°ì´í„° ê°œìˆ˜ë¶€í„° limitì„ ê±¸ë©´ ë”± ì•ˆë‚˜ì˜¨ ë°ì´í„°ë¶€í„° ë½‘ì•„ì„œ ì •ë ¬í•  ìˆ˜ ìˆë‹¤.
- if(endPage < totalPage) endPage = totalPage : ì „ì²´ í˜ì´ì§€ê°€ í‘œì‹œí•  ë§ˆì§€ë§‰ í˜ì´ì§€ ë³´ë‹¤ í¬ë©´ ì „ì²´ í˜ì´ì§€ë§Œí¼ë§Œ í™”ë©´ì— í‘œì‹œí•¨.
```java
@Slf4j
@Data
public class PageHelper {
    private int nowPage; // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸
    private int totalCount; // ì „ì²´ ê¸€ ê°œìˆ˜

    private int listCount; // í•œ í˜ì´ì§€ì— ë³´ì—¬ì¤„ í˜ì´ì§€ ë²ˆí˜¸ ê°œìˆ˜
    private int groupCount; // í•œ ê·¸ë£¹ì— í‘œì‹œí•  í˜ì´ì§€ ë²ˆí˜¸ ê°œìˆ˜

    private int totalPage; // ì „ì²´ í˜ì´ì§€ ìˆ˜
    private int startPage; // í˜„ì¬ ê·¸ë£¹ì˜ ì‹œì‘ í˜ì´ì§€
    private int endPage; // í˜„ì¬ ê·¸ë£¹ì˜ ë§ˆì§€ë§‰ í˜ì´ì§€
    private int prevPage; // ì´ì „ ê·¸ë£¹ì˜ ë§ˆì§€ë§‰ í˜ì´ì§€
    private int nextPage; // ì´ì „ ê·¸ë£¹ì˜ ì²« í˜ì´ì§€
    private int offset; // ê¸°ì¤€ í˜ì´ì§€ì—ì„œ ë–¨ì–´ì§„ ìœ„ì¹˜ limit ì‹œì‘ê°’

    public PageHelper(int nowPage, int totalCount, int listCount, int groupCount){
        this.nowPage = nowPage;
        this.totalCount = totalCount;
        this.listCount = listCount;
        this.groupCount = groupCount;

        totalPage = ((totalCount - 1) / listCount) + 1;

        if (nowPage < 0){
            nowPage = 1;
        }
        else if (nowPage > totalPage){
            nowPage = totalPage;
        }

        startPage = ((nowPage - 1) / groupCount) * groupCount + 1; // ë„˜ì–´ê°„ í˜ì´ì§€ìˆ˜ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ê¸° -> ì›ë˜ 5ì´ ìµœëŒ€ë©´ 5ì— ë„˜ì–´ê°€ëŠ”ë° ê·¸ ë²”ìœ„ë¥¼ 5ê¹Œì§€ë„ ì•ˆë„˜ì–´ê°€ê²Œ ì „ì²´ë¥¼ ë’¤ë¡œ 1 ì´ë™
        endPage = startPage - 1 + groupCount;

        if (endPage > totalPage){
            endPage = totalPage;
        }

        // ì´ì „ í˜ì´ì§€, ì´í›„ í˜ì´ì§€ëŠ” ì´ì „, ì´í›„ê°€ ì—†ìœ¼ë©´ ëª¨ë‘ ê°’ì„ 0ìœ¼ë¡œ ë§Œë“¦
        prevPage = (startPage > groupCount) ? startPage - 1 : 0;
        nextPage = (endPage < totalPage) ? endPage + 1 : 0;

        offset = (nowPage - 1) * listCount; // limit ê°’ ì„¤ì •í•  ë•Œ ì‹œì‘ê°’ì€ 0ì—ì„œ ì‹œì‘

        log.debug(this.toString());
    }
}
```

### ğŸ“Œ 2-2. department/indexì— í˜ì´ì§€ ë„¤ì´ì…˜ í‹€ êµ¬í˜„
- <li th:if="${pageHelper.prevPage > 0}"> : ì´ì „ í˜ì´ì§€ê°€ ì¡´ì¬í•  ê²½ìš°(0ì´ ì•„ë‹ ê²½ìš°) â—€ì— <a th:href="@{/department(keyword=${keyword}, page=${pageHelper.prevPage})}"> ë§í¬ ê±¸ê¸°
- <a th:href="@{/department(keyword=${keyword}, page=${pageHelper.prevPage})}"> : ì‚¬ìš©ìê°€ ì´ ë§í¬ë¥¼ ëˆ„ë¥´ë©´ í•´ë‹¹ ê²€ìƒ‰ì–´(keyword)ì™€ ì´ì „ ê·¸ë£¹ì˜ ì²« í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” íš¨ê³¼ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ í¬í•¨í•œ urlì„ êµ¬ì„±í•˜ì—¬ ì„œë²„ë¡œ ì „ì†¡í•œë‹¤.
- ìœ„ì— aíƒœê·¸ì— ë‹«ëŠ” /ë¥¼ ë„£ì–´ì£¼ê±°ë‚˜ </a> ë¡œ ë‹«ì•„ì£¼ì–´ì•¼ í•œë‹¤.
- th:each="i : ${#numbers.sequence(pageHelper.startPage, pageHelper.endPage)}" : numbers.sequence í•¨ìˆ˜ë¥¼ ì´ìš©í•´ startPage, endPage ê¹Œì§€ì˜ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ì–´ì„œ ë°˜ë³µì„ ëŒë¦°ë‹¤.
- ë§Œì•½ í˜„ì¬ í˜ì´ì§€ì™€ iê°€ ê°™ìœ¼ë©´ ë§í¬ì— í•´ë‹¹ í˜ì´ì§€ ìˆ«ìë¥¼ ë„£ê³  active classë¥¼ ë¶€ì—¬í•œë‹¤. ë§Œì•½ í˜„ì¬ í˜ì´ì§€ê°€ ì•„ë‹ˆë©´ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì¶œë ¥í•˜ê³  ê·¸ í˜ì´ì§€ ë²ˆí˜¸ì— ë§ëŠ” í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë§í¬ì£¼ì†Œë¥¼ ê±´ë‹¤.
- ë‹¤ìŒ í˜ì´ì§€ ì²˜ë¦¬ëŠ” í˜„ì¬ í˜ì´ì§€ ì²˜ë¦¬ì™€ ê°™ë‹¤.
```html
    <!-- í˜ì´ì§€ ë²ˆí˜¸ -->
<ul class="pagination">
    <!-- ì´ì „ í˜ì´ì§€ ê·¸ë£¹ ì´ë™ ë²„íŠ¼ -->
    <li th:if="${pageHelper.prevPage > 0}"> 
        <a th:href="@{/department(keyword=${keyword}, page=${pageHelper.prevPage})}">â—€</a>
    </li>
    <li th:unless="${pageHelper.prevPage > 0}"><a>â—€</a></li>

    <!-- í˜ì´ì§€ ë²ˆí˜¸ ë§í¬ -->
    <li th:each="i : ${#numbers.sequence(pageHelper.startPage, pageHelper.endPage)}">
        <a th:if="${i == pageHelper.nowPage}" class="active" th:text="${i}" ></a>
        <a th:unless="${i == pageHelper.nowPage}" th:text="${i}"
            th:href="@{/department(keyword=${keyword}, page=${i})}" ></a>
    </li>

    <!-- ë‹¤ìŒ í˜ì´ì§€ ê·¸ë£¹ ì´ë™ ë²„íŠ¼ -->
    <li th:if="${pageHelper.nextPage > 0}">
        <a th:href="@{/department(keyword=${keyword}, page=${pageHelper.nextPage})}">â–¶</a>
    </li>
    <li th:unless="${pageHelper.nextPage > 0}"><a>â–¶</a></li>
</ul>
```

### ğŸ“Œ 2-3. mapperì—ì„œ limitì ˆ ì¶”ê°€
- "<if test='listCount > 0'>limit #{offset}, #{listCount}</if>" : ë§Œì•½ í‘œì‹œí•  ë¦¬ìŠ¤íŠ¸ê°€ ìˆë‹¤ë©´ offsetë¶€í„° í‘œì‹œí•  ë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ë§Œí¼ë§Œ selectí•œë‹¤.
```java
@Select("<script>" 
            + "select id, dname, loc, phone, email, established, homepage "
            + "from departments "
            + "<where>"
            + "<if test = \"dname != null and dname != '' \">dname like concat ('%', #{dname}, '%')</if>"
            + "<if test = \"loc != null and loc != '' \">or loc like concat ('%', #{loc}, '%')</if>"
            + "</where>"
            + "order by id desc "
            + "<if test='listCount > 0'>limit #{offset}, #{listCount}</if>"
            + "</script>"
        )
    public List<Department> selectList(Department input);
```

### ğŸ“Œ 2-4. department models ê°ì²´ (DTO)ì— ë“¤ê³  ë‹¤ë‹ ì „ì—­ ë³€ìˆ˜ ì¶”ê°€í•˜ê¸°
- ëª¨ë“  ê°ì²´ê°€ ë™ì¼í•œ ê°’ì„ í˜ì´ì§€ ì •ë³´ì—ì„œ ë°›ì•„ì•¼í•˜ë¯€ë¡œ 
```java
@Data //getter, setter, toString ìë™ìƒì„±
public class Department {
    private int id;
    private String dname;
    private String loc;
    private String phone;
    private String email;
    private int established;
    private String homepage;

    @Getter
    @Setter
    private static int listCount = 0;

    @Getter
    @Setter
    private static int offset = 0;
}
```

### ğŸ“Œ 2-5. í˜ì´ì§€ë„¤ì´ì…˜ ë°˜ì˜ controller
- listCount(í•œí˜ì´ì§€ì— í‘œì‹œë  ëª©ë¡ ê°œìˆ˜), groupCount(í•œí˜ì´ì§€ì— í‘œì‹œë  í˜ì´ì§€ë„¤ì´ì…˜ ê°œìˆ˜)ëŠ” ê°œë°œìê°€ ì •í•˜ëŠ” ìƒìˆ˜ì´ë‹¤.
- í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ (DepartmentSearchParamì„ ì´ìš©í•œ getCountë¥¼ í†µí•´) ë¨¼ì € ì „ì²´ ëª©ë¡ì˜ ê°œìˆ˜ë¥¼ êµ¬í•˜ê³  í•´ë‹¹ ì •ë³´í¬í•¨ í˜„ì¬ í˜ì´ì§€ ì •ë³´ë¥¼ ë‹´ì•„ pageHelperì— ì „ë‹¬í•¨.
- ì´í›„ ìœ„ì˜ ê°’ì„ ì¤Œìœ¼ë¡œ ì¸í•´ì„œ pageHelper ê°ì²´ ë‚´ë¶€ì—ì„œ ê³„ì‚°ëœ Offset(limit ì‹œì‘ì )ê³¼ ListCount(í˜ì´ì§€ì— í‘œì‹œë  ëª©ë¡ ê°œìˆ˜)ë¥¼ departmentServiceì— ë‹´ì•„ indexë¡œ ë³´ëƒ„
- departmentì— ë‹´ëŠ” ì´ìœ ëŠ” output = departmentService.getList(DepartmentSearchParam); ì´ë•Œ ë°ì´í„°ë¥¼ Offsetê³¼ ListCountì— ê¸°ë°˜í•˜ì—¬ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ì„œ ì´ë‹¤.
```java
@Controller
public class DepartmentController {
    
    @Autowired
    private DepartmentService departmentService;

    @Autowired
    private WebHelper webHelper;

    @GetMapping("/department")
    public String index(Model model ,
                        @RequestParam(value = "keyword", required = false) String keyword, 
                        @RequestParam(value = "page", defaultValue = "1") int nowPage) {
        
        int totalCount = 0;
        int listCount = 10;
        int groupCount = 5;
        
        PageHelper pageHelper = null;
        
        Department DepartmentSearchParam = new Department();
        DepartmentSearchParam.setDname(keyword);
        DepartmentSearchParam.setLoc(keyword);

        List<Department> output = null;

        try {
            totalCount = departmentService.getCount(DepartmentSearchParam);
            pageHelper = new PageHelper(nowPage, totalCount, listCount, groupCount);

            Department.setOffset(pageHelper.getOffset());
            Department.setListCount(listCount);

            output = departmentService.getList(DepartmentSearchParam);

        } catch (Exception e) {
            webHelper.serverError(e);
        }

        model.addAttribute("departments", output);
        model.addAttribute("keyword", keyword);
        model.addAttribute("pageHelper", pageHelper);

        return "department/index";
    }
}
```