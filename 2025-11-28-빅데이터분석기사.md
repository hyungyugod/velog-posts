# ğŸ“Œ 1. 10íšŒ ê¸°ì¶œ
## 1-1. 1ìœ í˜•
- ë¬¸ì œì—ì„œ ì•„ì˜ˆ ì•ˆì“°ì´ëŠ” ì¹¼ëŸ¼ì€ ì•„ì˜ˆ ì‚­ì œí•˜ê³  í•˜ëŠ”ê²Œ ë³´ê¸°ì— í¸í•œ ê²ƒ ê°™ë‹¤.
- ê° textë¥¼ ë‹¨ì–´ ìˆ˜ë¡œ ë³€ê²½í•˜ê¸°
- ë‚˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ applyë¥¼ í†µí•´ ê³„ì‚°í–ˆëŠ”ë° strë¡œ ì—°ì‚° ë‘ë²ˆ í•˜ëŠ”ê²ƒë„ ê°€ëŠ¥í•˜ê³  ë„ì–´ì“°ê¸° ê°œìˆ˜ + 1ë„ ê°€ëŠ¥í•˜ë‹¤.
- ê·¸ë¦¬ê³  series ë‹ˆê¹Œ rest_indexì•ˆí•˜ê³  ë°”ë¡œ ì¸ë±ìŠ¤ ì´ë¦„ìœ¼ë¡œ ì ‘ê·¼í•˜ë©´ ì¢€ í¸ë¦¬í•œê±´ ìˆë‹¤.
```py
# 1. ê° ë©”ì‹œì§€ì˜ ë‹¨ì–´ ê°œìˆ˜ êµ¬í•˜ê¸° (ë„ì–´ì“°ê¸° ê¸°ì¤€)
df["ë‹¨ì–´"] = df["text"].str.split()
df["ë‹¨ì–´ìˆ˜"] = df["ë‹¨ì–´"].str.len()
df.head()

# 2. ìŠ¤íŒ¸ê³¼ ì •ìƒ ë©”ì‹œì§€ì˜ í‰ê·  ë‹¨ì–´ ìˆ˜ êµ¬í•˜ê¸°
m = df.groupby("label")["ë‹¨ì–´ìˆ˜"].mean()

# 3. ë‘ í‰ê·  ì°¨ì´ì˜ ì ˆëŒ“ê°’ êµ¬í•˜ê¸°
diff = abs(m["spam"] - m["ham"])
```
- í˜¹ì€ ì•„ë˜ì²˜ëŸ¼
```py
# 1. ê° ë©”ì‹œì§€ì˜ ë‹¨ì–´ ê°œìˆ˜ êµ¬í•˜ê¸° (ë„ì–´ì“°ê¸° ê¸°ì¤€)
df["ë‹¨ì–´ìˆ˜"] = df["text"].str.count(" ") + 1
```
- ì•„ë˜ ì½”ë“œê°€ ì¤‘ìš”í•œë° ì›”ê¹Œì§€ë§Œ ë½‘ê³  ì‹¶ì„ë•Œ ì•„ë˜ì²˜ëŸ¼ ì§€ì •í•´ì£¼ë©´ëœë‹¤.
```py
df["year_month"] = df["order_date"].dt.to_period("M")
```
- ë¶„ê¸°ë¡œ ë¬¶ì„ë•ŒëŠ” ì•„ë˜ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆë‹¤.

| order_date | to_period("Q") ê²°ê³¼ |
| ---------- | ----------------- |
| 2024-01-15 | 2024Q1            |
| 2024-02-28 | 2024Q1            |
| 2024-03-30 | 2024Q1            |
| 2024-04-10 | 2024Q2            |
| 2024-10-01 | 2024Q4            |

- ë§ˆì§€ë§‰ ì œì¶œí˜•ì‹ ë°˜ì˜¬ë¦¼ ë“±ì„ ê¼­ ì—¬ëŸ¬ë²ˆ ë´ì„œ í™•ì¸í•˜ê³  ì œì¶œí•´ì•¼í•œë‹¤.
- ë°ì´í„°í”„ë ˆì„ë¼ë¦¬ ì—°ì‚°í•´ì„œ ìƒˆ ë°ì´í„°í”„ë ˆì„ ë§Œë“¤ê¸°
```py
df = df[['sub_topic', 'is_correct']]
total_c = df.groupby('sub_topic')['is_correct'].count()
total_s = df.groupby('sub_topic')['is_correct'].sum()
total_acc = total_s / total_c
print(round(total_acc.sort_values(ascending=False),3)) # 0.673913
```

## 1-2. 2ìœ í˜•
- max_depth=12, n_estimators=2100, learning_rate=0.2 ì´ë ‡ê²Œë˜ë©´ ë­”ê°€ ì´ìƒí•˜ë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” ëª¨ë¸ì´ ê³¼ì í•©ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— crossvalidationì´ë‚˜ trainê³¼ ë¹„êµí•´ë³¼ ìˆ˜ ìˆë‹¤.
```py
from sklearn.model_selection import cross_val_score
scores = cross_val_score(model, train, target, cv=5, scoring="neg_root_mean_squared_error")
print(-scores.mean(), -scores.std())
```
- ì•„ë‹ˆë©´ ì´ëŸ°ì‹ìœ¼ë¡œ trainë°ì´í„°ì™€ í•¨ê»˜ ê²€ì‚¬í•˜ì—¬ ê³¼ì í•© ê°€ëŠ¥ì„±ì„ ì¤„ì¸ë‹¤.
- ê·¸ëŸ°ë° ë³´í†µ ì´ ì°¨ì´ê°€ 200ì •ë„ëŠ” ë‚˜ëŠ”ê±° ê°™ì•„ì„œ í•œ 100 ì–¸ì €ë¦¬ë©´ ê·¸ëƒ¥ ì•ˆì‹¬ì„ í•´ë„ ë  ê²ƒ ê°™ë‹¤.
```py
pred_train = model.predict(x_tr)
pred_val = model.predict(x_val)

print("train RMSE:", root_mean_squared_error(y_tr, pred_train))
print("val RMSE:", root_mean_squared_error(y_val, pred_val))
```

| val - train ì°¨ì´ | í•´ì„                    |
| -------------- | --------------------- |
| 0~5%           | ì•ˆì •ì , ê³¼ì í•© ê±°ì˜ ì—†ìŒ        |
| 5~15%          | ê²½ê³„ì„  â€” ëª¨ë¸ ë³µì¡ë„ ì¡°ì • ê°€ì¹˜ ìˆìŒ |
| 15% ì´ìƒ         | ê³¼ì í•© ê°€ëŠ¥ì„± ë†’ìŒ          |
| ê·¹ë‹¨ì ìœ¼ë¡œ í¼        | trainì„ ê±°ì˜ ì™¸ì› ì„ ê°€ëŠ¥ì„±    |

- ê·¸ë¦¬ê³  ê²°ì¸¡ì¹˜ê°€ ìˆìœ¼ë©´ ê²°ì¸¡ì¹˜ë¥¼ ì—¬ëŸ¬ë°©ë©´ìœ¼ë¡œ ì²˜ë¦¬í•´ë³´ê³  ê²°ê³¼ê°€ ê°€ì¥ ì¢‹ì€ê²ƒìœ¼ë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## 1-3. 3ìœ í˜•
- params ë‘ pvalueí—·ê°ˆë¦¬ì§€ ë§ê¸° ì˜¤ì¦ˆë¹„ êµ¬í• ë•ŒëŠ” paramsì´ë‹¤.
```py
import numpy as np
print(round(np.exp(model.params['age']),3)) # 1.255
```
- ë˜ ë‹¤ì‹œ ì í•©í• ë•Œ ìƒˆë¡œìš´ ë³€ìˆ˜ë¥¼ ë§Œë“¤ì—ˆìœ¼ë©´ ìƒˆë¡œìš´ formulaì™€ ìƒˆë¡œìš´ ëª¨ë¸ì„ ì‚¬ìš©í•´ì£¼ì–´ì•¼í•œë‹¤.
- new_formulaê°€ ì•„ë‹ˆë¼ formulaì—¬ì„œ í‹€ë ¸ì—ˆë‹¤.
```py
new_formula = 'heating_load ~ roof + glazing + height'
new_model = ols(new_formula, data=df).fit()
print(round(new_model.rsquared,3)) # 0.754
```
- ê·¸ë¦¬ê³  new_predëŠ” ì‹œë¦¬ì¦ˆ(Series) ë¼ì„œ ë³´í†µì€ new_pred[0]ì²˜ëŸ¼ êº¼ë‚´ì„œ ì“°ëŠ” ê²Œ ê¹”ë”í•˜ë‹¤.
```py
new_data = pd.DataFrame({
    'wall' : [20],
    'roof' : [150],
    'glazing' : [20],
    'height' : [5]
})

new_pred = new_model.predict(new_data)
print(round(new_pred,3)) # 79.442
```

# ğŸ“Œ 2. ìœ í˜• 1 ì—°ìŠµë¬¸ì œ
## 2-1. 