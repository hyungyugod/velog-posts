# ğŸ“Œ 0. ë¦¬ì—‘íŠ¸ í›… 2
### ğŸ“Œ 0-1. useReducer
- dispatch:  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°œìƒí•œ ì´ë²¤íŠ¸ë¥¼ â€œì•¡ì…˜â€ ê°ì²´ë‚˜ ê°’ìœ¼ë¡œ ë¬¶ì–´ ë¦¬ë“€ì„œì— ì „ë‹¬í•˜ê³ , ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ìš”ì²­í•œë‹¤.
- useReducerëŠ” ë°°ì—´ì„ ë¦¬í„´í•˜ê³  result[0] â†’ í˜„ì¬ ìƒíƒœ(state), result[1] â†’ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” í•¨ìˆ˜(dispatch)ì´ë‹¤.
- 1ë²ˆ ìš”ì†Œ: ìƒíƒœ ê°±ì‹  í•¨ìˆ˜ë¼ê³  ë¶€ë¥´ë©° ì´ì „ê¹Œì§€ setterë¡œ ì•Œê³  ìˆì—ˆë˜ í•­ëª©ì´ë‹¤.
- ì¦‰ êµ¬ì¡°ë¶„í•´ í• ë‹¹ì„ í†µí•´ ì´ë¦„ì„ ë§ˆìŒëŒ€ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.
- useStateì—ì„œ setMyNumber â†’ â€œì´ë ‡ê²Œ ìƒíƒœë¥¼ ë°”ê¿”ì£¼ì„¸ìš”(ìƒˆ ê°’)â€
- useReducerì—ì„œ dispatch â†’ â€œì´ ì•¡ì…˜ì„ ì²˜ë¦¬í•´ì„œ ìƒíƒœë¥¼ ë°”ê¿”ì£¼ì„¸ìš”â€
- useState, useReducerëŠ” ë°°ì—´ ë°˜í™˜í˜•íƒœì´ê³  useMemoëŠ” ë°°ì—´ì´ ì•„ë‹Œ ë‹¨ì¼ê°’ì„ ë°˜í™˜í•œë‹¤.
- useEffectëŠ” ê°’ì„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©ë§Œ ë‹´ë‹¹ ì¦‰ ëœë”ë§ì´ ëë‚˜ê³  ê°’ì´ ë°”ë€Œë©´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤.
- useMemoëŠ” â€œì´ ê³„ì‚° ê²°ê³¼ë¥¼ í™”ë©´ì— ì“°ê² ë‹¤â€ëŠ” ëª©ì ì´ë¯€ë¡œ, ê°’ì„ ë°˜í™˜í•´ì•¼ í•¨ ì¦‰ ëœë” ì¤‘ì— í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ê³„ì‚°ëœ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•¨.
```js
import React, {memo, useReducer} from "react";
import styled from "styled-components";

const MyReducerContainer = styled.div``;

function setCouterValue(state, action) {
    switch (action) {
        case "HELLO":
            return state + 1;
        case "WORLD":
            return state - 1;
        default:
            return 0;
    }
}  

const MyReducer = memo(() => {
    const [counter, dispatch] = (setCouterValue, 0);

    return (
        <MyReducerContainer>
            <h1>í˜„ì¬ ì¹´ìš´íŠ¸ ê°’: {counter}</h1>
            <button onClick={() => dispatch("HELLO")}>ì¦ê°€</button>
            <button onClick={() => dispatch("WORLD")}>ê°ì†Œ</button>
            <button onClick={() => dispatch("")}>ì´ˆê¸°í™”</button>
        </MyReducerContainer>
    );
});

export default MyReducer;
```

### ğŸ“Œ 0-2. useRef
- Reactì—ì„œ useRefë¥¼ const myDname = useRef(); ì´ë ‡ê²Œ ì„ ì–¸í•˜ë©´, ë Œë”ë§ ê°„ì—ë„ ê°’ì´ ìœ ì§€ë˜ëŠ” â€œì°¸ì¡° ê°ì²´(reference object)â€ë¥¼ ë§Œë“œëŠ” ê²ƒê³¼ ê°™ë‹¤.
- ì£¼ë¡œ DOM ìš”ì†Œë¥¼ ì§ì ‘ ê°€ë¦¬í‚¤ê±°ë‚˜, ë Œë”ë§ ì‚¬ì´ì— ê°’ ë³´ê´€(storage) ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤.
- useRef() í˜¸ì¶œ â†’ { current: undefined } ê°ì²´ê°€ ìƒì„±
- myDnameì— í• ë‹¹ â†’ ì•ìœ¼ë¡œ myDname.currentë¡œ ê°’ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
- useStateëŠ” setState í˜¸ì¶œ â†’ ì»´í¬ë„ŒíŠ¸ ì¬ë Œë”ë§ì´ì§€ë§Œ
- useRefëŠ” .current ë³€ê²½ â†’ ë Œë”ë§ ì—†ìŒì¦‰ ë Œë” ê°„ ìœ ì§€í•´ì•¼ í•˜ì§€ë§Œ UIì— ë°”ë¡œ ë°˜ì˜ ì•ˆ í•  ê°’ì„ ì˜ë¯¸í•œë‹¤.
- `<input type="text" ref={myDname} id="dname" />` ì´ë ‡ê²Œ ì°¸ì¡°í•˜ë©´ í•´ë‹¹ `<input>` ìš”ì†Œì˜ ì‹¤ì œ DOM ë…¸ë“œê°€ myDname.currentì— ì €ì¥ëœë‹¤.
- ì •í™•í•œ ì‘ìš©ì€ Reactê°€ ì²˜ìŒ ì´ `<input>`ì„ DOMì— ë§ˆìš´íŠ¸í•  ë•Œ, myDname.current = (í•´ë‹¹ inputì˜ DOM ë…¸ë“œ)ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.
- ì´í›„ myDname.current.valueë¡œ ì…ë ¥ëœ ê°’ì„ ì½ê±°ë‚˜, myDname.current.focus()ì²˜ëŸ¼ DOM APIë¥¼ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
```js
/**
 * useRef
 *
 * Vanilla Scriptì—ì„œ `document.getElementById(...)` ë‚˜ `document.querySelector(...)`ë¡œ
 * DOM ê°ì²´ë¥¼ ì·¨ë“í•˜ëŠ” ê³¼ì •ì„ React ìŠ¤íƒ€ì¼ë¡œ í‘œí˜„í•œ ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.
 */
import React, {memo, useRef} from 'react';

import styled from 'styled-components';

import MyBox from "../MyBox";

const MyRefContainer = styled.div`
`;

const MyRef = memo(() => {
  // HTML íƒœê·¸ë¥¼ Reactì•ˆì—ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ì°¸ì¡°ë³€ìˆ˜ë¥¼ ìƒì„±
  const myDname = useRef();
  const myLoc = useRef();
  const myResult = useRef();

  // ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì„¤ì •í•˜ê¸° ìœ„í•œ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ìƒì„±
  const myBoxRef = useRef();

  return (
    <MyRefContainer>
      <h2>MyRef</h2>

      {/* ë¯¸ë¦¬ ì¤€ë¹„í•œ ì»´í¬ë„ŒíŠ¸ ì°¸ì¡°ë³€ìˆ˜ì™€ HTML íƒœê·¸ë¥¼ ì—°ê²° */}
      <div>
        <label htmlFor="dname">í•™ê³¼ëª… : </label>
        <input type="text" ref={myDname} id="dname" />
      </div>

      <div>
        <label htmlFor="dname">í•™ê³¼ìœ„ì¹˜ : </label>
        <input type="text" ref={myLoc} id="loc" />
      </div>

      <p>
        ì…ë ¥ê°’ í™•ì¸: <span ref={myResult} id='result'></span>
      </p>

      <button onClick={e => {
        // ê¸°ì¡´ì˜ Javascript ë°©ì‹
        // Reactì˜ SPA ì‘ë™ íŠ¹ì„±ìƒ íŠ¹ì • ì‹œì ì— ì „ì—­ì—ì„œ idê°’ì´ ê³ ìœ í•´ì•¼ í•œë‹¤.
        // ì´ ë°©ì‹ì€ ì‚¬ìš©í•˜ê¸° ë§¤ìš° ì–´ë µë‹¤.
        // const dname = document.querySelector("#dname").value;
        // const loc = document.querySelector("#loc").value;
        // document.querySelector("#result").innerHTML = dname + ", " + loc;

        // ì»´í¬ë„ŒíŠ¸ ì°¸ì¡°ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ë¥¸ HTML íƒœê·¸ì— ì ‘ê·¼ ê°€ëŠ¥
        // --> "ì°¸ì¡°ë³€ìˆ˜.current" í•´ë‹¹ HTMLì„ ì˜ë¯¸í•˜ëŠ” Javascript DOM ê°ì²´
        // --> myDname.currentì™€ document.querySelector("#dname")ì´ ë™ì¼í•œ DOMê°ì²´ì´ë‹¤.
        console.log(myDname);
        console.log(myLoc);
        console.log(myResult);

        const dname = myDname.current.value;
        const loc = myLoc.current.value;
        myResult.current.innerHTML = dname + ", " + loc;
      }}>í´ë¦­</button>

      <hr />

      <h3>ì»´í¬ë„ŒíŠ¸ì— ref ì ìš©í•˜ê¸°</h3>

      <MyBox a={100} b={200} ref={myBoxRef}/>

      <button type="button" onClick={() => {
        // <MyBox>ë¥¼ í†µí•´ myBoxRefë¥¼ ì£¼ì…ë°›ì€ DOMì— ì ‘ê·¼í•˜ì—¬ ì œì–´í•¨.
        myBoxRef.current.style.backgroundColor = "#f00";
      }}>Red</button>

      <button type="button" onClick={() => {
        // <MyBox>ë¥¼ í†µí•´ myBoxRefë¥¼ ì£¼ì…ë°›ì€ DOMì— ì ‘ê·¼í•˜ì—¬ ì œì–´í•¨.
        myBoxRef.current.style.backgroundColor = "#00f";
      }}>Blue</button>

    </MyRefContainer>
  );
});

export default MyRef;
```
- ì´ë•Œ ì‚¬ìš©ì ì •ì˜ ì»´í¬ë„ŒíŠ¸ `<MyBox a={100} b={200} ref={myBoxRef} />` ì •í™•íˆ ë§í•´ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ì „ë‹¬ ëŒ€ìƒì´ ì›ë˜ ì•„ë‹ˆë¯€ë¡œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ë¥¼ í†µì§¸ë¡œ refë¡œ ì „ë‹¬ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ eact.forwardRefë¡œ ê°ì‹¸ì•¼í•œë‹¤.
```js
import React, {forwardRef} from 'react';

import styled from 'styled-components';

const MyBoxContainer = styled.div`
  border: 3px solid #0066ff;
  text-align: center;
  width: 300px;
`;

// ë¶€ëª¨ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ref ì°¸ì¡°ë³€ìˆ˜ë¥¼ ë°›ê¸° ìœ„í•´ "React.forwardRef" hookì— ëŒ€í•œ ì½œë°±ìœ¼ë¡œ
// ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•œë‹¤.
// ì´ë ‡ê²Œ êµ¬í˜„ëœ ì»´í¬ë„ŒíŠ¸ëŠ” propsì™€ ë¶€ëª¨ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ref ì°¸ì¡°ë³€ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì£¼ì…ë°›ëŠ”ë‹¤.
const MyBox = forwardRef(({a, b}, ref) => {
  return (
    // ë¶€ëª¨ë¡œë¶€í„° ì „ë‹¬ë°›ì€ ì°¸ì¡°ë³€ìˆ˜ ì—°ê²°
    <MyBoxContainer>
      <h2 ref={ref}>MyBox</h2>
      <p>a={a}, b={b}</p>
    </MyBoxContainer>
  );
});

export default MyBox;
```

### ğŸ“Œ 0-3. useCallback
- ë©”ëª¨ë¦¬ì œì´ì…˜ ë ˆë²¨ë³„ë¡œ ì—­í• ì´ ìˆë‹¤.
- ì»´í¬ë„ŒíŠ¸: React.memo -> ì•„ë˜ì„œ MyCallback ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ë˜ëŠ” propsê°€ ë°”ë€Œì§€ ì•Šìœ¼ë©´ ê·¸ëŒ€ë¡œ ë‘”ë‹¤.
- í•¨ìˆ˜: useCallback -> ì˜ì¡´ì„± ê¸°ì¤€(ë°°ì—´ì— ì „ë‹¬í•˜ëŠ” ê°’)ìœ¼ë¡œ ê°’ì´ ì•ˆë°”ë€Œë©´ ì¬ëœë”ë§í•˜ì§€ ì•ŠìŒ
- ê°’(ë°ì´í„°): useMemo -> ì˜ì¡´ì„± ê¸°ì¤€(ë°°ì—´ì— ì „ë‹¬í•˜ëŠ” ê°’)ìœ¼ë¡œ ê°’ì´ ì•ˆë°”ë€Œë©´ ì¬ëœë”ë§í•˜ì§€ ì•ŠìŒ
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ê°™ì€ê±´ í•œë²ˆ ì •ì˜í•´ë‘ê³  ê³„ì† ì“°ëŠ”ê±´ë° í™”ë©´ ë‹¤ì‹œ ëœë”ë§í• ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì •ì˜í•  í•„ìš”ê°€ ì—†ê¸°ë•Œë¬¸ì— useCallbackì„ í™œìš©í•˜ì—¬ ì¬ëœë”ë§ì„ ë°©ì§€í•œë‹¤.
- ì¦‰ MyCallback ì»´í¬ë„ŒíŠ¸ì— ë‹¤ë¥¸ ê°’ì´ ì „ë‹¬ë˜ë”ë¼ë„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì²˜ìŒ ì •ì˜í•œ ëŒ€ë¡œ ëœë”ë§ë˜ê²Œ ëœë‹¤.
- ì´ë“ì„ ë³´ëŠ” ë¶€ë¶„ì€ [] ì˜ì¡´ì„± ë°°ì—´ ë•ë¶„ì—, useCallbackì€ ë§ˆìš´íŠ¸ ì‹œ í•œ ë²ˆ í•¨ìˆ˜ ê°ì²´ë¥¼ ë§Œë“¤ê³ , ì´í›„ ë Œë”ë§ì—ì„œëŠ” ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ì¦‰ ë©”ëª¨ë¦¬ì—ì„œ ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ì§€ ì•Šê³  ê¸°ì¡´ì˜ ë©”ëª¨ë¦¬ì— ìˆë˜ ê°ì²´ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê²Œ ë˜ëŠ”ê²ƒì´ë‹¤.
```js
/**
 * useCallback
 *
 * ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”ì— ì‚¬ìš©ë¨.
 * ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
 */
import React, {memo, useState, useCallback} from 'react';

import styled from 'styled-components';

const MyCallbackContainer = styled.div`
`;

const MyCallback = memo(() => {
  const [myText, setMyText] = useState('Hello React');

  console.log("MyCallback í•¨ìˆ˜ê°€ ì‹¤í–‰ë¨~!!");

  // useCallbackì€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ ê°±ì‹ ì„ ìœ„í•´ ë°˜ë³µì‹¤í–‰ë˜ëŠ” ê³¼ì •ì—ì„œ
  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ì •ì˜ë¥¼ ìµœì´ˆ 1íšŒë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
  // --> ê²°ë¡ : ëª¨ë“  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ë¬´ì¡°ê±´ "useCallback(ì´ë²¤íŠ¸í•¸ë“¤ëŸ¬, [])" ì•ˆì—ì„œ ì •ì˜
  const onInputChange = useCallback((e) => {
    setMyText(e.currentTarget.value);
  }, []);

  return (
    <MyCallbackContainer>
      <h2>MyCallback</h2>
      <h2>{myText}</h2>

      <input type="text" placeholder="input ..." onChange={onInputChange} />
    </MyCallbackContainer>
  );
});

export default MyCallback;
```

### ğŸ“Œ 0-4. ì‚¬ìš©ì ì •ì˜ í›…ê³¼ clean up í•¨ìˆ˜
- ë¦¬ì•¡íŠ¸ëŠ” MyWidth ì»´í¬ë„ŒíŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ effect ëª©ë¡ì„ ê´€ë¦¬í•œë‹¤. ì¦‰ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë ë•Œ ì‘ì„±ëœ effect ëª©ë¡ì„ ê°€ì§€ê³  ì–¸ë§ˆìš´íŠ¸ ë ë•Œ ë‹¤ì‹œ clean upì„ ì‹¤í–‰í•œë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ê·¸ë ¤ì§„ë‹¤. (ë§ˆìš´íŠ¸) -> ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± â†’ useEffect ë“±ë¡ ì½œë°± ì‹¤í–‰
- ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ ì œê±° ì§ì „(ì–¸ë§ˆìš´íŠ¸) â†’ useEffectê°€ ë°˜í™˜í•œ cleanup ì‹¤í–‰
```js
{
  create: effectCallback,    // ì½œë°± ë³¸ë¬¸
  destroy: null,              // cleanup í•¨ìˆ˜ê°€ ì €ì¥ë  ìë¦¬
  deps: [...]                 // ì˜ì¡´ì„± ë°°ì—´
}

// ì´ˆê¸° ë§ˆìš´íŠ¸ ë¡œì§ ì´í›„
for (const effect of effectList) {
  effect.destroy = effect.create();  // ë“±ë¡ ë¡œì§ ì‹¤í–‰ -> ë¦¬í„´í•¨ìˆ˜ê°€ destroyì— ì €ì¥ëœë‹¤.
}

// ì–¸ë§ˆìš´íŠ¸ì‹œ
for (const effect of fiber.effectList) {
  if (effect.destroy) effect.destroy();  // í•´ì œ ë¡œì§ ì‹¤í–‰ -> returní–ˆì—ˆë˜ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤.
}
```
- ìƒíƒœ ê°’ì„ ì •ì˜í•´ë‘ê³  íŠ¹ì • ì¡°ê±´ì´ ë°œìƒí–ˆì„ë•Œ dispatcherë¥¼ í˜¸ì¶œí•˜ëŠ” ì²˜ë¦¬ë¥¼ ì‚¬ìš©í• ë•Œ ê°„ëµí•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.
```js
import React, {useState, useEffect} from 'react';

/**
 * ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜.
 * useStateì™€ useEffectë¥¼ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ë¬¶ëŠ” ìš©ë„ë¡œ ì •ì˜í•¨.
 */
const useMyWidth = () => {
  // ë¸Œë¼ìš°ì €ì˜ ë„“ì´ë¥¼ ì˜ë¯¸í•˜ëŠ” ìƒíƒœê°’
  const [myWidth, setMyWidth] = useState(window.innerWidth);

  // ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜.
  // HTML DOMì— ì—°ê²°ë˜ëŠ” ì´ë²¤íŠ¸ê°€ ì•„ë‹ˆë¯€ë¡œ useCallbackì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ.
  const onMyResize = () => setMyWidth(window.innerWidth);

  // í˜ì´ì§€ ë¡œë“œì‹œì— ì´ë²¤íŠ¸ ì •ì˜, í˜ì´ì§€ ì¢…ë£Œì‹œì— ì´ë²¤íŠ¸ í•´ì œ
  useEffect(() => {
    window.addEventListener('resize', onMyResize);
    return () => window.removeEventListener('resize', onMyResize);
  }, []);

  // ë§ˆì§€ë§‰ì— ìƒíƒœê°’ì„ ë¦¬í„´í•œë‹¤.
  return myWidth;
};

export { useMyWidth };
```
- í•¨ìˆ˜ ì°¸ì¡°(Reference): const fn = useMyWidth;
- í•¨ìˆ˜ í˜¸ì¶œ(Call): const myWidth = useMyWidth(); -> ë¦¬í„´ê°’ ëŒ€ì…
```js
/**
 * ì§ì ‘ Hook í•¨ìˆ˜ ì •ì˜í•˜ê¸°
 * --> ë¦¬ì•¡íŠ¸ ìŠ¤íƒ€ì¼ì˜ ëª¨ë“ˆí™”
 */
import React, {memo} from 'react';

import { useMyWidth } from '../../hooks/MyHooks';

const MyWidth = memo(() => {

    const myWidth = useMyWidth();

    return (
        <div>
            <h2>MyWidth</h2>
            <h2>windowWidth: {myWidth}</h2>
        </div>
    );
});

export default MyWidth;
```