# ğŸ“Œ 0. ëŒ€í™”
### ğŸ“Œ 0-1. ìŠ¤í”„ë§ ë‚´ë¶€ í•¨ìˆ˜ ìš”ì²­ íŠ¸ë¦¬ ì½”ë“œ
```java
í†°ìº£(Http11Processor).service() {
    // ë¸Œë¼ìš°ì €ì—ì„œ HTTP ìš”ì²­ì´ ë“¤ì–´ì˜´

    // 1. ìš”ì²­ URLê³¼ HTTP ë©”ì„œë“œ(GET/POST ë“±) íŒŒì‹±
    // 2. í•´ë‹¹ URLì„ ì–´ë–¤ ì„œë¸”ë¦¿ì´ ì²˜ë¦¬í•˜ëŠ”ì§€ ê²°ì •

    DispatcherServlet.service(request, response) {
        // 1. DispatcherServletì˜ doService() í˜¸ì¶œ (doGet/doPost ë“±ì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ)
        doDispatch(request, response) {

            // 2. HandlerMappingì„ ì´ìš©í•´ Handler(ì»¨íŠ¸ë¡¤ëŸ¬) íƒìƒ‰
            HandlerExecutionChain handler = getHandler(request) {
                // ì—¬ëŸ¬ HandlerMapping ì¤‘ì— URLê³¼ ë§¤í•‘ëœ í•¸ë“¤ëŸ¬(Controller) ì°¾ê¸°
                // ì˜ˆ: @RequestMapping("/hello") Controller
                // (ë³´í†µ RequestMappingHandlerMapping ì‚¬ìš©)
            }

            // 3. HandlerAdapter ì°¾ê¸° (Controller í˜¸ì¶œ ë°©ë²•ì„ ê²°ì •)
            HandlerAdapter ha = getHandlerAdapter(handler.getHandler()) {
                // ë³´í†µ RequestMappingHandlerAdapter ì‚¬ìš©
            }

            // 4. ì‹¤ì œ Controller ë©”ì„œë“œ í˜¸ì¶œ (í•¸ë“¤ëŸ¬ ì‹¤í–‰)
            ModelAndView mv = ha.handle(request, response, handler.getHandler()) {
                // Controller(ì˜ˆ: HelloController)ì˜ ë©”ì„œë“œ ì‹¤í–‰
                HelloController.hello(request, response) {
                    // í•„ìš”í•œ ê²½ìš° Service/Repository í˜¸ì¶œ
                    helloService.greet(name) {
                        // DBì¡°íšŒ, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
                        helloRepository.findUser(name) {
                            // DBì—ì„œ ì‚¬ìš©ì ì •ë³´ ì°¾ê¸°
                        }
                    }
                    // ê²°ê³¼(Model) ë°˜í™˜
                }
                // ModelAndView(ë·° ì´ë¦„, ë°ì´í„°) ë°˜í™˜
            }

            // 5. View ì´ë¦„ì„ ViewResolverë¡œ í•´ì„í•´ì„œ View ê°ì²´ ìƒì„±
            View view = resolveViewName(mv.getViewName(), mv.getModel(), locale, request) {
                // InternalResourceViewResolver ë“±
                // ì˜ˆ: "hello" â†’ "/templates/hello.html" íŒŒì¼
            }

            // 6. View(í…œí”Œë¦¿ ì—”ì§„)ì—ì„œ HTML ë Œë”ë§
            view.render(mv.getModel(), request, response) {
                // Thymeleaf, JSP, Mustache ë“±
                // Model ë°ì´í„°ë¥¼ í™”ë©´ì— ë°”ì¸ë”©í•´ì„œ ì™„ì„±ëœ HTML ìƒì„±
            }
        }
    }
    // 7. ì™„ì„±ëœ HTMLì´ í†°ìº£ì„ ê±°ì³ ë¸Œë¼ìš°ì €ë¡œ ì‘ë‹µ
}
```

### ğŸ“Œ 0-2. Handler(í•¸ë“¤ëŸ¬)
- í•¸ë“¤ëŸ¬(Handler)ëŠ” "ì‹¤ì œë¡œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì£¼ì²´(ì»¨íŠ¸ë¡¤ëŸ¬/ë©”ì„œë“œ)"ë¥¼ ì˜ë¯¸í•œë‹¤.
- ì¦‰, Controller í´ë˜ìŠ¤, í˜¹ì€ ê·¸ ì•ˆì˜ íŠ¹ì • ë©”ì„œë“œê°€ ë°”ë¡œ Handlerì´ë‹¤.
- @Controllerì€ DispatcherServletì´ ì´ê²Œ ì»¨íŠ¸ë¡¤ëŸ¬êµ¬ë‚˜ í•˜ê³  ì•Œ ìˆ˜ ìˆê²Œ ì•Œë ¤ì£¼ëŠ”(annotation: ì„¤ëª…, ì£¼ì„) ì—­í• ì„ í•¨.

### ğŸ“Œ 0-3. HandlerAdapter
- ìŠ¤í”„ë§ì—ì„œëŠ” ë‹¤ì–‘í•œ í˜•íƒœì˜ í•¸ë“¤ëŸ¬ë¥¼ ì§€ì›í•˜ëŠ”ë° ìš”ì¦˜ì—” @Controller í´ë˜ìŠ¤ì™€ ë©”ì„œë“œ, @RestController, í•¨ìˆ˜í˜• í•¸ë“¤ëŸ¬ ë“±ë“±ì´ ìˆë‹¤.
- ê·¸ëŸ°ë° ì´ê±¸ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì´ ë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ HandlerAdapterëŠ” "ê°ì¢… Handler(ì»¨íŠ¸ë¡¤ëŸ¬)"ì˜ ì‹¤í–‰ ë°©ë²•ì„ í†µì¼í•´ì£¼ëŠ” ì¤‘ê°„ ì–´ëŒ‘í„° ì—­í• ì„ í•œë‹¤.
- í•¸ë“¤ëŸ¬ë¥¼ ë°›ì•„ì„œ ê·¸ í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ë°©ë²•ì„ íŒŒì•…í•˜ê³  ì§ì ‘ ì‹¤í–‰í•´ì¤€ë‹¤.
- ì¦‰ DispatcherServlet ë‚´ë¶€ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬ëœë‹¤.
```java
// 1. ì–´ë–¤ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì²˜ë¦¬í• ì§€ ì°¾ê¸°
Object handler = handlerMapping.getHandler(request);

// 2. ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì–´ë–»ê²Œ ì‹¤í–‰í• ì§€ ê²°ì •
HandlerAdapter ha = getHandlerAdapter(handler);

// 3. ì‹¤ì œ ì‹¤í–‰
ModelAndView mv = ha.handle(request, response, handler);
```

### ğŸ“Œ 0-4. REST API ë°©ì‹ ë³„ ì°¨ì´

| ë°©ì‹     | ì£¼ìš” ëª©ì     | ë°ì´í„° ì „ë‹¬ ì˜ˆì‹œ     | ì‹¤ì œ ì‚¬ìš© ìƒí™©        |
| ------ | -------- | ------------- | --------------- |
| GET    | ì¡°íšŒ/ê²€ìƒ‰    | ì¿¼ë¦¬ìŠ¤íŠ¸ë§         | ë¦¬ìŠ¤íŠ¸, ê²€ìƒ‰, í•œ ê±´ ì¡°íšŒ |
| POST   | ìƒì„±/ë“±ë¡    | body(ì „ì²´ ì •ë³´)   | íšŒì›ê°€ì…, ê¸€ì“°ê¸°, ë¡œê·¸ì¸  |
| PUT    | ì „ì²´ ìˆ˜ì •/ìƒì„± | body(ì „ì²´ ì •ë³´)   | íšŒì›ì •ë³´ ì „ì²´ ë³€ê²½      |
| PATCH  | ì¼ë¶€ ìˆ˜ì •    | body(ìˆ˜ì •í•  ë¶€ë¶„ë§Œ) | íšŒì›ì˜ ì´ë©”ì¼ë§Œ ë°”ê¾¸ê¸° ë“±  |
| DELETE | ì‚­ì œ       | URL(ì‚­ì œ ëŒ€ìƒ ì§€ì •) | íšŒì›, ê¸€, ëŒ“ê¸€ ì‚­ì œ    |

| HTTP ë©”ì„œë“œ   | ê²½ë¡œ         | ì£¼ìš” ë™ì‘/ì„¤ëª…     | ì˜ˆì‹œ                         |
| ---------- | ---------- | ------------ | -------------------------- |
| **GET**    | /users     | ì „ì²´ íšŒì› ëª©ë¡ ì¡°íšŒ  | `/users`                   |
| **GET**    | /users/123 | íŠ¹ì • íšŒì› ì¡°íšŒ     | `/users/123`               |
| **POST**   | /users     | íšŒì› ì‹ ê·œ ë“±ë¡     | `/users` + body(íšŒì›ì •ë³´)      |
| **PUT**    | /users/123 | íšŒì› ì „ì²´ ì •ë³´ ìˆ˜ì •  | `/users/123` + body(ì „ì²´ ì •ë³´) |
| **PATCH**  | /users/123 | íšŒì› ì¼ë¶€ ì •ë³´ë§Œ ìˆ˜ì • | `/users/123` + body(ì¼ë¶€ ì •ë³´) |
| **DELETE** | /users/123 | íšŒì› ì‚­ì œ        | `/users/123`               |


# ğŸ“Œ 1.  get, post, path controller ë©”ì„œë“œ íŒŒë¼ë¯¸í„° í™œìš© í˜ì´ì§€
### ğŸ“Œ 1-1. í—¤ë” ë°˜ë³µì‚¬ìš©
- ìš°ì„  fragments í´ë”ì— í•´ë‹¹ í…œí”Œë¦¿ì„ ë„£ì–´ë‘”ë‹¤.
- ì´ë•Œ íƒ€ì„ë¦¬í”„ì—ì„œ @{/get/home} ì´ í‘œí˜„ì‹ì€ í•´ë‹¹ ì£¼ì†Œë¥¼ ìš°ì„  controllerì—ì„œ ì°¾ê³  ì—†ìœ¼ë©´ staticì—ì„œ ì°¾ëŠ”ë‹¤. 
- ì •í™•íˆ **@{...}**ëŠ” "ì´ ì•ˆì— ë“¤ì–´ê°€ëŠ” ê²½ë¡œë¥¼ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜" ë¼ëŠ” ëœ»ìœ¼ë¡œ ìŠ¤í”„ë§ë¶€íŠ¸, ìŠ¤í”„ë§ MVCì—ì„œëŠ” ë™ì  ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤í•‘ì´ ìš°ì„ ì ì´ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ íƒìƒ‰ ìˆœì„œë¡œ ê²½ë¡œë¥¼ ì„¤ì •í•œë‹¤.
- ë¹„ìœ ì ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë§ì¶¤ ì„œë¹„ìŠ¤(ë™ì ), staticì€ ì…€í”„ ì„œë¹„ìŠ¤(ì •ì )ì´ë‹¤.
- íƒ€ì„ë¦¬í”„ í‘œí˜„ì‹ì€ ë‘ê°€ì§€ê°€ ìˆëŠ”ë° ì°¨ì´ì ì€ ì•„ë˜ì™€ ê°™ë‹¤.

| í‘œí˜„ì‹   | ì—­í•           | ìš©ë„               | ì˜ˆì‹œ                             |
| ----- | ----------- | ---------------- | ------------------------------ |
| `${}` | ë³€ìˆ˜ í‘œí˜„ì‹      | ê°’ ì¶œë ¥, ì¡°ê±´ ë“±       | `<p>${name}</p>`               |
| `@{}` | URL(ë§í¬) í‘œí˜„ì‹ | href, action, ê²½ë¡œ | `<a th:href="@{/home}">ì´ë™</a>` |


```html
<!DOCTYPE html>
<html lang="ko" translate="no" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="nottranslate" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>header</title>
</head>
<body>
    <header th:fragment="my-header">
        <link rel="stylesheet" th:href="@{/assets/css/header.css}">
        <h1>04-Params</h1>
        <nav class="gnb">
            <a th:href="@{/get/home}">Get íŒŒë¼ë¯¸í„°</a>
            <a th:href="@{/post/home}">Post íŒŒë¼ë¯¸í„°</a>
            <a th:href="@{/path/home}">Path íŒŒë¼ë¯¸í„°</a>
            <a th:href="@{/survey}">ì„¤ë¬¸ì¡°ì‚¬</a>
        </nav>
    </header>
</body>
</html>
```
- ìœ„ì™€ ê°™ì´ ë§Œë“¤ì–´ë‘” í—¤ë”ë¥¼ ì—¬ëŸ¬ í˜ì´ì§€ì—ì„œ ë°˜ë³µì‚¬ìš©í•œë‹¤. <header th:fragment="my-header"> ì´ì™€ ê°™ì´ ì¡°ê°ì„ ì„ ì–¸í•´ë‘”ë‹¤.
- ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ëŠ”ë° íƒ€ì„ë¦¬í”„ì˜ th:replace ì†ì„±ì€ â†’ í˜„ì¬ íƒœê·¸ë¥¼ "ë‹¤ë¥¸ í…œí”Œë¦¿ ì¡°ê°(fragment)ìœ¼ë¡œ í†µì§¸ë¡œ ëŒ€ì²´"í•˜ë¼ëŠ” ëœ»ì´ë‹¤.
- ~{fragments/header :: my-header} : fragments/headerë¼ëŠ” í…œí”Œë¦¿ íŒŒì¼ ì•ˆì—ì„œ my-headerë¼ëŠ” **fragment(ì¡°ê°)**ë§Œ ë½‘ì•„ì„œ ì´ ìœ„ì¹˜ì— ë„£ìœ¼ë¼ëŠ” ëœ»ì´ë‹¤.
- ì´ë•Œ í•´ë‹¹ íƒœê·¸ì— ë®ì–´ì”Œì›Œì§€ê¸° ë•Œë¬¸ì— divëŠ” ì—†ì–´ì§€ê³  ëŒ€ì²´ëœë‹¤.
- ìœ„ì—ì„œ ë³´ë©´ cssì½”ë“œë„ fragmentì— í¬í•¨í•´ì„œ ê°™ì´ ì „ë‹¬í•˜ê³  ìˆë‹¤.
- xmlns:th="http://www.thymeleaf.org" í•´ë‹¹ namespace ì„ ì–¸ì€ êµ³ì´ í•„ìš” ì—†ì§€ë§Œ ê³µì‹ë¬¸ì„œì—ëŠ” ìˆëŠ”ê²Œ ì¢‹ë‹¤. ê·¸ëƒ¥ thë§Œ ìˆì–´ë„ ì•Œì•„ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤.
- ì¦‰ íƒ€ì„ë¦¬í”„ëŠ” HTML íŒŒì‹±í•  ë•Œ ëª¨ë“  ì†ì„± ì¤‘ì—ì„œ th:ë¡œ ì‹œì‘í•˜ëŠ” ì†ì„±ì„ ì°¾ì•„ ê·¸ì— ë§ëŠ” í…œí”Œë¦¿ ê¸°ëŠ¥(th:text, th:if, th:replace ë“±)ì„ ë™ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.
- xmlns: xml name spaceì˜ ì¤„ì„ë§ì´ë‹¤.
- ì•„ë˜ì™€ ê°™ì€ replaceë¥¼ ê° í˜ì´ì§€ë§ˆë‹¤ êµ¬ì„±í•˜ì—¬ ë™ì¼í•œ headerë¥¼ ê°€ì§€ë„ë¡ ë””ìì¸í•˜ì˜€ë‹¤.
```html 
<!DOCTYPE html>
<html lang="ko" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="nottranslate" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home</title>
</head>
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>
    <h2>get/home</h2>
</body>
</html>
```

### ğŸ“Œ 1-2. @RequestParam ì–´ë…¸í…Œì´ì…˜
- requst ê°ì²´ë¡œ ë¶ˆëŸ¬ì™€ì•¼í•  íŒŒë¼ë¯¸í„°ì˜ ì •ë³´ë¥¼ ëŒ€ì‹  ë°”ë¡œ ê°€ì ¸ì™€ì¤€ë‹¤.
- ìŠ¤í”„ë§ mvcì—ì„œ HandlerMethodArgumentResolverë¼ëŠ” ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.
- @RequestParamì€ ë¬¸ìì—´ íŒŒë¼ë¯¸í„°ë¥¼ ë‚´ê°€ ì„ ì–¸í•œ íƒ€ì…ìœ¼ë¡œ ConversionServiceê°€ ìë™ ë³€í™˜í•´ì¤€ë‹¤. 
```java
if (parameter.isAnnotationPresent(RequestParam.class)) {
    String paramName = getParameterName(parameter);
    String value = request.getParameter(paramName);
    // íƒ€ì… ë³€í™˜, null ì²´í¬ ë“± ì¶”ê°€ ì‘ì—…
    ...
}
```
- ì•„ë˜ëŠ” getMappingì„ í™œìš©í•´ì„œ home.htmlì—ì„œ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ë•Œì˜ ìš”ì²­ì„ ë°›ëŠ” result ë©”ì„œë“œë¥¼ ì •ì˜í•˜ì˜€ë‹¤.
- required=falseë¥¼ ì„¤ì •í•˜ì—¬ íŒŒë¼ë¯¸í„°ê°€ ì „ë‹¬ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í—ˆìš©í•˜ëŠ” ì˜µì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
```java
@Controller
public class GetController {
    @GetMapping("/get/home")
    public String home() {
        return "/get/home";
    }

    @GetMapping("/get/result")
    public String result(Model model, @RequestParam(value = "answer", defaultValue = "0") int myAnswer) {
        String result = null;

        if (myAnswer == 300) result = "ì •ë‹µ";
        else result = "ì˜¤ë‹µ";
        
        model.addAttribute("result", result);
        model.addAttribute("myAnswer", myAnswer);
        
        return "get/result";
    }
    
}
```
- ì•„ë˜ëŠ” ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ í•´ë‹¹ ê°’ì„ urlì— ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì— í¬í•¨í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
```html
<!DOCTYPE html>
<html lang="ko" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="nottranslate" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>home</title>
</head>
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>
    <h2>100+200=?</h2>
    <ul>
        <!-- í•˜ë“œì½”ë”©ìœ¼ë¡œ QueryString íŒŒë¼ë¯¸í„° ì „ë‹¬ -->
        <!-- <li><a href="/get/result?answer=100">100</a></li> -->

        <!-- íƒ€ì„ë¦¬í”„ë¡œ QueryString íŒŒë¼ë¯¸í„° ì „ë‹¬ -->
        <li><a th:href=@{/get/result(answer=100)}>100</a></li>
        <li><a th:href=@{/get/result(answer=200)}>200</a></li>
        <li><a th:href=@{/get/result(answer=300)}>300</a></li>
        <li><a th:href=@{/get/result(answer=400)}>400</a></li>
        <li><a th:href=@{/get/result(answer=500)}>500</a></li>
</ul>
</body>
</html>
```

### ğŸ“Œ 1-3. postë°©ì‹ì˜ ìš”ì²­ ì²˜ë¦¬
- POST ë°©ì‹ìœ¼ë¡œ í¼ì„ ì „ì†¡í•˜ë©´, ì…ë ¥í•œ ë°ì´í„°(user_name, user_age)ëŠ” "HTTP ìš”ì²­ì˜ Body(ë³¸ë¬¸)"ì— ë‹´ê²¨ì„œ ì„œë²„ë¡œ ì „ì†¡ëœë‹¤.
- ì •ë³´ê°€ ì˜¤ë©´ HandlerMethodArgumentResolver ì¤‘  RequestParamMethodArgumentResolverë¼ëŠ” ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ê°€ @RequestParamì´ ë¶™ì€ íŒŒë¼ë¯¸í„°ë¥¼ ìë™ ì²˜ë¦¬í•œë‹¤. ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¡œ ì²˜ë¦¬í•œë‹¤.
```java
if (parameter.isAnnotationPresent(RequestParam.class)) {
    String paramName = getParameterName(parameter); // user_name
    String value = request.getParameter(paramName); // "ì² ìˆ˜"
    // (íƒ€ì… ë³€í™˜ ë“± ì¶”ê°€ ì‘ì—…)
    // ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì— ìë™ í• ë‹¹!
}
```
- ì•„ë˜ëŠ” postController ì½”ë“œì´ë‹¤. defaultValueëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ ë¶€ì—¬ëœ ê°’ì´ ì—†ì„ ë•Œ ê°’ì„ ì§€ì •ëœ ê°’ìœ¼ë¡œ ì±„ì›Œë„£ëŠ”ë‹¤.
```java
@Controller
public class PostController {
    @GetMapping("/post/home")
    public String home() {
        return "/post/home";
    }

    @PostMapping("/post/answer")
    public String post(Model model, HttpServletResponse response, 
                        @RequestParam("user_name") String name,
                        @RequestParam(value = "user_age", defaultValue = "0") int age) {
        model.addAttribute("name", name);
        model.addAttribute("ageGroup", age / 10 * 10);
        
        return "post/result";
    }
    
}
```
- ì•„ë˜ëŠ” home.htmlì˜ êµ¬ì„±ì´ë‹¤.
- methodê°€ postë¡œ ì…ë ¥ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìœ¼ë©° ì´ë•Œ action ì†ì„±ì€ â€œí¼ì„ ì œì¶œí•  ë•Œ ë°ì´í„°ë¥¼ ì–´ë””ë¡œ(ì–´ë–¤ URLë¡œ) ë³´ë‚¼ì§€ ì§€ì •í•˜ëŠ” ì†ì„±"ì´ë‹¤.
- ì´ë•Œ í¼ì„ ìš”ì²­í•˜ëŠ” ì£¼ì†ŒëŠ” /post/answerì´ê²Œ ëœë‹¤. ì¦‰ **"ìƒˆ ìš”ì²­ì´ ë°œìƒí•˜ê³ , ê·¸ ì‘ë‹µ ê²°ê³¼ê°€ ë¸Œë¼ìš°ì €ì— ìƒˆë¡œ í‘œì‹œëœë‹¤"**
- ì¦‰ ìƒˆë¡œìš´ ìš”ì²­ì„ ë°˜í™˜í•  ë•Œ ë¸Œë¼ìš°ì €ëŠ” ê·¸ ì‘ë‹µ ë‚´ìš©ì„ "ìƒˆë¡œ í™”ë©´ì— í‘œì‹œ"í•˜ë©´ì„œ ì£¼ì†Œì°½ë„ /post/answer(ìš”ì²­ì´ ì™”ë˜ ì£¼ì†Œ)ë¡œ ê°±ì‹ í•œë‹¤.
- ì•„ë˜ëŠ” @PathVariable ì™€ @RequestParamì˜ êµ¬ì²´ì ì¸ ì°¨ì´ì´ë‹¤.

| ì°¨ì´ì       | @PathVariable                    | @RequestParam                |
| -------- | -------------------------------- | ---------------------------- |
| ê°’ì´ ì˜¤ëŠ” ìœ„ì¹˜ | **URL ê²½ë¡œì˜ ì¤‘ê´„í˜¸({}) ë¶€ë¶„**           | **URLì˜ ?ë’¤(ì¿¼ë¦¬ìŠ¤íŠ¸ë§), í¼ ë°ì´í„°**    |
| ì˜ˆì‹œ ì£¼ì†Œ    | /path/result/**hello/world/123** | /search?keyword=**hello**    |
| íŒŒë¼ë¯¸í„° ì„ ì–¸  | @PathVariable String txt1        | @RequestParam String keyword |


```html
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>

    <h2>ë‹¹ì‹ ì˜ ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</h2>

    <form name="form" method="post" class="form" th:action="@{/post/answer}">
        <div>
            <label for="user_name">ì´ë¦„</label>
            <input type="text" name="user_name" id="user_name" />
        </div>
        <div>
            <label for="user_age">ë‚˜ì´</label>
            <input type="text" name="user_age" id="user_age" />
        </div>
        <div>
            <button type="submit">ì „ì†¡</button>
        </div>
    </form>
</body>
```
- ì´ë•Œ ì•„ë˜ì˜ resultê³¼ modelì— ë‹´ê²¨ìˆëŠ” ë³€ìˆ˜ê°€ í•©ì³ì ¸ì„œ ë¸Œë¼ìš°ì €(ìš”ì²­ì„ ë³´ëƒˆë˜ ê³³ìœ¼ë¡œ)ë¡œ ë‹¤ì‹œ ë³´ë‚´ì§„ë‹¤.
``html
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>
    <p class="result">
        <span class="name" th:text=${name}></span>ë‹˜ì€
        <span class="age-group" th:text=${ageGroup}></span>ëŒ€ ì…ë‹ˆë‹¤.
    </p>
</body>
```

### ğŸ“Œ 1-4. path íŒŒë¼ë¯¸í„° í™œìš©
- getë°©ì‹ì˜ íŒŒë¼ë¯¸í„°ì—ì„œ ìš”ì²­ë°›ì„ ì£¼ì†Œì˜ êµ¬ì²´ì ì¸ í˜•ì‹ì„ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆë‹¤.
- {} ì•ˆì— ë“¤ì–´ìˆëŠ” ê°’ì€ ë³€ìˆ˜ë¡œ "ì•ìœ¼ë¡œ ì„¸ ê°œì˜ ê°’ì´ /ë¡œ êµ¬ë¶„ë˜ì–´ ìˆœì„œëŒ€ë¡œ ë“¤ì–´ì˜¤ë©´, ê·¸ ê°’ì„ ê°ê° ë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•œë‹¤!"ëŠ” ëœ»ì´ê³  êµ¬ì²´ì  íƒ€ì…ì€ ë°›ì„ë•Œ ì§€ì •í•œë‹¤.
- @PathVariableì€ URL ê²½ë¡œ(ì£¼ì†Œ)ì—ì„œ ë³€ìˆ˜ ê°’ì„ ì¶”ì¶œí•´ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.
- ìœ„ì˜ ì–´ë…¸í…Œì´ì…˜ì€ ê²½ë¡œ ìì²´ì— ë³€ìˆ˜ê°€ ìˆì–´ì•¼ í•˜ë¯€ë¡œ /path/result/{txt1}/{txt2}/{num} ì´ëŸ°ì‹ìœ¼ë¡œ ê²½ë¡œê°€ ì˜¬ ë•Œ ì‚¬ìš©í•œë‹¤.
```java
@Controller
public class PathController {
    @GetMapping("/path/home")
    public String home() {
        return "/path/home";
    }

    @GetMapping("/path/result/{txt1}/{txt2}/{num}")
    public String result(Model model,
                        @PathVariable("txt1") String txt1,
                        @PathVariable("txt2") String txt2,
                        @PathVariable("num") int num) {
            model.addAttribute("txt1", txt1);
            model.addAttribute("txt2", txt2);
            model.addAttribute("num", num);

        return "path/result";
    }
}
```

### ğŸ“Œ 1-5. ìƒíƒœ ìœ ì§€(state persistence)
- ë‹¤ë‹¨ê³„í¼, ìœ„ì €ë“œ íŒ¨í„´ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
- ì›¹ì€ ê¸°ë³¸ì ìœ¼ë¡œ stateless(ìƒíƒœë¥¼ ê¸°ì–µí•˜ì§€ ì•ŠìŒ) êµ¬ì¡°ì´ë‹¤. í•˜ì—¬ íŒŒë¼ë¯¸í„°ì— ê°’ì„ ê³„ì† ì €ì¥í•˜ê±°ë‚˜ ì„¸ì…˜ ê³µê°„ì— ê°’ì„ ì €ì¥í•˜ê±°ë‚˜ ë¸Œë¼ìš°ì € ì¿ í‚¤ì— ê°’ì„ ì €ì¥í•´ì„œ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë“±ì˜ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
- ì•„ë˜ì—ì„œëŠ” ì²˜ìŒì„ ì œì™¸í•˜ê³  ê³„ì† post ë°©ì‹ìœ¼ë¡œ í¼ì—ì„œ ë³€ìˆ˜ë¥¼ ë°›ì•„ì„œ ë‹¤ìŒ í™”ë©´ì„ êµ¬ì„±í•œë‹¤. ì´ë•Œ ëª¨ë¸ì— ì´ì „ê°’ë“¤ì„ ê³„ì† ì‹¤ì–´ ë³´ë‚´ì–´ ë³´ì´ì§€ ì•ŠëŠ” input íƒœê·¸ì— ê³„ì† ê°’ì„ valueë¡œ ì§€ì •í•˜ì—¬ ì €ì¥í•´ë‘”ë‹¤. ê·¸ëŸ¬ë©´ ì´ëŠ” í¼íƒœê·¸ì˜ ë°ì´í„°ê°€ post ë°©ì‹ìœ¼ë¡œ ì˜¬ë•Œ ê°™ì€ ë‹¤ë¥¸ ì…ë ¥ê°’ê³¼ ê°™ì€ valueì´ë¯€ë¡œ ë§¤ë²ˆ ê°™ì´ ì˜¤ê²Œ ëœë‹¤.
```java
@Controller
public class SurveyController {

    @GetMapping("/survey")
    public String index() {
        return "survey/index";
    }

    @PostMapping("/survey/step1")
    public String step1 (Model model,
                        @RequestParam("name") String name) {
        model.addAttribute("name", name);
        return "survey/step1";
    }

    @PostMapping("/survey/step2")
    public String step1 (Model model,
                        @RequestParam("name") String name,
                        @RequestParam("age") int age) {
        model.addAttribute("name", name);
        model.addAttribute("age", age);
        return "survey/step2";
    }

    @GetMapping("/survey/step3")
    public String step1 (Model model,
                        @RequestParam("name") String name,
                        @RequestParam("age") int age,
                        @RequestParam("group") String group) {
        model.addAttribute("name", name);
        model.addAttribute("age", age);
        model.addAttribute("group", group);
        return "survey/step3";
    }

    @GetMapping("/survey/step4")
    public String step1 (Model model,
                        @RequestParam("name") String name,
                        @RequestParam("age") int age,
                        @RequestParam("group") String group,
                        @RequestParam("glasses") String glasses) {
        model.addAttribute("name", name);
        model.addAttribute("age", age);
        model.addAttribute("group", group);
        model.addAttribute("glasses", glasses);
        return "survey/step4";
    }
}
```
- index.htmlì€ ì•„ë˜ì™€ ê°™ë‹¤.
- ì´ë•Œ placeholderëŠ” ì…ë ¥ì°½ì— í¬ë¯¸í•˜ê²Œ ë³´ì´ëŠ” ì•ˆë‚´ë¬¸êµ¬ì´ê³  requiredëŠ” ë°˜ë“œì‹œ ê°’ì„ ì…ë ¥í•´ì•¼ í¼ì„ ì œì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” í‘œì‹œì´ë‹¤. ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ ì´ í•„ë“œë¥¼ ì±„ì›Œì£¼ì„¸ìš”ë¼ëŠ” ì•ˆë‚´ë©”ì„¸ì§€ê°€ ëœ¬ë‹¤.
```html
<h3>1. ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.</h3>
    <form action="/survey/step1">
        <input type="text" name="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." required>
        <button type="submit">ë‹¤ìŒ</button>
    </form>
```
- stepì˜ ê¸°ë³¸ êµ¬ì„±ì€ ì•„ë˜ì™€ ê°™ë‹¤.
- <input type="hidden" name="name" th:value="${name}"> ì´ë ‡ê²Œ í˜„ì¬ ë°›ì•˜ë˜ ìë°” ë³€ìˆ˜ë¥¼ input hiddenìœ¼ë¡œ ë°›ê³  ìƒˆë¡œìš´ ì§ˆë¬¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ë¸Œë¼ìš°ì €ì— ë³´ë‚¸ë‹¤.
```html
<div th:replace="~{fragments/header :: my-header}"></div>

    <h2>ì„¤ë¬¸ì¡°ì‚¬ ì˜ˆì œ</h2>
    <p>ì•ˆë…•í•˜ì„¸ìš”. ê°„ë‹¨í•œ ì„¤ë¬¸ì— ì°¸ì—¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>

    <h3>2. ë‚˜ì´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</h3>
    <form th:action="@{/survey/step2}" method="post">
        <input type="hidden" name="name" th:value="${name}">
        <input type="number" name="age" placeholder="ë‚˜ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." required>
        <button type="submit">ë‹¤ìŒ</button>
    </form>
```
- ì•„ë˜ëŠ” ì–‘ìíƒì¼ ì„ íƒ í˜ì´ì§€ì´ë‹¤.
- ë§í¬ì˜ ê°’ì— $ê¸°í˜¸ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ì¶”ê°€í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ê°™ì´ ë³´ë‚´ë„ë¡ í•œë‹¤.
```html
<body>
    <div th:replace="~{fragments/header :: my-header}"></div>

    <h2>ì„¤ë¬¸ì¡°ì‚¬ ì˜ˆì œ</h2>
    <p>ì•ˆë…•í•˜ì„¸ìš”. ê°„ë‹¨í•œ ì„¤ë¬¸ì— ì°¸ì—¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>

    <h3>3. í•´ë‹¹í•˜ëŠ” í•­ëª©ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</h3>
    <ol>
        <li><a th:href="@{/survey/step3(name=${name}, age=${age}, group=student)}">í•™ìƒ</a>/li>
        <li><a th:href="@{/survey/step3(name=${name}, age=${age}, group=teacher)}">êµì‚¬</a></li>
    </ol>
</body>
</html>
```
- ì—ëŸ¬: Method 'GET' is not supported. - ì§€ê¸ˆ ë¸Œë¼ìš°ì €ê°€ "GET" ë°©ì‹ìœ¼ë¡œ ìš”ì²­ì„ ë³´ëƒˆëŠ”ë°, ì„œë²„(ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬)ëŠ” GET ë°©ì‹ ì²˜ë¦¬ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ì„œ ìƒê¸´ ê²ƒ
- ì›ì¸: í¼ì— method=postë¥¼ ëª…ì‹œí•´ì£¼ì§€ ì•ŠìŒ. 
- ì—ëŸ¬: There was an unexpected error (type=Internal Server Error, status=500). -  ì„œë²„ ì½˜ì†”/ë¡œê·¸ë¥¼ í™•ì¸í•˜ê³  ë¬¸ì œê°€ ë˜ëŠ” ë¶€ë¶„ì„ ìˆ˜ì •í•´ì•¼í•¨.


