# π“ 0. ν¬μΈν„°
### π“ 0-1. ν¬μΈν„° κΈ°λ³Έμ›λ¦¬
- goμ—λ„ cμ–Έμ–΄μ—μ„μ™€ λ§μ°¬κ°€μ§€λ΅ ν¬μΈν„°κ°€ μλ‹¤.
- new ν•¨μλ¥Ό μ΄μ©ν•΄μ„λ„ ν¬μΈν„°λ¥Ό λ°ν™ν•  μ μλ‹¤. μ΄λ• newInt := new(int) μΌλ• κΈ°λ³Έκ°’μ„ ν• λ‹Ήν• λ©”λ¨λ¦¬μ μ£Όμ†λ¥Ό newIntμ— λ°ν™ν•λ‹¤.
- μ΄λ• new(T)μ΄λ―€λ΅ λ―Έλ¦¬ μ •μλ κµ¬μ΅°μ²΄λ¥Ό ν• λ‹Ήν•  μλ„ μλ‹¤. new(Player)
```go
package main
import "fmt"
// int ν¬μΈν„°λ¥Ό μΈμλ΅ λ°›μ•„ μ›λ³Έ int κ°’μ„ λ³€κ²½ν•λ” ν•¨μ
func incrementWithPointer(x *int) {
    *x++ // xκ°€ κ°€λ¦¬ν‚¤λ” κ°’(μ›λ³Έ λ³€μ)μ„ 1 μ¦κ°€
    fmt.Println(" incrementWithPointer ν•¨μ λ‚΄λ¶€ *x:", *x)
}
// Player κµ¬μ΅°μ²΄ ν¬μΈν„°λ¥Ό μΈμλ΅ λ°›μ•„ μ›λ³Έ κµ¬μ΅°μ²΄ ν•„λ“λ¥Ό λ³€κ²½ν•λ” ν•¨μ
func levelUpWithPointer(p *Player) {
    p.Level++ // (*p).Level++ μ™€ λ™μΌ (Goκ°€ μλ™μΌλ΅ μ—­μ°Έμ΅°)
    fmt.Println(" levelUpWithPointer ν•¨μ λ‚΄λ¶€ Player:", *p)
}
type Player struct {
    Name string
    Level int
}

func main() {
 // 3.1 κΈ°λ³Έ νƒ€μ…μ— ν¬μΈν„° μ‚¬μ©
    a := 5
    incrementWithPointer(&a) // aμ μ£Όμ†λ¥Ό μ „λ‹¬
   

    // 3.2 κµ¬μ΅°μ²΄μ— ν¬μΈν„° μ‚¬μ©
    p := Player{Name: "Warrior", Level: 10}
    levelUpWithPointer(&p) // pμ μ£Όμ†λ¥Ό μ „λ‹¬
    

 // 3.3 new ν•¨μλ¥Ό μ΄μ©ν• ν¬μΈν„° μƒμ„±
 // new(T)λ” T νƒ€μ…μ μ λ΅ κ°’μΌλ΅ μ΄κΈ°ν™”λ λ³€μλ¥Ό ν• λ‹Ήν•κ³  κ·Έ μ£Όμ†λ¥Ό λ°ν™ν•λ‹¤.
    newInt := new(int) // int νƒ€μ…μ ν¬μΈν„° (*int) λ°ν™, *newIntλ” 0μΌλ΅ μ΄κΈ°ν™”
    *newInt = 123

    newPlayer := new(Player) // Player νƒ€μ…μ ν¬μΈν„° (*Player) λ°ν™, ν•„λ“λ” μ λ΅ κ°’μΌλ΅ μ΄κΈ°ν™”

    newPlayer.Name = "Mage"
    newPlayer.Level = 5
}
```

### π“ 0-2. λ©”λ¨λ¦¬ κ΄€λ¦¬ μ¤νƒ vs. ν™
- Goλ” κ°λ°μκ°€ λ©”λ¨λ¦¬λ¥Ό μ§μ ‘ ν• λ‹Ήν•κ³  ν•΄μ ν•  ν•„μ”κ°€ μ—†λ„λ΅ κ°€λΉ„μ§€ μ»¬λ ‰ν„°(GC)λ¥Ό μ κ³µν•λ‹¤.
- λ³€μκ°€ μ¤νƒμ— ν• λ‹Ήλ μ§€ ν™μ— ν• λ‹Ήλ μ§€λ” μ»΄νμΌλ¬μ **μ΄μ¤μΌ€μ΄ν”„ λ¶„μ„(Escape Analysis)**μ— μν•΄ κ²°μ •λλ‹¤.
- μ΄μ¤μΌ€μ΄ν”„ λ¶„μ„ (Escape Analysis): Go μ»΄νμΌλ¬λ” λ³€μκ°€ ν•¨μ λ²”μ„λ¥Ό λ²—μ–΄λ‚(escape) λ‹¤λ¥Έ κ³³μ—μ„ μ°Έμ΅°λ  κ°€λ¥μ„±μ΄ μλ”μ§€ λ¶„μ„ν•λ‹¤
- μ¤νƒ ν• λ‹Ή: λ³€μκ°€ ν•¨μ λ‚΄λ¶€μ—μ„λ§ μ‚¬μ©λκ³  ν•¨μ μΆ…λ£ ν›„ λ” μ΄μƒ ν•„μ” μ—†λ” κ²½μ°.
- ν™ ν• λ‹Ή: λ³€μκ°€ ν•¨μ μ™Έλ¶€λ΅ "μ΄μ¤μΌ€μ΄ν”„"ν•μ—¬ ν•¨μ μΆ…λ£ ν›„μ—λ„ μ°Έμ΅°λ  μ μλ” κ²½μ° (μ: ν•¨μμ λ°ν™ κ°’μΌλ΅ ν¬μΈν„°κ°€ μ „λ‹¬λκ±°λ‚, μ „μ—­ λ³€μμ— ν• λ‹Ήλλ” κ²½μ°).
```go
package main
import "fmt"
// μ΄ ν•¨μλ” int ν¬μΈν„°λ¥Ό λ°ν™ν•λ―€λ΅, xλ” ν™μ— ν• λ‹Ήλ  κ°€λ¥μ„±μ΄ λ†’λ‹¤ (μ΄μ¤μΌ€μ΄ν”„).
func createIntPointer() *int {
    x := 10 // xλ” ν•¨μ λ‚΄λ¶€μ—μ„ μ„ μ–Έλμ—μ§€λ§, μ£Όμ†κ°€ λ°ν™λλ―€λ΅ ν™μΌλ΅ μ΄μ¤μΌ€μ΄ν”„λ  μ μλ‹¤.
    fmt.Println(" createIntPointer λ‚΄λ¶€ - xμ μ£Όμ†:", &x)
    return &x
}
// μ΄ ν•¨μλ” int κ°’μ„ λ°ν™ν•λ―€λ΅, yλ” μ¤νƒμ— ν• λ‹Ήλ  κ°€λ¥μ„±μ΄ λ†’λ‹¤.
func createIntValue() int {
    y := 20 // yλ” ν•¨μ μΆ…λ£ ν›„ λ” μ΄μƒ μ°Έμ΅°λμ§€ μ•μΌλ―€λ΅ μ¤νƒμ— ν• λ‹Ήλ  κ°€λ¥μ„±μ΄ λ†’λ‹¤.
    fmt.Println(" createIntValue λ‚΄λ¶€ - yμ μ£Όμ† (κ°λ…μ ):", &y) // μ‹¤μ  μ£Όμ†λ” μ¤νƒ ν”„λ μ„ λ‚΄
    return y
}
// ν° κµ¬μ΅°μ²΄λ¥Ό κ°’μΌλ΅ λ°ν™ν•λ” κ²½μ° (λ³µμ‚¬ λΉ„μ© λ°μƒ)
type LargeStruct struct {
    Data [1024]byte // 1KB ν¬κΈ°μ λ°°μ—΄
}
func createLargeStructByValue() LargeStruct {
    var s LargeStruct
    // sμ— λ°μ΄ν„° μ±„μ°κΈ°
    return s // s μ „μ²΄κ°€ λ³µμ‚¬λμ–΄ λ°ν™λλ‹¤.
}
// ν° κµ¬μ΅°μ²΄λ¥Ό ν¬μΈν„°λ΅ λ°ν™ν•λ” κ²½μ° (λ³µμ‚¬ λΉ„μ© κ°μ†, ν™ ν• λ‹Ή κ°€λ¥μ„± λ†’μ)
func createLargeStructByPointer() *LargeStruct {
    s := new(LargeStruct) // ν™μ— ν• λ‹Ήλ  κ°€λ¥μ„± λ†’μ
    // sμ— λ°μ΄ν„° μ±„μ°κΈ°
    return s // ν¬μΈν„° κ°’λ§ λ³µμ‚¬λμ–΄ λ°ν™λλ‹¤.
}
func main() {
 // 5.1 μ΄μ¤μΌ€μ΄ν”„ λ¶„μ„ μμ‹
    fmt.Println("---", "5.1 μ΄μ¤μΌ€μ΄ν”„ λ¶„μ„ μμ‹", "---")
    ptr := createIntPointer()
    fmt.Println("main ν•¨μ - ptrμ΄ κ°€λ¦¬ν‚¤λ” κ°’:", *ptr) // 10
    *ptr = 15
    fmt.Println("main ν•¨μ - ptrμ΄ κ°€λ¦¬ν‚¤λ” κ°’ λ³€κ²½ ν›„:", *ptr) // 15
    val := createIntValue()
    fmt.Println("main ν•¨μ - val:", val) // 20

    // 5.2 ν° λ°μ΄ν„° κµ¬μ΅° μ „λ‹¬ λ°©μ‹μ— λ”°λ¥Έ λ©”λ¨λ¦¬ ν¨μ¨μ„± (κ°λ…μ )
    fmt.Println("\n---", "5.2 ν° λ°μ΄ν„° κµ¬μ΅° μ „λ‹¬ λ°©μ‹μ— λ”°λ¥Έ λ©”λ¨λ¦¬ ν¨μ¨μ„±", "---")
    // κ°’μΌλ΅ μ „λ‹¬: LargeStruct μ „μ²΄κ°€ λ³µμ‚¬λλ‹¤. (λΉ„μ© λ†’μ)
    largeVal := createLargeStructByValue()
    fmt.Printf("LargeStruct (κ°’): %p\n", &largeVal)
    // ν¬μΈν„°λ΅ μ „λ‹¬: ν¬μΈν„° κ°’λ§ λ³µμ‚¬λλ‹¤. (λΉ„μ© λ‚®μ)
    largePtr := createLargeStructByPointer()
    fmt.Printf("LargeStruct (ν¬μΈν„°): %p\n", largePtr)
}
```

### π“ 0-3. κ°€λΉ„μ§€ μ»¬λ ‰μ… (Garbage Collection)
- λ™μ‹μ„± GC: Goμ GCλ” λ€λ¶€λ¶„μ μ‘μ—…μ„ μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ™μ‹μ— μν–‰ν•μ—¬ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰μ„ λ©μ¶”λ” μ‹κ°„(Stop-theWorld, STW)μ„ μµμ†ν™”ν•λ‹¤. μ΄λ” Javaμ μµμ‹  GC(G1, ZGC λ“±)μ™€ μ μ‚¬ν• λ©ν‘λ¥Ό κ°€μ§„λ‹¤.
- λ§ν¬-μ¤μ•(Mark-Sweep) λ°©μ‹: Goμ GCλ” κΈ°λ³Έμ μΌλ΅ λ§ν¬-μ¤μ• μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ‹¤.
Mark (ν‘μ‹): GC λ£¨νΈ(μ‹¤ν–‰ μ¤‘μΈ κ³ λ£¨ν‹΄μ μ¤νƒ, μ „μ—­ λ³€μ λ“±)μ—μ„λ¶€ν„° λ„λ‹¬ κ°€λ¥ν• λ¨λ“  κ°μ²΄λ¥Ό ν‘μ‹ν•λ‹¤.
- Sweep (μ²­μ†): ν‘μ‹λμ§€ μ•μ€(λ„λ‹¬ λ¶κ°€λ¥ν•) κ°μ²΄λ“¤μ„ λ©”λ¨λ¦¬μ—μ„ ν•΄μ ν•λ‹¤.
- νλ‹ λ¶ν•„μ”: λ€λ¶€λ¶„μ κ²½μ° Goμ GCλ” λ³„λ„μ νλ‹ μ—†μ΄λ„ μ λ™μ‘ν•λ„λ΅ μ„¤κ³„λμ—λ‹¤.
- μ•„λ λ…λ Ήμ–΄λ΅ κ°€λΉ„μ§€ μ»¬λ ‰ν„°λ¥Ό κ°•μ λ΅ νΈμ¶ν•  μ μλ‹¤.
```go
runtime.GC()
```
