# ğŸ“Œ 0. ë³´ìŠ¤ í´ë¡ ì½”ë”© ì‘ì—…
### ğŸ“Œ 0-1. ë¡œê·¸ì¸ ì‹œì— íƒˆí‡´íšŒì› ì—¬ë¶€ ê²€ì‚¬ì¶”ê°€
- ìš°ì„  dbì—ì„œ tinyIntë¡œ ì„¤ì •ëœ íƒˆí‡´ì—¬ë¶€ ì†ì„±ì€ DBì— 0ì´ë©´ â†’ ìë°”ì—ì„œ false, DBì— 1ì´ë©´ â†’ ìë°”ì—ì„œ trueë¡œ ë„˜ì–´ì˜¬ë•Œ ìë™ ë§¤í•‘í•´ì¤€ë‹¤.
- íƒˆí‡´ë¥¼ í•˜ë©´ 3ê°œì›”ê°„ì€ ì •ë³´ë¥¼ ë‚¨ê²¼ë‹¤ê°€ ì‚­ì œí•´ì•¼ë˜ê¸° ë•Œë¬¸ì— íƒˆí‡´ì—¬ë¶€ë¥¼ í‘œì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  ë¡œê·¸ì¸ì—ì„œ ì„¸ì…˜ì„ ë¶€ì—¬í• ë•Œ í•´ë‹¹ ê°’ì„ ê²€ì‚¬í•˜ì—¬ ë¶€ì—¬í•´ì£¼ì–´ì•¼ í•œë‹¤.
- ì•„ë˜ëŠ” í•´ë‹¹ ë‚´ìš©ì„ êµ¬í˜„í•œ ê²ƒì´ë‹¤.
```java
// íƒˆí‡´íšŒì› ì—¬ë¶€ ê²€ì‚¬ -> isOut í•„ë“œê°€ trueì¸ ê²½ìš° = íƒˆí‡´í•œ íšŒì›
            if (member.isOut()) {
                result.put("success", false);
                result.put("message", "ì´ë¯¸ íƒˆí‡´í•œ íšŒì›ì…ë‹ˆë‹¤. ì¬ê°€ì… í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
                result.put("timestamp", LocalDateTime.now().toString());
                return result;
            }
```

### ğŸ“Œ 0-2 boolean getterëŠ” isë¡œ ì‹œì‘í•œë‹¤.
- ìš°ì„  boolean ê°’ì˜ getterëŠ” isë¡œ ì‹œì‘í•˜ê³  ê°’ì„ ë¹„ì›Œë‘ë©´ ì•ˆëœë‹¤. ë¬´ì¡°ê±´ ìˆê±°ë‚˜ ì—†ê±°ë‚˜ë¡œ ê°€ì•¼í•œë‹¤.
- ê·¸ë¦¬ê³  boolean tableì€ ë¬´ì¡°ê±´ not nullì´ì–´ì•¼ í•  ê²ƒ ê°™ë‹¤.
```java
// smsTerm (SMS ìˆ˜ì‹  ë™ì˜, Boolean: null í—ˆìš©)
        result.put("smsTerm", userProfile.isSmsTerm());

        // emailTerm (ì´ë©”ì¼ ìˆ˜ì‹  ë™ì˜, Boolean: null í—ˆìš©)
        result.put("emailTerm", userProfile.isEmailTerm());
```

### ğŸ“Œ 0-3. ì •ë³´ìˆ˜ì • ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
- image inputì— change ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ë•Œ í™•ì¥ìë¥¼ ì…‹ ì¤‘ì— í•˜ë‚˜ë¡œ í•œì •í•´ì•¼í•œë‹¤.
- ë˜ í•„ìˆ˜ í•­ëª© ë“¤ì€ ëª¨ë‘ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤.
- ê·¸ë¦¬ê³  í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ì…ë ¥ë  ìˆ˜ ìˆëŠ” ê°’ë“¤ë„ ëª¨ë‘ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.
```js
imgInput.addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;

    // í™•ì¥ì ê²€ì‚¬
    const profileImgPattern = /\.(jpg|jpeg|png)$/i;
    if (!profileImgPattern.test(file.name)) { // í™•ì¥ì ê²€ì‚¬
        alert("í”„ë¡œí•„ ì´ë¯¸ì§€ëŠ” ì´ë¯¸ì§€ íŒŒì¼(jpg, jpeg, png)ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
        // ì„ íƒ ì·¨ì†Œ -> í¼ì—ì„œ íŒŒì¼ ê°’ ë¦¬ì…‹
        e.target.value = "";
        return;
    }
```
- ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ê²€ì‚¬ë„ ì œí•œì„ ë‘ì–´ì„œ ì„¤ì •í•˜ì˜€ë‹¤. 8ì ì´ìƒ 20ì ì´í•˜ ì˜ë¬¸ê³¼ ìˆ«ìì˜ ì¡°í•©ìœ¼ë¡œ ì„¤ì •
```js
// ë¹„ë°€ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬ (í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, ì…ë ¥ ì‹œ ì²´í¬)
    const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/;
    if((newPassword.trim().length < 8 || newPassword.trim().length > 20) || !passwordPattern.test(newPassword)) {
        alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìì´ìƒ 20ìì´í•˜ ì˜ë¬¸ê³¼ ìˆ«ìì˜ ì¡°í•©ìœ¼ë¡œ ì…ë ¥í•˜ì„¸ìš”.");
        return;
    }
```
- ì´ë¦„, ì „í™”ë²ˆí˜¸, ìƒë…„ì›”ì¼ í˜•ì‹ê²€ì‚¬ ì¶”ê°€
- isNaN(ê°’)ì€ ê°’ì´ ìˆ«ìê°€ ì•„ë‹ˆë©´ trueë¥¼ ì˜ë¯¸í•œë‹¤. ë§Œì•½ ìˆ«ì(í˜¹ì€ ìˆ«ìë¡œ ë³€í™˜ ê°€ëŠ¥í•œ ê°’)ì´ë©´ falseë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.
```js
// ì´ë¦„ í˜•ì‹ ê²€ì‚¬ (í•„ìˆ˜í•­ëª©)
    const korPattern = /^[ê°€-í£]{2,}$/;
    if (!korPattern.test(name)) {
        alert("ì´ë¦„ì€ í•œê¸€ë¡œë§Œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
    }

    // ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì‚¬ (í•„ìˆ˜í•­ëª©)
    const phonePattern1 = /^01(?:0|1|[6-9])(?:\d{3}|\d{4})\d{4}$/;          // 010xxxxxxxx í˜•ì‹
    const phonePattern2 = /^01(?:0|1|[6-9])[-]?(?:\d{3}|\d{4})[-]?\d{4}$/;  // 010-xxxx-xxxx í˜•ì‹
    if(!phonePattern1.test(phone) && !phonePattern2.test(phone)) {
        alert("ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
        return;
    }

    // ìƒë…„ì›”ì¼ í˜•ì‹ ê²€ì‚¬ (í•„ìˆ˜í•­ëª©)
    const birthYearNum = parseInt(birthYear, 10);
    const birthMonthNum = parseInt(birthMonth, 10);
    const birthDayNum = parseInt(birthDay, 10);

    if (isNaN(birthYearNum) || isNaN(birthMonthNum) || isNaN(birthDayNum)) {
        alert("ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
        return;
    }
```
- javaì—ë„ ë‚´ìš©ì„ ì¶”ê°€í•˜ì˜€ë‹¤.
```java
// ì´ë¦„ í˜•ì‹ ê²€ì‚¬ (í•œê¸€ 2ê¸€ì ì´ìƒ)
        if (!name.matches("^[ê°€-í£]{2,}$")) {
            result.put("success", false);
            result.put("message", "ì´ë¦„ì€ í•œê¸€ 2ê¸€ì ì´ìƒë§Œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            result.put("timestamp", LocalDateTime.now().toString());
            return result;
        }

        // 010-xxxx-xxxx ë˜ëŠ” 010xxxxxxxx ëª¨ë‘ í—ˆìš©
        String phonePattern1 = "^01(?:0|1|[6-9])(?:\\d{3}|\\d{4})\\d{4}$";
        String phonePattern2 = "^01(?:0|1|[6-9])[-]?(?:\\d{3}|\\d{4})[-]?\\d{4}$";
        if (!phone.matches(phonePattern1) && !phone.matches(phonePattern2)) {
            result.put("success", false);
            result.put("message", "ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("timestamp", LocalDateTime.now().toString());
            return result;
        }

        try {
            int year = Integer.parseInt(birthYear);
            int month = Integer.parseInt(birthMonth);
            int day = Integer.parseInt(birthDay);

            if (month < 1 || month > 12 || day < 1 || day > 31) {
                throw new NumberFormatException();
            }

        } catch (NumberFormatException e) {
            result.put("success", false);
            result.put("message", "ìƒë…„ì›”ì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
            result.put("timestamp", LocalDateTime.now().toString());
            return result;
        }
```
- ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„±ê²€ì‚¬ ì¶”ê°€
```java
 if (!newPassword.matches("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$")) {
                result.put("success", false);
                result.put("message", "ë¹„ë°€ë²ˆí˜¸ëŠ” 8~20ì ì˜ë¬¸ê³¼ ìˆ«ìì˜ ì¡°í•©ì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
                result.put("timestamp", LocalDateTime.now().toString());
                return result;
            }
```
- íŒŒì¼ í˜•ì‹ê²€ì‚¬ë„ ë°±ì—”ë“œì— ì¶”ê°€í•˜ì˜€ë‹¤. 
- profileImg.getOriginalFilename(); ì´ê±°ëŠ” í™•ì¥ìë¥¼ fileê°ì²´ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œì´ë‹¤.
- profileImg.getContentType(); ë¥¼ í†µí•´ ì„ íƒí•œ íŒŒì¼ì˜ mime íƒ€ì…ì„ ê°€ì ¸ì˜¨ë‹¤. 
- MIME íƒ€ì…ì€ *"Multipurpose Internet Mail Extensions"**ì˜ ì¤„ì„ë§ë¡œ, íŒŒì¼(ë°ì´í„°)ì˜ í˜•ì‹ì„ ì¸í„°ë„· í‘œì¤€ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ë°©ì‹ì´ë‹¤. 
- content-Typeì€ HTTP ìš”ì²­/ì‘ë‹µì—ì„œ í•´ë‹¹ ë°ì´í„°(íŒŒì¼, ë³¸ë¬¸ ë“±)ê°€ ì–´ë–¤ ì¢…ë¥˜ì˜ ë°ì´í„°ì¸ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— í™•ì¥ì ë¬¸ìì—´ì„ ê²€ì‚¬í•˜ê³  ë” ì‹¬í™”ëœ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
```java
    String originalFileName = profileImg.getOriginalFilename();            
    if (originalFileName != null) {
        String lower = originalFileName.toLowerCase();
        if (!(lower.endsWith(".jpg") || lower.endsWith(".jpeg") || lower.endsWith(".png"))) {
            result.put("success", false);
            result.put("message", "í”„ë¡œí•„ ì´ë¯¸ì§€ëŠ” ì´ë¯¸ì§€ íŒŒì¼(jpg, jpeg, png)ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            result.put("timestamp", LocalDateTime.now().toString());
            return result;
        }
    }

    // MIME íƒ€ì… ê²€ì‚¬
    String contentType = profileImg.getContentType();
    if (contentType == null ||
        !(contentType.equalsIgnoreCase("image/jpeg") ||
        contentType.equalsIgnoreCase("image/png"))) {
        result.put("success", false);
        result.put("message", "í”„ë¡œí•„ ì´ë¯¸ì§€ëŠ” ì´ë¯¸ì§€ íŒŒì¼(jpg, jpeg, png)ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        result.put("timestamp", LocalDateTime.now().toString());
        return result;
    }
```
- profileImg.getInputStream() ì½ê¸°ìœ„í•œ ì…ë ¥ìŠ¤íŠ¸ë¦¼ ë¹¨ëŒ€ê½‚ê¸° 
- ImageIOëŠ” ì´ë¯¸ì§€ ì¸í’‹ì„ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì´ê³  readëŠ” ì£¼ì…í•œ ë¹¨ëŒ€ê°€ ìˆëŠ” ìœ„ì¹˜ì˜ íŒŒì¼ì´ ì§„ì§œ ì‚¬ì§„ì´ ë§ë‹¤ë©´ BufferedImageë¡œ ë³€í™˜í•´ì¤€ë‹¤.
- BufferedImageëŠ” ì´ë¯¸ì§€ë¥¼ ë‹¤ë£¨ëŠ” ê°ì²´ íƒ€ì…ìœ¼ë¡œ ì´ ê°ì²´ë¥¼ í†µí•´ ì´ë¯¸ì§€ì˜ í¬ê¸°, ìƒ‰ìƒ, í¬ë§· ë“± ë‹¤ì–‘í•œ ì •ë³´ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.
```java
try {
    BufferedImage img = ImageIO.read(profileImg.getInputStream());
    if (img == null) {
        result.put("success", false);
        result.put("message", "ì •ìƒì ì¸ ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        result.put("timestamp", LocalDateTime.now().toString());
        return result;
    }
} catch (IOException e) {
    result.put("success", false);
    result.put("message", "ì´ë¯¸ì§€ íŒŒì¼ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    result.put("timestamp", LocalDateTime.now().toString());
    return result;
}
```

### ğŸ“Œ 0-4. ìœ„ì‹œ ë¦¬ìŠ¤íŠ¸ html êµ¬í˜„
- "@{${profileImg != null && !#strings.isEmpty(profileImg) ? profileImg : '/assets/img/wishlist/default_profile.png'}}" : ëª¨ë¸ ê°ì²´ì— í”„ë¡œí•„ì´ë¯¸ì§€ ê²½ë¡œê°€ ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê³  ì—†ìœ¼ë©´ ê¸°ë³¸ì´ë¯¸ì§€ë¡œ í•œë‹¤.
- th:text="${userName}" : ìœ ì € ì´ë¦„ íƒ€ì„ë¦¬í”„ë¡œ ì±„ìš°ê¸°
- th:text="${orderTotalPrice}" : ìœ ì € ì´ ì£¼ë¬¸ ê¸ˆì•¡ íƒ€ì„ë¦¬í”„ë¡œ ì±„ìš°ê¸°
- th:text="${wishlist.size()}" : ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê°œìˆ˜ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì‚¬ì´ì¦ˆë¡œ
- th:if="${wishlist != null and !#lists.isEmpty(wishlist)}" : ë¦¬ìŠ¤íŠ¸ì— ê°’ì´ ìˆì„ë•Œë§Œ wishlist-info-container ì¶œë ¥
- th:each="item : ${wishlist}" : ëª¨ë¸ê°ì²´ì— ë“¤ì–´ìˆëŠ” ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê°ì²´ ë°˜ë³µëŒë ¤ì„œ ìƒí’ˆì •ë³´ ì°ì–´ë‚´ê¸°
- th:href="@{/product/{id}(id=${item.productId})}" : í´ë¦­í•˜ë©´ ìƒí’ˆì •ë³´ í˜ì´ì§€ë¡œ ì´ë™ (ì¶”í›„ í˜ì´ì§€ ì£¼ì†Œê°€ ì •í•´ì§€ë©´ ë³€ê²½í•´ì•¼í•¨)
- th:text="|${#numbers.formatInteger(item.productPrice, 0, 'COMMA')}ì›|" : formatInteger(ê°’, ìµœì†Œìë¦¬ìˆ˜, êµ¬ë¶„ì), ì¦‰, ìˆ«ìì— ì½¤ë§ˆ ì°ê³ , ë§¨ ë’¤ì— "ì›" ë¶™ì—¬ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œì´ë‹¤.
```html
<body>
        <header th:replace="~{fragments/header :: my-header}"></header>
        <section id="contents">
            <div id="mypage-container">
                <nav th:replace="~{fragments/mypage_menu :: mypage-menu}"></nav> <!-- ì‚¬ì´ë“œ ë©”ë‰´ -->
                <div class="main-contents">
                    <!-- ìƒë‹¨ íšŒì› ì •ë³´ ë¸”ë¡ -->
                    <div class="my-info-container">
                        <div class="open-profile-edit" id="profile-img">
                            <img th:src="@{${profileImg != null && !#strings.isEmpty(profileImg) ? profileImg : '/assets/img/wishlist/default_profile.png'}}"alt="í”„ë¡œí•„ ì´ë¯¸ì§€">
                        </div>
                        <div class="my-info">
                            <div class="my-name"><strong class="strong-name" th:text="${userName}"></strong>ë‹˜ ì•ˆë…•í•˜ì„¸ìš”.</div>
                            <div class="my-purchase-amount">ëˆ„ì  êµ¬ë§¤ê¸ˆì•¡ : <span th:text="${orderTotalPrice}"></span>ì›</div>
                        </div>
                    </div>

                    <!-- ìœ„ì‹œ ë¦¬ìŠ¤íŠ¸ íƒ€ì´í‹€ -->
                    <div class="wishlist-title-container">
                        <h2 class="wishlist-title">ìœ„ì‹œë¦¬ìŠ¤íŠ¸</h2>
                        <div class="wishlist-count">
                            <span class="wishlist-count-number" th:text="${wishlist.size()}">1</span>
                        </div>
                    </div>
                    <!-- ìœ„ì‹œ ë¦¬ìŠ¤íŠ¸ ë°˜ë³µ ì»¨í…Œì´ë„ˆ -> ìœ„ì‹œë¦¬ìŠ¤íŠ¸ê°€ ìˆì„ë•Œë§Œ ë°˜ë³µ -->
                    <div class="wishlist-info-container" th:if="${wishlist != null and !#lists.isEmpty(wishlist)}">
                        <div class="wishlist-item" th:each="item : ${wishlist}">
                            <div class="wishlist-thumb-container">
                                <a th:href="@{/product/{id}(id=${item.productId})}">
                                    <img class="wishlist-thumb" th:src="@{${item.productImg}}" th:alt="${item.productName}">
                                </a>
                                <button class="wishlist-remove-btn" th:data-id="${item.productId}">
                                    <i class="fa fa-times"></i>
                                </button>
                            </div>
                            <div class="wishlist-detail">
                                <div class="wishlist-title">
                                    <a th:href="@{/product/{id}(id=${item.productId})}" th:text="${item.productName}"></a>
                                </div>
                                <div class="wishlist-discount">
                                    <span class="wishlist-sale" th:text="|${#numbers.formatInteger(item.productPrice, 0, 'COMMA')}ì›|"></span>
                                </div>
                                <div class="wishlist-tags">
                                    <span class="wishlist-tag" th:if="${item.isBest == 1}">BEST</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </section>
    <script th:src="@{/assets/js/edit/edit_js.js}"></script>
    <footer th:replace="~{fragments/footer :: my-footer}"></footer>
    </body>
```

### ğŸ“Œ 0-5. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ controller
- ìœ„ì‹œë¦¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ í˜ì´ì§€ë¡œ ì™€ì„œ ì„¸ì…˜ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•´ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ì— ë³´ì—¬ì¤„ íƒ€ì„ë¦¬í”„ë¡œ ëŒ€ì²´ë  ê°’ë“¤ì„ ê°€ì ¸ì˜´.
- ì—¬ê¸°ì„  ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ë§Œë“¤ì–´ë‘” 500ì—ëŸ¬ í˜ì´ì§€ë¡œ ì´ë™í•œë‹¤.
```java
@Controller
public class WishListController {

    @Autowired
    private WishlistService wishlistService;

    @GetMapping("/wishlist")
    public String wishlistPage(Model model, HttpSession session, HttpServletResponse response) {

        // ì„¸ì…˜ì—ì„œ ë¡œê·¸ì¸ëœ ìœ ì € ID ê°€ì ¸ì˜¤ê¸°
        Integer userId = (Integer) session.getAttribute("memberInfo");

        if (userId == null) {
            // ë¡œê·¸ì¸ ì•ˆí–ˆìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            return "redirect:/login";
        }

        // User ê°ì²´ì—ì„œ ì„¸ì…˜ ì•„ì´ë””ë¥¼ í†µí•´ profileImg, userName, orderTotalPrice  ê°€ì ¸ì˜¤ê¸°
        User user = new User();
        user.setUserId(userId);

        try {
            user = wishlistService.getUserInfo(user);
        } catch (Exception e) {
            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); // ì„œë²„ ì—ëŸ¬ ë°œìƒ ì‹œ
            e.printStackTrace(); // ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
            return "error/500"; // ì—ëŸ¬ í˜ì´ì§€ë¡œ ì´ë™
        }

        model.addAttribute("userId", userId);
        model.addAttribute("orderTotalPrice", user.getOrderTotalPrice());
        model.addAttribute("profileImg", user.getUserProfileImg());
        model.addAttribute("userName", user.getUserName());

        Wishlist wishlist = new Wishlist();
        wishlist.setUserId(userId);

        // í•´ë‹¹ ìœ ì €ì˜ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ë¦¬ìŠ¤íŠ¸(productId, productName, productPrice, isBest) ê°€ì ¸ì˜¤ê¸°
        List<Wishlist> wishlistItems;

        try {
            wishlistItems = wishlistService.getWishlistByUserId(wishlist);
        } catch (Exception e) {
            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
            e.printStackTrace(); // ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
            return "error/500"; // ì—ëŸ¬ í˜ì´ì§€ë¡œ ì´ë™
        }

        model.addAttribute("wishlist", wishlistItems);

        return "wishlist/index";
    }
}
```

### ğŸ“Œ 0-6. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ë§¤í¼, userì—ì„œ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ê´€ë ¨ ë§¤í¼
- ì„œë¹„ìŠ¤ëŠ” ë‹¨ìˆœíˆ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë§¤í¼ë¥¼ ì¤‘ê°œí•´ì£¼ëŠ” ì¼ë§Œ í•˜ê¸° ë•Œë¬¸ì— êµ³ì´ ì„¤ëª…í•˜ì§€ ì•Šê² ë‹¤.
- ì—¬ê¸°ì„  ìœ„ì‹œë¦¬ìŠ¤íŠ¸ í…Œì´ë¸”ê³¼ ìƒí’ˆ ìƒì„¸ì •ë³´ í˜ì´ì§€ë¥¼ ì—°ê²°í•˜ì—¬ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ì˜¬ë¼ê°€ìˆëŠ” ìƒí’ˆë“¤ì˜ ìƒì„¸ì •ë³´ë¥¼ ì—…ë¡œë“œ í•œë‹¤.
- ì¼ë°˜ ì¡°ì¸ìœ¼ë¡œ ì •ë³´ë¥¼ ëŒì–´ì˜¨ë‹¤.
```java
@Mapper
public interface WishlistMapper {
    
    @Results(id = "WishlistMap", value = {
        @Result(column = "wishlist_id", property = "wishlistId"),
        @Result(column = "user_id", property = "userId"),
        @Result(column = "product_id", property = "productId"),
        @Result(column = "reg_date", property = "regDate"),
        @Result(column = "product_name", property = "productName"),
        @Result(column = "product_price", property = "productPrice"),
        @Result(column = "product_img", property = "productImg"),
        @Result(column = "is_best", property = "isBest")
    })
    @Select(
        "SELECT " +
        "w.wishlist_id, w.user_id, w.product_id, w.reg_date, " +
        "p.product_name, p.product_price, p.product_img, p.is_best " +
        "FROM wishlists w " +
        "INNER JOIN products p ON w.product_id = p.product_id " +
        "WHERE w.user_id = #{userId} " 
    )
    List<Wishlist> selectWishlistByUserId(Wishlist wishlist);
}
```
- ì—¬ê¸°ì„  LEFT JOINì„ ì‚¬ìš©í•˜ì˜€ëŠ”ë° ì´ìœ ëŠ” idì— í•´ë‹¹ëœ ì£¼ë¬¸ë‚´ì—­ì´ í•˜ë‚˜ë„ ì—†ì–´ì„œ ì£¼ë¬¸ ì´ ê¸ˆì•¡ì„ êµ¬í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ idë§Œ ìˆê³  nullì¼ê²½ìš° 0ì´ë¼ë„ ì¶œë ¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.
- left joinì„ í†µí•´ id ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ì£¼ë¬¸ ë‚´ì—­ì˜ ì´ ì£¼ë¬¸ê¸ˆì•¡ì„ í•©ì‚°í•˜ì—¬(group by - sum) order_total_priceë¡œ ë¦¬í„´í•œë‹¤.
```java
    @Select(
        "SELECT " +
        "u.user_id, u.user_email, u.user_password, u.user_name, u.user_gender, u.user_phone, " +
        "u.user_birthdate, u.user_postcode, u.user_address, u.user_specific_address, u.user_profile_img, " +
        "u.required_term, u.sms_term, u.email_term, u.is_out, u.reg_date, u.edit_date, " +
        "IFNULL(SUM(o.order_total_price), 0) AS order_total_price " +
        "FROM users u " +
        "LEFT JOIN orders o ON u.user_id = o.user_id " +
        "WHERE u.user_id = #{userId} " +
        "GROUP BY u.user_id"
    )
    @ResultMap("UserMap")
    User selectUserWithOrderTotalPrice(User user) throws Exception;
```

# ğŸ“Œ 1. ìŠ¤ì¼€ì¤„ëŸ¬
- íŠ¹ì • ì‹œê°„ì´ë‚˜ ì£¼ê¸°ì— ë§ì¶°ì„œ ì–´ë–¤ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì‹¤í–‰í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.
- ì•„ë§ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì¼ì • ì‹œê°„ ì´í›„ì— íƒˆí‡´í•œ íšŒì›ì˜ ì •ë³´ë¥¼ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ ì‚¬ìš©í•  ê²ƒ ê°™ë‹¤.
- @EnableAsync : ë¹„ë™ê¸°(Async) ì‘ì—…ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤. ì¦‰, ì–´ë–¤ ë©”ì„œë“œì— @Asyncë¥¼ ë¶™ì´ë©´ ë”°ë¡œ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ì–´ì„œ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
- @Scheduled(fixedDelay = 1000) : ì´ì „ ì‹¤í–‰ì´ ëë‚˜ê³  1ì´ˆ ë’¤ì— ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤ëŠ” ëœ»ì´ë‹¤.
- Thread.sleep(1000); 1ì´ˆ ë™ì•ˆ ì¼ë¶€ëŸ¬ ë©ˆì¶”ëŠ” ì½”ë“œì´ë‹¤. ë³´í†µ ë©”ì¼ ë°œì†¡ê°™ì€ê±° í• ë•Œ ì‘ì—…ì‹œê°„ë§Œí¼ ì²˜ë¦¬ë¥¼ ë¯¸ë£¬ë‹¤.
- @Scheduled(fixedRate = 1000) : ë¬´ì¡°ê±´ 1ì´ˆë§ˆë‹¤ ì‹¤í–‰í•˜ëŠ” ë¡œì§ì´ë‹¤.
- @Scheduled(initialDelay = 1000, fixedDelay = 2000) : ì²˜ìŒì—” 1ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì‹¤í–‰í•˜ê³  ê·¸ ë‹¤ìŒë¶€í„°ëŠ” 2ì´ˆ ë§ˆë‹¤ ì‹¤í–‰í•œë‹¤.
- cron í‘œí˜„ì‹ì€ ë§¤ì‹œ 8ë¶„ 0ì´ˆì— ì‹¤í–‰í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤. "0 08 * * * * ?"
- ì¼ë°˜ì ìœ¼ë¡œ @Scheduled(cron = "...")ì€ ë” ë³µì¡í•œ ì¼ì • ì§€ì •ì— ì“°ê²Œëœë‹¤.
```java
@Component
@EnableAsync
public class SchedulerDemo {
    
    @Scheduled(fixedDelay = 1000)
    public void sample1() throws InterruptedException {
        System.out.println("sample1" + LocalDateTime.now());
        Thread.sleep(1000);
        System.out.println("sample1 end" + LocalDateTime.now());
    }

    @Async
    @Scheduled(fixedRate = 1000)
    public void sample2() throws InterruptedException {
        System.out.println("sample2" + LocalDateTime.now());
        Thread.sleep(1000);
        System.out.println("sample2 end" + LocalDateTime.now());
    }

    @Scheduled(initialDelay = 1000, fixedDelay = 2000)
    public void sample3() throws InterruptedException {
        System.out.println("sample3" + LocalDateTime.now());
        Thread.sleep(1000);
        System.out.println("sample3 end" + LocalDateTime.now());
    }

    @Scheduled(cron = "0 08 * * * * ?")
    public void sample4() throws InterruptedException {
        System.out.println("sample4" + LocalDateTime.now());
        Thread.sleep(1000);
        System.out.println("sample4 end" + LocalDateTime.now());
    }
}
```