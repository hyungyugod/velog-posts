# 📌 1. 데이터 전처리
### 1-1. 범주형 변수 축소
- 우선 빈도를 계산하여 확률화된 series를 반환한다.
- .map(freq)는 각 행의 weather 값에 대응되는 확률을 freq에서 찾아서 붙인다.
- 결과적으로 prob_columns는 원래 weather 컬럼과 같은 길이의 확률 열이 된다.
- mask(조건, 대체값)은 조건이 True인 위치를 대체값으로 치환한다.
- 테스트 케이스를 처리한 경우는
- np.where(조건, 참일 때 값, 거짓일 때 값) 구조이다.
- test_bike['weather'].isin([4])는 weather가 4인 경우만 True이다.
- True이면 'other', 아니면 원래 값을 유지한다.
- 즉, 테스트셋에서 값이 4인 것만 'other'로 치환한다.
```py
freq = train_bike['weather'].value_counts(normalize=True)
prob_columns = train_bike['weather'].map(freq)
train_bike['weather'] = train_bike['weather'].mask(prob_columns < 0.1, 'other')
test_bike['weather'] = np.where(test_bike['weather'].isin([4]), 'other', test_bike['weather'])
```
